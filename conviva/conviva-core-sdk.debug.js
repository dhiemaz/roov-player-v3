/*! (C) 2020 Conviva, Inc. All rights reserved. Confidential and proprietary. */

!function(t,n){"function"==typeof define&&define.amd?define(n):("object"==typeof exports||"object"==typeof module&&module.exports)&&(module.exports=n()),void 0!==t&&void 0===t.Conviva&&(t.ConvivaLoading||(t.ConvivaLoading=!0,t.Conviva=n(),delete t.ConvivaLoading))}(this,function(){var ht={};return function(){"use strict";var at={};!function(){var S=ht.Constants={};S.version="4.1.2",S.CUSTOMER_KEY="customerKey",S.GATEWAY_URL="gatewayUrl",S.LOG_LEVEL="logLevel",S.ASSET_NAME="Conviva.assetName",S.PLAYER_NAME="Conviva.applicationName",S.APPLICATION_VERSION="c3.app.version",S.IS_LIVE="Conviva.streamType",S.ENCODED_FRAMERATE="Conviva.encodedFrameRate",S.DEFAULT_RESOURCE="Conviva.defaultResource",S.STREAM_URL="Conviva.streamUrl",S.VIEWER_ID="Conviva.viewerId",S.DURATION="Conviva.duration",S.POD_INDEX="podIndex",S.POD_POSITION="podPosition",S.POD_DURATION="podDuration",S.MODULE_NAME="Conviva.moduleName",S.MODULE_VERSION="Conviva.moduleVersion",S.FRAMEWORK_NAME="Conviva.frameworkName",S.FRAMEWORK_VERSION="Conviva.frameworkVersion",S.i="Constants not yet configured",S.e="Invalid : Did you report playback ended?",S.s="Invalid : Did you report ad playback ended?",S.l="Player cannot be null",S.u="PlaybackAnlytics already built",S.o="PlaybackAnlytics not yet built",S.Playback={BITRATE:"BITRATE",PLAY_HEAD_TIME:"PLAY_HEAD_TIME",RESOLUTION:"RESOLUTION",BUFFER_LENGTH:"BUFFER_LENGTH",PLAYER_STATE:"PLAYER_STATE",RENDERED_FRAMERATE:"RENDERED_FRAMERATE",SEEK_STARTED:"SEEK_STARTED",SEEK_ENDED:"SEEK_ENDED",CDN_IP:"CDN_IP",DROPPED_FRAMES_TOTAL:"DROPPED_FRAMES_TOTAL",DROPPED_FRAMES_COUNT:"DROPPED_FRAMES_COUNT"},S.Network={SIGNAL_STRENGTH:"SIGNAL_STRENGTH",LINK_ENCRYPTION:"LINK_ENCRYPTION",CONNECTION_TYPE:"CONNECTION_TYPE"},S.ErrorSeverity={FATAL:1,WARNING:0},S.NO_SESSION_KEY=-2,S.AdPosition={PREROLL:"Pre-roll",MIDROLL:"Mid-roll",POSTROLL:"Post-roll"},S.AdPlayer={CONTENT:"CONTENT",SEPARATE:"SEPARATE"},S.DeviceType={DESKTOP:"DESKTOP",CONSOLE:"Console",SETTOP:"Settop",MOBILE:"Mobile",TABLET:"Tablet",SMARTTV:"SmartTV"},S.AdType={CLIENT_SIDE:"Client Side",SERVER_SIDE:"Server Side"},S.AdSlates={BLACKOUT_SLATE:"Blackout slate",TECHNICAL_DIFFICULTIES_SLATE:"Technical Difficulties slate",COMMERCIAL_SLATE:"Commercial Break slate",OTHER_SLATE:"Other slate",VPAID:"VPAID",REGULAR:"Regular Ad"},S.AdServingType={INLINE:"Inline",WRAPPER:"Wrapper"},S.DeviceCategory={ANDROID_DEVICE:"AND",APPLE_DEVICE:"APL",CHROMECAST:"CHR",DESKTOP_APP:"DSKAPP",DEVICE_SIMULATOR:"SIMULATOR",LG_TV:"LGTV",NINTENDO:"NINTENDO",PLAYSTATION:"PS",ROKU:"RK",SAMSUNG_TV:"SAMSUNGTV",SMART_TV:"TV",SET_TOP_BOX:"STB",TIVO:"TIVO",WEB:"WEB",WINDOWS_DEVICE:"WIN",XBOX:"XB",KAIOS_DEVICE:"KAIOS"},S.LogLevel={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},S.PlayerState={STOPPED:"STOPPED",PLAYING:"PLAYING",BUFFERING:"BUFFERING",PAUSED:"PAUSED",UNKNOWN:"UNKNOWN",NOT_MONITORED:"NOT_MONITORED"},S.Events={USER_WAIT_STARTED:"Conviva.UserWaitStarted",USER_WAIT_ENDED:"Conviva.UserWaitEnded",BUMPER_VIDEO_STARTED:"Conviva.BumperVideoStarted",BUMPER_VIDEO_ENDED:"Conviva.BumperVideoEnded",AD_REQUESTED:"Conviva.AdRequested",AD_RESPONSE:"Conviva.AdResponse",AD_SLOT_STARTED:"Conviva.SlotStarted",AD_ATTEMPTED:"Conviva.AdAttempted",AD_SLOT_ENDED:"Conviva.SlotEnded",AD_IMPRESSION_START:"Conviva.AdImpression",AD_START:"Conviva.AdStart",AD_FIRST_QUARTILE:"Conviva.AdFirstQuartile",AD_MID_QUARTILE:"Conviva.AdMidQuartile",AD_THIRD_QUARTILE:"Conviva.AdThirdQuartile",AD_COMPLETE:"Conviva.AdComplete",AD_END:"Conviva.AdEnd",AD_IMPRESSION_END:"Conviva.AdImpressionEnd",AD_SKIPPED:"Conviva.AdSkipped",AD_ERROR:"Conviva.AdError",AD_PROGRESS:"Conviva.AdProgress",AD_CLOSE:"Conviva.AdClose",CONTENT_PAUSED:"Conviva.PauseContent",CONTENT_RESUMED:"Conviva.ResumeContent",POD_START:"Conviva.PodStart",POD_END:"Conviva.PodEnd"},S.ErrorType={ERROR_UNKNOWN:"ERROR_UNKNOWN",ERROR_IO:"ERROR_IO",ERROR_TIMEOUT:"ERROR_TIMEOUT",ERROR_NULL_ASSET:"ERROR_NULL_ASSET",ERROR_MISSING_PARAMETER:"ERROR_MISSING_PARAMETER",ERROR_NO_AD_AVAILABLE:"ERROR_NO_AD_AVAILABLE",ERROR_PARSE:"ERROR_PARSE",ERROR_INVALID_VALUE:"ERROR_INVALID_VALUE",ERROR_INVALID_SLOT:"ERROR_INVALID_SLOT",ERROR_3P_COMPONENT:"ERROR_3P_COMPONENT",ERROR_UNSUPPORTED_3P_FEATURE:"ERROR_UNSUPPORTED_3P_FEATURE",ERROR_DEVICE_LIMIT:"ERROR_DEVICE_LIMIT",ERROR_UNMATCHED_SLOT_SIZE:"ERROR_UNMATCHED_SLOT_SIZE"},S.StreamType={UNKNOWN:"UNKNOWN",LIVE:"LIVE",VOD:"VOD"},S.CallbackFunctions={CONSOLE_LOG:"consoleLog",MAKE_REQUEST:"makeRequest",SAVE_DATA:"saveData",LOAD_DATA:"loadData",GET_EPOCH_TIME_IN_MS:"getEpochTimeInMs",CREATE_TIMER:"createTimer"},S.DeviceMetadata={BRAND:"DeviceBrand",MANUFACTURER:"DeviceManufacturer",MODEL:"DeviceModel",TYPE:"DeviceType",VERSION:"DeviceVersion",OS_NAME:"OperatingSystemName",OS_VERSION:"OperatingSystemVersion",CATEGORY:"DeviceCategory",SCREEN_RESOLUTION_WIDTH:"ScreenWidth",SCREEN_RESOLUTION_HEIGHT:"ScreenHeight",SCREEN_RESOLUTION_SCALE_FACTOR:"ScaleFactor"},S.AD_PRELOAD_FEATURE="adPreloading",S.AD_TAG_URL="adTagUrl",S.IMASDK_CONTENT_PLAYER="imaMainContentPlayer",S.CONVIVA_AD_MODULE="convivaAdModule",S.CONVIVA_MODULE="convivaModule",S.MEDIA_ELEMENT="mediaElement";var r=ht.Client=function(t,n){var u=this;this.a=!1,this.version=r.version,this.c=null,this.d=null,this.v=null,this.p=-1,this.g=null,this.A=null,this.S=null,this.R=null,this.y=-1,this.C=!1,this.m={},this.T=function(t){u.c&&u.c.info(" Client:: uniqueIdentifierCallback(): "+t)},this.I={},this.N=null,this.w=null,this._=null,this.O=function(){this.S.P("Client.makeIPV4IPV6GlobalSessions",function(){var t;!u.R||null!==(t=u.R.get(Y.D))&&t!==H.M&&u.d&&((t=new f).custom["c3.IPV4IPV6GlobalSession"]="T",t.custom["c3.domain"]=-1<u.g.L.indexOf(a.V)?a.V:a.U,u.F=u.d.B(t,null),(t=new f).custom["c3.IPV4IPV6GlobalSession"]="T",t.custom["c3.domain"]=-1<u.g.H.indexOf(a.K)?a.K:a.G,u.j=u.d.B(t,null))})},this.W=function(i){u.S.P("Client.updateConnectionType",function(){if(u.N=i,u.d){var t,n=u.d.q();for(t in n)n[t].Y(i)}})},this.J=function(i){u.S.P("Client.updateLinkEncryption",function(){if(u.w=i,u.d){var t,n=u.d.q();for(t in n)n[t].Q(i)}})},this.X=function(t){u.S.P("Client.updateSignalStrength",function(){u._=t})},function(t,n,i,e){if(!(t instanceof a))throw new Error("clientSettings parameter should be an instance of ClientSettings.");if(!(n instanceof h))throw new Error("systemFactory parameter should be an instance of SystemFactory.");t.gatewayUrl!=a.z+a.Z&&t.gatewayUrl!=a.$+a.Z||(this.a=!0),e&&(this.version=e),this.g=t.tt(),this.v=n,this.v.nt("SDK",this.g,this.version),this.S=this.v.it(),this.S.P("Client.init",function(){if(u.y=tt.et(),u.c=u.v.buildLogger(),u.c.setModuleName("Client"),u.a&&u.c.info("Gateway URL should not be set to https://cws.conviva.com or http://cws.conviva.com, therefore this call is ignored"),u.c.info("init(): url="+u.g.gatewayUrl+" customerKey="+u.g.customerKey),u.R=u.v.lt(),u.R.ut(),u.d=u.v.ot(u,u.g,u.R),i)for(var t in i)switch(t){case ht.Constants.Network.CONNECTION_TYPE:u.W(i[t]);break;case ht.Constants.Network.LINK_ENCRYPTION:u.J(i[t]);break;case ht.Constants.Network.SIGNAL_STRENGTH:u.X(i[t])}u.O(),u.c.info("init(): done.")},function(t){throw new Error("Client constructor failed: "+t.message)})}.apply(this,arguments),this.release=function(){this.C||this.S.P("Client.release",function(){null!=u.c&&(u.c.info("release()"),u.c=null),u.d.rt(),u.d=null,u.p=-1,u.y=-1,u.S=null,u.g=null,u.A=null,u.v=null,u.C=!0})},this.createSession=function(t,n){var i=r.NO_SESSION_KEY;return this.C||(null==t||t instanceof f?this.S.P("Client.createSession",function(){i=u.d.ht(t,j.ft.ct,n)}):u.c.error("createSession(): expecting an instance of ContentMetadata for contentMetadata parameter")),i},this.createAdSession=function(i,e,s){var l=r.NO_SESSION_KEY;return this.C||(null==e||e instanceof f?this.S.P("Client.createAdSession",function(){var t,n;null==e&&(e=new f),!z.dt(i)||i==r.NO_SESSION_KEY||null!=(t=u.d.vt(i))&&(n=e.custom[ht.Constants.APPLICATION_VERSION],(null==e.applicationName||null==e.viewerId||void 0===n&&null==n)&&null!=t.Et&&null!=t.Et.pt&&(null==e.viewerId&&null!=t.Et.pt.viewerId&&(e.viewerId=t.Et.pt.viewerId),null==e.applicationName&&null!=t.Et.pt.applicationName&&(e.applicationName=t.Et.pt.applicationName),void 0!==n||null!=n||void 0!==(n=t.Et.pt.custom[ht.Constants.APPLICATION_VERSION])&&n&&(e.custom[ht.Constants.APPLICATION_VERSION]=n)),e.custom["c3.csid"]=z.gt(t.y)),l=u.d.ht(e,j.ft.At,s)}):u.c.error("createAdSession(): expecting an instance of ContentMetadata for adMetadata parameter")),l},this.reportError=function(n,i,e){this.C||(z.St(i)?e===ht.Client.ErrorSeverity.FATAL||e===ht.Client.ErrorSeverity.WARNING?this.S.P("Client.reportError",function(){var t=u.d.vt(n);null!=t&&t.Rt(i,e)}):this.c.error("reportError(): invalid error severity: "+e):this.c.error("reportError(): invalid error message string: "+i))},this.updateContentMetadata=function(i,e){this.C||(e instanceof f?this.S.P("Client.updateContentMetadata",function(){var t,n=u.d.vt(i);null!=n&&(t=e.tt(),n.yt(t))}):u.c.error("updateContentMetadata(): expecting an instance of ContentMetadata for contentMetadata parameter"))},this.detachPlayer=function(n){this.C||this.S.P("Client.detachPlayer",function(){var t=u.d.vt(n);null!=t&&t.Ct()})},this.mt=function(n){this.C||this.S.P("Client.offFocus",function(){var t=u.d.vt(n);null!=t&&t.mt()})},this.attachPlayer=function(n,i){this.C||(i instanceof R?this.S.P("Client.attachPlayer",function(){var t=u.d.vt(n);null!=t&&t.Tt(i)}):u.c.error("attachPlayer(): expecting an instance of PlayerStateManager for playerStateManager parameter"))},this.It=function(n){this.C||this.S.P("Client.onFocus",function(){var t=u.d.vt(n);null!=t&&t.It()})},this.contentPreload=function(n){this.C||this.S.P("Client.contentPreload",function(){var t=u.d.vt(n);null!=t&&t.Nt()})},this.contentStart=function(n){this.C||this.S.P("Client.contentStart",function(){var t=u.d.vt(n);null!=t&&t.wt()})},this.sendCustomEvent=function(i,e,s){this.C||(z.St(e)?(z._t(s)<=0&&u.c.warning("eventAttributes(): should have proper data."),this.S.P("Client.sendCustomEvent",function(){i==r.NO_SESSION_KEY&&(u.p<0&&(n=new f,u.p=u.d.B(n,null)),i=u.p);var t=z.Ot(s),n=u.d.Pt(i);null!=n&&n.Dt(e,t)})):u.c.error("sendCustomEvent(): eventName parameter must be a valid string."))},this.adStart=function(n,i,e,s){this.C||(i===r.AdStream.CONTENT||i===r.AdStream.SEPARATE?e===r.AdPlayer.CONTENT||e===r.AdPlayer.SEPARATE?(s!==r.AdPosition.PREROLL&&s!==r.AdPosition.MIDROLL&&s!==r.AdPosition.POSTROLL&&this.c.info("adStart(): ignored, invalid value for adPosition parameter: "+s),this.S.P("Client.adStart",function(){var t=u.d.vt(n);null!=t&&t.bt(i,e,s)})):this.c.error("adStart(): ignored, invalid value for adPlayer parameter: "+e):this.c.error("adStart(): ignored, invalid value for adStream parameter: "+i))},this.adEnd=function(n){this.C||this.S.P("Client.adEnd",function(){var t=u.d.vt(n);null!=t&&t.Mt()})},this.cleanupSession=function(t){this.C||(t!==r.NO_SESSION_KEY?this.S.P("Client.cleanupSession",function(){null!=u.d.vt(t)&&u.d.Lt(t)}):this.c.warning("cleanupSession(): ignored, can't cleanup Client.NO_SESSION_KEY"))},this.getAttachedPlayer=function(n){var i=null;return this.C||(n===r.NO_SESSION_KEY?this.c.warning("getAttachedPlayer(): ignored for Client.NO_SESSION_KEY"):this.S.P("Client.getAttachedPlayer",function(){var t=u.d.vt(n);null!=t&&(i=t.Vt())})),i},this.isPlayerAttached=function(t){return!this.C&&null!==this.getAttachedPlayer(t)},this.getPlayerStateManager=function(){if(this.C)throw new Error("This instance of Conviva.Client has been released.");return new R(this.v)},this.releasePlayerStateManager=function(t){if(this.C)throw new Error("This instance of Conviva.Client has been released.");this.S.P("Client.releasePlayerStateManager",function(){t instanceof R&&t.release()})},this.kt=function(){return this.g},this.getId=function(){return this.y},this.getSessionId=function(n){if(!this.C){var i=null;return this.S.P("Client.getSessionId",function(){var t=u.d.vt(n);null!=t&&(i=t.Ut())}),i}},this.getClientId=function(n){if(!this.C){var i=null;return this.S.P("Client.getClientId",function(){var t=u.d.vt(n);null!=t&&(i=t.Ft())}),i}},this.Bt=function(n,i,e){this.C||this.S.P("Client.updateCustomMetric",function(){var t=u.d.vt(n);null!=t&&t.Bt(i,e)})},this.setUniqueIdentifier=function(t,n){if(this.C)throw new Error("This instance of Conviva.Client has been released.");if(null==t||void 0===t||"{}"==JSON.stringify(t))throw new Error("Identifiers are not set. No action taken !!");for(var i in t)this.m[i]=t[i];n&&(this.T=n)},this.setUserPreferenceForDataCollection=function(t,n){if(this.C)throw new Error("This instance of Conviva.Client has been released.");if(null==t||void 0===t||"{}"==JSON.stringify(t))throw new Error("Identifiers are not set. No action taken !!");for(var i in t)"false"==t[i]?this.I[i]=n?Y.Kt.Ht:Y.Kt.Gt:this.I[i]=Y.Kt.jt},this.setUserPreferenceForDataDeletion=function(t){if(this.C)throw new Error("This instance of Conviva.Client has been released.");if(null==t||void 0===t||"{}"==JSON.stringify(t))throw new Error("Identifiers are not set. No action taken !!");for(var n in t)"true"==t[n]?this.I[n]=Y.Kt.xt:this.I[n]=Y.Kt.jt}};r.version="4.1.2L",r.NO_SESSION_KEY=S.NO_SESSION_KEY,r.AdPosition={PREROLL:S.AdPosition.PREROLL,MIDROLL:S.AdPosition.MIDROLL,POSTROLL:S.AdPosition.POSTROLL},r.AdStream={CONTENT:S.AdPlayer.CONTENT,SEPARATE:S.AdPlayer.SEPARATE},r.AdPlayer={CONTENT:S.AdPlayer.CONTENT,SEPARATE:S.AdPlayer.SEPARATE},r.ErrorSeverity={FATAL:S.ErrorSeverity.FATAL,WARNING:S.ErrorSeverity.WARNING},r.DeviceType={DESKTOP:S.DeviceType.DESKTOP,CONSOLE:S.DeviceType.CONSOLE,SETTOP:S.DeviceType.SETTOP,MOBILE:S.DeviceType.MOBILE,TABLET:S.DeviceType.TABLET,SMARTTV:S.DeviceType.SMARTTV},r.AdTechnology={CLIENT_SIDE:S.AdType.CLIENT_SIDE,SERVER_SIDE:S.AdType.SERVER_SIDE},r.AdType={BLACKOUT_SLATE:S.AdSlates.BLACKOUT_SLATE,TECHNICAL_DIFFICULTIES_SLATE:S.AdSlates.TECHNICAL_DIFFICULTIES_SLATE,COMMERCIAL_SLATE:S.AdSlates.COMMERCIAL_SLATE,OTHER_SLATE:S.AdSlates.OTHER_SLATE,VPAID:S.AdSlates.VPAID,REGULAR:S.AdSlates.REGULAR},r.AdServingType={INLINE:S.AdServingType.INLINE,WRAPPER:S.AdServingType.WRAPPER},r.DeviceCategory={ANDROID_DEVICE:S.DeviceCategory.ANDROID_DEVICE,APPLE_DEVICE:S.DeviceCategory.APPLE_DEVICE,CHROMECAST:S.DeviceCategory.CHROMECAST,DESKTOP_APP:S.DeviceCategory.DESKTOP_APP,DEVICE_SIMULATOR:S.DeviceCategory.DEVICE_SIMULATOR,LG_TV:S.DeviceCategory.LG_TV,NINTENDO:S.DeviceCategory.NINTENDO,PLAYSTATION:S.DeviceCategory.PLAYSTATION,ROKU:S.DeviceCategory.ROKU,SAMSUNG_TV:S.DeviceCategory.SAMSUNG_TV,SMART_TV:S.DeviceCategory.SMART_TV,SET_TOP_BOX:S.DeviceCategory.SET_TOP_BOX,TIVO:S.DeviceCategory.TIVO,WEB:S.DeviceCategory.WEB,WINDOWS_DEVICE:S.DeviceCategory.WINDOWS_DEVICE,XBOX:S.DeviceCategory.XBOX,KAIOS_DEVICE:S.DeviceCategory.KAIOS_DEVICE};var a=ht.ClientSettings=function(t){var i=this;this.Wt=null,z.qt(this,"customerKey",function(){return this.Wt}),z.Yt(this,"customerKey",function(t){z.St(t)&&(this.Wt=t)}),this.Jt=a.Qt,z.qt(this,"heartbeatInterval",function(){return this.Jt}),z.Yt(this,"heartbeatInterval",function(t){var n;"number"!=typeof t||(n=z.Xt(t))===t&&(this.Jt=n)}),this.zt=null,this.L=null,this.H=null,z.qt(this,"gatewayUrl",function(){return this.zt}),z.Yt(this,"gatewayUrl",function(t){var n;z.St(t)&&("https"!=(n=t.split("://"))[0]&&"http"!=n[0]||-1!==t.indexOf(".com",t.length-".com".length)&&(this.zt=t))}),function(t){if(!z.St(t))throw new Error("customerKey must be valid");this.customerKey=t}.apply(this,arguments),this.equals=function(t){return this.customerKey===t.customerKey&&this.gatewayUrl===t.gatewayUrl&&this.heartbeatInterval===t.heartbeatInterval},this.tt=function(){var t=new a(this.customerKey);return t.gatewayUrl=function(t){if(z.St(t)){var n=t.split("://");if(-1==n[1].indexOf("cws.conviva.com")&&("https"==n[0]||"http"==n[0]))return i.L="https://"+a.U,i.H="https://"+a.G,t}return i.L="https://"+a.V,i.H="https://"+a.K,"https://"+i.customerKey+"."+a.Z}(this.gatewayUrl),t.heartbeatInterval=this.heartbeatInterval,t.L=this.L,t.H=this.H,t}};a.Zt="https://conviva.testonly.conviva.com",a.$t="https://cws.conviva.com",a.Z="cws.conviva.com",a.V="ipv4.cws.conviva.com",a.K="ipv6.cws.conviva.com",a.tn="conviva.testonly.conviva.com",a.U="ipv4.testonly.conviva.com",a.G="ipv6.testonly.conviva.com",a.z="https://",a.$="http://",a.nn=5,a.Qt=20;var f=ht.ContentMetadata=function(){this.in=null,z.qt(this,"assetName",function(){return this.in}),z.Yt(this,"assetName",function(t){if("string"!=typeof t)return;this.in=t}),this.en={},z.qt(this,"custom",function(){return this.en}),z.Yt(this,"custom",function(t){if("object"!=typeof t)return;this.en=z.Ot(t)}),this.sn=null,z.qt(this,"defaultResource",function(){return this.sn}),z.Yt(this,"defaultResource",function(t){if("string"!=typeof t)return;this.sn=t}),this.ln=null,z.qt(this,"viewerId",function(){return this.ln}),z.Yt(this,"viewerId",function(t){if("string"!=typeof t)return;this.ln=t}),this.un=null,z.qt(this,"applicationName",function(){return this.un}),z.Yt(this,"applicationName",function(t){if("string"!=typeof t)return;this.un=t}),this.on=null,z.qt(this,"streamUrl",function(){return this.on}),z.Yt(this,"streamUrl",function(t){if("string"!=typeof t)return;this.on=t}),this.rn=f.StreamType.UNKNOWN,z.qt(this,"streamType",function(){return this.rn}),z.Yt(this,"streamType",function(t){t!==f.StreamType.UNKNOWN&&t!==f.StreamType.VOD&&t!==f.StreamType.LIVE||(this.rn=t)}),this.an=-1,z.qt(this,"duration",function(){return this.an}),z.Yt(this,"duration",function(t){this.an=nt.hn(t)}),this.cn=-1,z.qt(this,"encodedFrameRate",function(){return this.cn}),z.Yt(this,"encodedFrameRate",function(t){this.cn=nt.hn(t)}),function(){}.apply(this,arguments),this.tt=function(){var t,n=new f;for(t in n.assetName=this.assetName,n.applicationName=this.applicationName,n.streamUrl=this.streamUrl,n.viewerId=this.viewerId,n.defaultResource=this.defaultResource,n.streamType=this.streamType,n.duration=this.duration,n.encodedFrameRate=this.encodedFrameRate,this.custom)n.custom[t]=this.custom[t];return n}};f.StreamType={UNKNOWN:S.StreamType.UNKNOWN,LIVE:S.StreamType.LIVE,VOD:S.StreamType.VOD},ht.ErrorType={ERROR_UNKNOWN:S.ErrorType.ERROR_UNKNOWN,ERROR_IO:S.ErrorType.ERROR_IO,ERROR_TIMEOUT:S.ErrorType.ERROR_TIMEOUT,ERROR_NULL_ASSET:S.ErrorType.ERROR_NULL_ASSET,ERROR_MISSING_PARAMETER:S.ErrorType.ERROR_MISSING_PARAMETER,ERROR_NO_AD_AVAILABLE:S.ErrorType.ERROR_NO_AD_AVAILABLE,ERROR_PARSE:S.ErrorType.ERROR_PARSE,ERROR_INVALID_VALUE:S.ErrorType.ERROR_INVALID_VALUE,ERROR_INVALID_SLOT:S.ErrorType.ERROR_INVALID_SLOT,ERROR_3P_COMPONENT:S.ErrorType.ERROR_3P_COMPONENT,ERROR_UNSUPPORTED_3P_FEATURE:S.ErrorType.ERROR_UNSUPPORTED_3P_FEATURE,ERROR_DEVICE_LIMIT:S.ErrorType.ERROR_DEVICE_LIMIT,ERROR_UNMATCHED_SLOT_SIZE:S.ErrorType.ERROR_UNMATCHED_SLOT_SIZE},ht.Events={AD_REQUESTED:S.Events.AD_REQUESTED,AD_RESPONSE:S.Events.AD_RESPONSE,AD_SLOT_STARTED:S.Events.AD_SLOT_STARTED,AD_ATTEMPTED:S.Events.AD_ATTEMPTED,AD_SLOT_ENDED:S.Events.AD_SLOT_ENDED,AD_IMPRESSION_START:S.Events.AD_IMPRESSION_START,AD_START:S.Events.AD_START,AD_FIRST_QUARTILE:S.Events.AD_FIRST_QUARTILE,AD_MID_QUARTILE:S.Events.AD_MID_QUARTILE,AD_THIRD_QUARTILE:S.Events.AD_THIRD_QUARTILE,AD_COMPLETE:S.Events.AD_COMPLETE,AD_END:S.Events.AD_END,AD_IMPRESSION_END:S.Events.AD_IMPRESSION_END,AD_SKIPPED:S.Events.AD_SKIPPED,AD_ERROR:S.Events.AD_ERROR,AD_PROGRESS:S.Events.AD_PROGRESS,AD_CLOSE:S.Events.AD_CLOSE,CONTENT_PAUSED:S.Events.CONTENT_PAUSED,CONTENT_RESUMED:S.Events.CONTENT_RESUMED,POD_START:S.Events.POD_START,POD_END:S.Events.POD_END};var h=ht.SystemFactory=function(t,n){var i=this;(function(t,n){if(!(t instanceof s))throw new Error("systemInterface parameter should be an instance of SystemInterface.");this.fn=t,this.dn=this.fn.dn,this.vn=this.fn.vn,this.En=this.fn.En,this.pn=this.fn.pn,this.gn=this.fn.gn,this.An=this.fn.An,this.g=n instanceof c?n.tt():new c}).apply(this,arguments),this.nt=function(t,n,i){this.Sn=t,this.Rn=n,this.yn=i},this.release=function(){this.fn.release(),this.fn=null,this.Sn=null,this.g=null,this.Cn=null};var e=function(){return new st(i.An,i.dn,i.kt(),i.Cn,i.Sn)};this.buildLogger=function(){return e()},this.ot=function(t,n,i){return new W(t,n,i,this)},this.mn=function(){return new $(this.buildLogger(),this.Tn(),this.Rn,this.yn)},this.In=function(){return new q(this.buildTimer())},this.Nn=function(){var t=new Q(this.buildLogger(),null,this.kt()),t=new rt(this.buildLogger(),this.vn,t);return new q(t)},this.Tn=function(){return new et(this.buildLogger(),this.En,this.Nn(),this.kt())},this.it=function(){return new Q(this.buildLogger(),this.mn(),this.kt())},this.buildTime=function(){return new ot(this.dn,this.buildLogger())},this.buildTimer=function(){return new rt(this.buildLogger(),this.vn,this.it())},this.wn=function(){return new lt(this.buildLogger(),this.pn,this.In(),this.kt())},this.lt=function(){return new Y(this.buildLogger(),this.wn(),this._n())},this.On=function(){return new ut(this.buildLogger(),this.gn,this.it())},this.Pn=function(){return new H},this.Dn=function(t,n){return new X(t,this.buildLogger(),this.Tn(),this._n(),n)},this.bn=function(t,n,i,e){var s=this.Dn(n,e.custom["c3.domain"]);return new j(this.Mn(),t,n,this.buildLogger(),this.it(),this.buildTimer(),s,this.Pn(),this.buildTime(),this.Ln(),i,e)},this.Vn=function(t,n,i,e,s,l){var u=this.it(),o=this.buildLogger(),n=n.tt(),l=this.bn(t,n,i,l);return new x(e,s,i,this.On(),l,u,o)},this.Mn=function(){return new J},this._n=function(){return new K},this.Ln=function(){return this.Cn},this.kt=function(){return this.g},this.Cn=new Z},c=ht.SystemSettings=function(){this.kn=c.Un,z.qt(this,"logLevel",function(){return this.kn}),z.Yt(this,"logLevel",function(t){var n;"number"!=typeof t||(n=z.Xt(t))===t&&n>=c.LogLevel.DEBUG&&n<=c.LogLevel.ERROR&&(this.kn=n)}),this.Fn=c.Bn,z.qt(this,"allowUncaughtExceptions",function(){return this.Fn}),z.Yt(this,"allowUncaughtExceptions",function(t){z.Hn(t)&&(this.Fn=t)}),this.Kn=c.Gn,z.qt(this,"storageTimeout",function(){return this.Kn}),z.Yt(this,"storageTimeout",function(t){var n;"number"!=typeof t||(n=z.Xt(t))===t&&(this.Kn=n)}),this.jn=c.xn,z.qt(this,"httpTimeout",function(){return this.jn}),z.Yt(this,"httpTimeout",function(t){var n;"number"!=typeof t||(n=z.Xt(t))===t&&(this.jn=n)}),function(){}.apply(this,arguments),this.equals=function(t){return this.logLevel===t.logLevel&&this.allowUncaughtExceptions===t.allowUncaughtExceptions&&this.storageTimeout===t.storageTimeout&&this.httpTimeout===t.httpTimeout},this.tt=function(){var t=new c;return t.logLevel=this.logLevel,t.allowUncaughtExceptions=this.allowUncaughtExceptions,t.storageTimeout=this.storageTimeout,t.httpTimeout=this.httpTimeout,t}};c.LogLevel={DEBUG:S.LogLevel.DEBUG,INFO:S.LogLevel.INFO,WARNING:S.LogLevel.WARNING,ERROR:S.LogLevel.ERROR,NONE:S.LogLevel.NONE},c.Wn=c.LogLevel.DEBUG,c.Un=c.LogLevel.NONE,c.qn=!0,c.Bn=!1,c.Gn=10,c.xn=10;var R=ht.PlayerStateManager=function(t){var e=this;e.Yn=null,e.Jn=-2,e.Qn=R.PlayerState.UNKNOWN,e.Xn={},e.zn=-2,e.cn=-2,e.an=-2,e.Zn=null,e.$n=null,e.on=null,e.ti=null,e.ni=null,e.ii=-1,e.ei=-1,e.N=null,e.w=null,e.si=null,e.li=[],e.C=!1,this.release=function(){e.C||e.S.P("PlayerStateManager.release",function(){null!=e.Yn&&e.Yn.ui(),e.oi(),e.v=null,e.c=null,e.S=null,e.C=!0})},this.setPlayheadTime=function(t){},this.setBufferLength=function(t){},this.setRenderedFrameRate=function(t){},this.getEncodedFrameRate=function(){return e.cn},this.setEncodedFrameRate=function(n){e.C||e.S.P("PlayerStateManager.setEncodedFrameRate",function(){var t=nt.hn(n);-1<=t&&(e.cn=t,null!=e.Yn&&e.Yn.ri(e.cn))})},this.getDuration=function(){return e.an},this.setClientMeasureInterface=function(t){z.ai(t,new ht.ClientMeasureInterface,"ClientMeasureInterface"),this.hi=t},this.getPHT=function(){return this.hi&&"function"==typeof this.hi.getPHT?this.hi.getPHT():R.DEFAULT_PHT},this.getBufferLength=function(){return this.hi&&"function"==typeof this.hi.getBufferLength?this.hi.getBufferLength():R.DEFAULT_BUFFER_LENGTH},this.getSignalStrength=function(){return this.hi&&"function"==typeof this.hi.getSignalStrength?this.hi.getSignalStrength():R.DEFAULT_SIGNAL_STRENGTH},this.getRenderedFrameRate=function(){return this.hi&&"function"==typeof this.hi.getRenderedFrameRate?this.hi.getRenderedFrameRate():R.DEFAULT_RENDERED_FRAME_RATE},this.setDuration=function(n){e.C||e.S.P("PlayerStateManager.setDuration",function(){var t=nt.hn(n);-1<=t&&(e.an=t,null!=e.Yn&&e.Yn.ci(e.an))})},this.getStreamUrl=function(){return e.on},this.setStreamUrl=function(t){e.C||e.S.P("PlayerStateManager.setStreamUrl",function(){null!=t&&(e.on=t,null!=e.Yn&&e.Yn.fi(e.on))})},this.di=function(){return e.ti},this.vi=function(){return e.ni},this.setModuleNameAndVersion=function(t,n){e.ti=t,e.ni=n},this.Ei=function(){return e.$n},this.setPlayerType=function(t){e.C||e.S.P("PlayerStateManager.setPlayerType",function(){e.$n=t,null!=e.Yn&&e.Yn.pi(e.$n)})},this.gi=function(){return e.Zn},this.setPlayerVersion=function(t){e.C||e.S.P("PlayerStateManager.setPlayerVersion",function(){e.Zn=t,null!=e.Yn&&e.Yn.Ai(e.Zn)})},this.setMonitoringNotifier=function(t,n){if(!e.C)return null==e.Yn&&(e.Yn=t,e.c&&e.c.Si(n),!0)},this.oi=function(){e.C||(e.Yn=null,e.c&&e.c.Si(null))},this.Ri=function(){e.setPlayerState(e.getPlayerState()),e.setBitrateKbps(e.yi()),e.setDuration(e.getDuration()),e.setEncodedFrameRate(e.getEncodedFrameRate()),e.setStreamUrl(e.getStreamUrl()),e.setPlayerType(e.Ei()),e.setPlayerVersion(e.gi());for(var t=0;t<e.li.length;t++){var n=e.li[t];e.Ci(n)}e.li=[]},this.getPlayerState=function(){return e.Qn},this.setPlayerState=function(t){e.C||e.S.P("PlayerStateManager.setPlayerState",function(){R.mi(t)?(e.Qn=t,null!=e.Yn&&e.Yn.Ti(e.Qn)):e.c.error("PlayerStateManager.SetPlayerState(): invalid state: "+t)})},this.yi=function(){return e.Jn},this.setBitrateKbps=function(n){e.C||e.S.P("PlayerStateManager.setBitrateKbps",function(){var t=nt.hn(n);-1<=t&&(e.Jn=t,null!=e.Yn&&e.Yn.Ii(e.Jn))})},this.setPlayerSeekStart=function(t){e.C||e.S.P("PlayerStateManager.setPlayerSeekStart()",function(){null!=e.Yn&&e.Yn.Ni(R.SEEK_ACTIONS_TYPE.SEEK_START,t)})},this.setPlayerSeekEnd=function(){e.C||e.S.P("PlayerStateManager.setPlayerSeekEnd()",function(){null!=e.Yn&&e.Yn.Ni(R.SEEK_ACTIONS_TYPE.SEEK_END,-1)})},this.setUserSeekButtonUp=function(){e.C||e.S.P("PlayerStateManager.setUserSeekButtonUp()",function(){null!=e.Yn&&e.Yn.Ni(R.SEEK_ACTIONS_TYPE.BUTTON_UP,-1)})},this.setUserSeekButtonDown=function(){e.C||e.S.P("PlayerStateManager.setUserSeekButtonDown()",function(){null!=e.Yn&&e.Yn.Ni(R.SEEK_ACTIONS_TYPE.BUTTON_DOWN,-1)})},this.setVideoResolutionWidth=function(n){e.C||e.S.P("PlayerStateManager.setVideoResolutionWidth()",function(){var t=nt.hn(n);0<t&&(e.ii=t),null!=e.Yn&&e.Yn.wi(e.ii)})},this.setVideoResolutionHeight=function(n){e.C||e.S.P("PlayerStateManager.setVideoResolutionHeight()",function(){var t=nt.hn(n);0<t&&(e.ei=t),null!=e.Yn&&e.Yn._i(e.ei)})},this.setConnectionType=function(t){e.C||e.S.P("PlayerStateManager.setConnectionType()",function(){e.N=t,null!=e.Yn&&e.Yn.Y(e.N)})},this.setLinkEncryption=function(t){e.C||e.S.P("PlayerStateManager.setLinkEncryption()",function(){e.w=t,null!=e.Yn&&e.Yn.Q(e.w)})},this.setSignalStrength=function(t){},this.Ci=function(t){var n,i;e.si=t,null!=e.Yn?(n=t.errorCode,i=t.severity,e.Yn.Oi(n,i)):e.li.push(t)},this.sendError=function(n,i){e.C||e.S.P("PlayerStateManager.sendError",function(){var t=new at.StreamerError(n,i);e.Ci(t)})},this.reset=function(){e.C||e.S.P("PlayerStateManager.reset",function(){e.Jn=-2,e.Qn=R.PlayerState.UNKNOWN,e.Xn={},e.zn=-1,e.cn=-1,e.an=-1,e.Zn=null,e.$n=null,e.on=null,e.si=null,e.li=[]})},this.setCDNServerIP=function(t){e.C||e.S.P("PlayerStateManager.setCDNServerIP",function(){null!=e.Yn&&e.Yn.Pi(t)})},this.Di=function(){return e.bi},this.setDroppedFramesTotal=function(t){e.C||e.S.P("PlayerStateManager.setDroppedFramesTotal",function(){null!=e.Yn&&e.Yn.Mi(t)})},this.setDroppedFramesCount=function(t){e.C||e.S.P("PlayerStateManager.setDroppedFramesCount",function(){null!=e.Yn&&e.Yn.Li(t)})},this.Vi=function(){return e.si},function(t){e.v=t,e.c=e.v.buildLogger(),e.c.setModuleName("PlayerStateManager"),e.S=e.v.it()}.apply(e,arguments)};R.PlayerState={STOPPED:S.PlayerState.STOPPED,PLAYING:S.PlayerState.PLAYING,BUFFERING:S.PlayerState.BUFFERING,PAUSED:S.PlayerState.PAUSED,UNKNOWN:S.PlayerState.UNKNOWN,NOT_MONITORED:S.PlayerState.NOT_MONITORED},R.mi=function(t){return t===R.PlayerState.STOPPED||t===R.PlayerState.PLAYING||t===R.PlayerState.BUFFERING||t===R.PlayerState.PAUSED||t===R.PlayerState.UNKNOWN||t===R.PlayerState.NOT_MONITORED},R.SEEK_ACTIONS_TYPE={SEEK_START:"pss",SEEK_END:"pse",BUTTON_UP:"bu",BUTTON_DOWN:"bd"},R.DEFAULT_SIGNAL_STRENGTH=1e3,R.DEFAULT_RENDERED_FRAME_RATE=-1,R.DEFAULT_BUFFER_LENGTH=-1,R.DEFAULT_PHT=-1,ht.ClientMeasureInterface=function(){this.getPHT=function(){},this.getBufferLength=function(){},this.getSignalStrength=function(){},this.getRenderedFrameRate=function(){}};var u=ht.HttpInterface=function(){this.makeRequest=function(t,n,i,e,s,l){},this.release=function(){}},o=ht.LoggingInterface=function(){this.consoleLog=function(t,n){},this.release=function(){}},d=ht.MetadataInterface=function(){this.getBrowserName=function(){},this.getBrowserVersion=function(){},this.getDeviceBrand=function(){},this.getDeviceManufacturer=function(){},this.getDeviceModel=function(){},this.getDeviceType=function(){},this.getDeviceVersion=function(){},this.getFrameworkName=function(){},this.getFrameworkVersion=function(){},this.getOperatingSystemName=function(){},this.getOperatingSystemVersion=function(){},this.getDeviceCategory=function(){},this.getScreenWidth=function(){},this.getScreenHeight=function(){},this.getScaleFactor=function(){},this.release=function(){}},v=ht.StorageInterface=function(){this.saveData=function(t,n,i,e){},this.loadData=function(t,n,i){},this.release=function(){}},s=ht.SystemInterface=function(t,n,i,e,s,l){(function(t,n,i,e,s,l){z.ai(t,new E,"TimeInterface"),z.ai(n,new p,"TimerInterface"),z.ai(i,new u,"HttpInterface"),z.ai(e,new v,"StorageInterface"),z.ai(s,new d,"MetadataInterface"),z.ai(l,new o,"LoggingInterface"),this.dn=t,this.vn=n,this.En=i,this.pn=e,this.gn=s,this.An=l}).apply(this,arguments),this.release=function(){null!=this.dn&&(this.dn.release(),this.dn=null),null!=this.vn&&(this.vn.release(),this.vn=null),null!=this.En&&(this.En.release(),this.En=null),null!=this.pn&&(this.pn.release(),this.pn=null),null!=this.gn&&(this.gn.release(),this.gn=null),null!=this.An&&(this.An.release(),this.An=null)}},E=ht.TimeInterface=function(){this.getEpochTimeMs=function(){},this.release=function(){}},p=ht.TimerInterface=function(){this.createTimer=function(t,n,i){},this.release=function(){}},i=at.AdAnalytics=function(){var e=this;function n(t){t=t,null==e.ki?null!=e.c&&e.c.error("AdAnalytics.onAdInitiated() : contentPlayer - "+S.e):(0<z._t(t)&&e.setAdInfo(t),e.ki.Ui()||(e.ki.Fi(e.Bi),e.ki.Hi(!0)))}e.Ki=null,e.c=null,e.v=null,e.Gi=null,e.Bi=null,e.ki=null,e.ji=null,e.xi=null,e.Wi=null,function(t,n,i){e.Ki=t,e.Wi=i,e.v=n,null!=i&&(e.Bi=i.qi()),e.Gi=n.buildTimer(),e.c=n.buildLogger(),e.c.setModuleName("AdAnalytics"),e.ki=new l(e.Ki,e.Gi),y.call(this)}.apply(this,arguments),this.setAdInfo=function(t){z._t(t)<=0?null!=e.c&&e.c.error("AdAnalytics.setAdInfo() : AD Info is not set"):(null!=e.c&&e.c.debug("AdAnalytics.setAdInfo()"),null!=e.ki&&e.ki.Yi(t))},this.setAdPlayerInfo=function(t){z._t(t)<=0?null!=e.c&&e.c.error("AdAnalytics.setAdPlayerInfo() : Ad Player Info is not set"):(null!=e.c&&e.c.debug("AdAnalytics.setAdPlayerInfo()"),null!=e.ki&&e.ki.Yi(t))},this.reportAdMetric=function(){0!=arguments.length?1==arguments.length?e.Ji(arguments[0]):2==arguments.length?e.Ji(arguments[0],arguments[1]):3==arguments.length?e.Ji(arguments[0],arguments[1],arguments[2]):4==arguments.length&&e.Ji(arguments[0],arguments[1],arguments[2],arguments[3]):null!=e.c&&e.c.error("AdAnalytics.reportAdMetric() : Need to report metric mandatory")},this.setCallback=function(t){null!=e.ki&&e.ki.Qi(t)},this.reportAdFailed=function(t,n){null!=e.ki?(0<z._t(n)&&e.setAdInfo(n),e.ki.Ui()||(e.ki.Fi(e.Bi),e.ki.Hi(!0)),null!=e.c&&e.c.debug("AdAnalytics.reportAdFailed() : "+t),e.reportAdError(t,r.ErrorSeverity.FATAL),e.reportAdEnded()):null!=e.c&&e.c.error("AdAnalytics.reportAdFailed() : "+S.e)},this.reportAdLoaded=function(t){null!=e.c&&e.c.debug("AdAnalytics.reportAdLoaded()"),n(t)},this.reportAdStarted=function(t){null!=e.c&&e.c.debug("AdAnalytics.reportAdStarted()"),n(t)},this.reportAdEnded=function(){null!=e.ki?(null!=e.c&&e.c.debug("AdAnalytics.reportAdEnded()"),e.ki.Ui()&&(e.ki.Fi(null),e.ki.Hi(!1))):null!=e.c&&e.c.error("AdAnalytics.reportAdEnded() : "+S.s)},this.reportAdError=function(t,n){null!=e.ki?(null!=e.c&&e.c.debug("AdAnalytics.reportAdError() : "+t),n=new it(t,n),e.ki.Ci(n)):null!=e.c&&e.c.error("AdAnalytics.reportAdError() : "+S.e)},this.reportAdPlayerEvent=function(t,n){if(z.St(t))if(null!=e.c&&e.c.debug("AdAnalytics.reportAdPlayerEvent()"),null!=e.ki)switch(t){case ht.Constants.Events.USER_WAIT_STARTED:case ht.Constants.Events.BUMPER_VIDEO_STARTED:e.ki.Ct();break;case ht.Constants.Events.USER_WAIT_ENDED:case ht.Constants.Events.BUMPER_VIDEO_ENDED:e.ki.Tt();break;default:e.ki.Xi(t,n)}else null!=e.c&&e.c.error("AdAnalytics.reportAdPlayerEvent() : "+S.e);else null!=e.c&&e.c.error("AdAnalytics.reportAdPlayerEvent(): eventType parameter must be a valid string.")},this.reportAdSkipped=function(){null!=e.ki?(null!=e.c&&e.c.debug("AdAnalytics.reportAdSkipped()"),e.reportAdPlayerEvent(S.Events.AD_SKIPPED),e.reportAdEnded()):null!=e.c&&e.c.error("AdAnalytics.reportAdSkipped() : "+S.e)},this.release=function(){null!=e.c&&e.c.debug("AdAnalytics.release()"),null!=e.ki&&(e.ki.Ui()&&(e.ki.Fi(null),e.ki.Hi(!1)),e.ki.Qi(null),e.ki.zi(),e.ki=null),void 0!==ht.AdProxyMonitor&&null!=e.xi&&(ht.AdProxyMonitor.release(e.xi),e.xi=null)},this.setAdListener=function(t,n){null!=t?(void 0!==n&&void 0!==n.convivaModule?ht.AdProxyMonitor=convivaModule.AdProxyMonitor:"undefined"!=typeof ConvivaModule&&(ht.AdProxyMonitor=ConvivaModule.AdProxyMonitor),void 0!==ht.AdProxyMonitor?null==t&&null!=e.xi?(ht.AdProxyMonitor.release(e.xi),e.xi=null):null!=t&&null!=e.xi?(ht.AdProxyMonitor.release(e.xi),null!=e.c&&e.c.debug("AdAnalytics.setAdListener() : Initializing ad drop-in module"),e.xi=ht.AdProxyMonitor.initConvivaDropIn(t,n,this,ht)):null!=t&&null==e.xi&&(null!=e.c&&e.c.debug("AdAnalytics.setAdListener() : Initializing ad drop-in module"),e.xi=ht.AdProxyMonitor.initConvivaDropIn(t,n,this,ht)):e.c.error("AdAnalytics.setAdListener() : Include the missing Ads SDK Module")):e.c.error("AdAnalytics.setAdListener() : Need to configure the adListener instance")},this.reportAdBreakStarted=function(t,n,i){null!=e.Bi?(null!=e.c&&e.c.debug("AdAnalytics.reportAdBreakStarted()"),e.Zi=t,e.ji=n,e.Bi.$i(t,n,i)):e.c.error("AdAnalytics.reportAdBreakStarted() : "+S.e)},this.reportAdBreakEnded=function(){null!=e.Bi?(null!=e.c&&e.c.debug("AdAnalytics.reportAdBreakEnded()"),e.Zi=null,e.ji=null,e.Bi.te()):e.c.error("AdAnalytics.reportAdBreakEnded() : "+S.e)},this.getSessionId=function(){if(null!=e.Bi)return null!=e.c&&e.c.debug("VideoAnalytics.getSessionId()"),e.ki.Ut();e.c.error("VideoAnalytics.getSessionId() : "+S.e)},this.getClientId=function(){if(null!=e.Bi)return null!=e.c&&e.c.debug("VideoAnalytics.getClientId()"),e.ki.Ft();e.c.error("VideoAnalytics.getClientId() : "+S.e)},this.getAdType=function(){return null!=e.Bi?e.Bi.Zi:null},this.ne=function(){return null!=e.Bi?e.Bi.ji:null},i.prototype=Object.create(y.prototype),i.prototype.constructor=i},l=at.AdPlayerMonitorImpl=function(){var i=this;i.ie=null,i.ee=null,function(t,n){A.call(this,t,n)}.apply(this,arguments),this.Fi=function(t){this.se()!=t&&(this.le(),i.ee=null==t?null:t)},this.se=function(){return i.ee},this.ue=function(){var t,n=this.se();null!=i.ie&&(i.oe=i.ie.getPlayerStateManager(),i.re(),i.oe.setClientMeasureInterface(this),(t=null)!=n&&(t=n.ae()),i.he=i.ie.createAdSession(t,i.pt,i.oe))},l.prototype=Object.create(A.prototype),l.prototype.constructor=l},g=ht.Analytics={init:function(t,n,i){if(null==this.Ki||null==this.Ki){if(arguments.length<=0)throw new Error("customerKey must be valid");var e=null,s=null,l=null;if("string"==typeof t&&(e=t,!z.St(e)))throw new Error("customerKey must be valid");2<=arguments.length&&"object"==typeof n&&(s=n),3<=arguments.length&&"object"==typeof i&&(l=i);var u=new a(e),o=new c;0<z._t(l)&&(null!=l[S.GATEWAY_URL]&&(u.gatewayUrl=l[S.GATEWAY_URL]),null!=l[S.LOG_LEVEL]&&(o.logLevel=l[S.LOG_LEVEL]));t=new ht.Impl.Html5Logging,n=new ht.Impl.Html5Storage,i=new ht.Impl.Html5Http,e=new ht.Impl.Html5Timer,l=new ht.Impl.Html5Time;null!=this.gn&&null!=this.gn||(this.gn=new ht.Impl.Html5Metadata),null!=s&&null!=s&&(null!=s[ht.Constants.CallbackFunctions.CONSOLE_LOG]&&(t.consoleLog=s[ht.Constants.CallbackFunctions.CONSOLE_LOG]),null!=s[ht.Constants.CallbackFunctions.MAKE_REQUEST]&&(i.makeRequest=s[ht.Constants.CallbackFunctions.MAKE_REQUEST]),null!=s[ht.Constants.CallbackFunctions.SAVE_DATA]&&(n.saveData=s[ht.Constants.CallbackFunctions.SAVE_DATA]),null!=s[ht.Constants.CallbackFunctions.LOAD_DATA]&&(n.loadData=s[ht.Constants.CallbackFunctions.LOAD_DATA]),null!=s[ht.Constants.CallbackFunctions.GET_EPOCH_TIME_IN_MS]&&(l.getEpochTimeMs=s[ht.Constants.CallbackFunctions.GET_EPOCH_TIME_IN_MS]),null!=s[ht.Constants.CallbackFunctions.CREATE_TIMER]&&(e.createTimer=s[ht.Constants.CallbackFunctions.CREATE_TIMER])),this.fn=new ht.SystemInterface(l,e,i,n,this.gn,t),this.v=new h(this.fn,o),this.v.nt("Analytics",u),this.Ki=new r(u,this.v,this.ce,g.version),this.c=this.v.buildLogger(),this.c.setModuleName("Analytics")}else this.c.error("Client is already configured")},release:function(){var t=0;if(null!=this.fe&&null!=this.fe){for(t=0;t<this.fe.length;t++){var n=this.fe[t];null!=n&&(n.release(),n.c=null,n.Gi=null,this.fe.splice(t,1),t--)}this.fe=null}if(null!=this.de&&null!=this.de){for(t=0;t<this.de.length;t++){var i=this.de[t];null!=i&&(i.release(),i.c=null,i.Gi=null,this.de.splice(t,1),t--)}this.de=null}null!=this.v&&null!=this.v&&(this.v.release(),this.v=null),null!=this.Ki&&null!=this.Ki&&(this.Ki.release(),this.Ki=null),this.Ki=null,this.c=null,this.fn=null,this.gn=null,this.ce=null},setUniqueIdentifier:function(t,n){if(null==this.Ki||null==this.Ki)throw new Error(S.i);this.Ki.setUniqueIdentifier(t,n)},setUserPreferenceForDataCollection:function(t,n){if(null==this.Ki||null==this.Ki)throw new Error(S.i);this.Ki.setUserPreferenceForDataCollection(t,n)},setUserPreferenceForDataDeletion:function(t){if(null==this.Ki||null==this.Ki)throw new Error(S.i);this.Ki.setUserPreferenceForDataDeletion(t)},reportAppEvent:function(t,n){if(null==this.Ki||null==this.Ki)throw new Error(S.i);this.Ki.sendCustomEvent(r.NO_SESSION_KEY,t,n)},reportAppBackgrounded:function(){if(null==this.Ki||null==this.Ki)throw new Error(S.i);this.Ki.sendCustomEvent(r.NO_SESSION_KEY,"App.Backgrounded",null)},reportAppForegrounded:function(){if(null==this.Ki||null==this.Ki)throw new Error(S.i);this.Ki.sendCustomEvent(r.NO_SESSION_KEY,"App.Foregrounded",null)},configureExistingClient:function(t){if(!(t instanceof r))throw new Error(S.i);this.Ki=t,this.v=this.Ki.v,this.c=this.v.buildLogger(),this.c.setModuleName("Analytics")},buildVideoAnalytics:function(){if(null==this.Ki||null==this.Ki)throw new Error(S.i);var t=new n(this.Ki,this.v);return null!=this.de&&null!=this.de||(this.de=[]),this.de.push(t),t},buildAdAnalytics:function(t){if(null==this.Ki||null==this.Ki)throw new Error(S.i);t=new i(this.Ki,this.v,null!=t&&null!=t?t:null);return null!=this.fe&&null!=this.fe||(this.fe=[]),this.fe.push(t),t},setDeviceMetadata:function(t){var n,i,e;arguments.length<=0||0==z._t(t)?this.c.error("Device Metadata must be valid"):(null!=this.gn&&null!=this.gn||(this.gn=new ht.Impl.Html5Metadata),null!=t[ht.Constants.DeviceMetadata.BRAND]&&(this.gn.getDeviceBrand=function(){return t[ht.Constants.DeviceMetadata.BRAND]}),null!=t[ht.Constants.DeviceMetadata.MANUFACTURER]&&(this.gn.getDeviceManufacturer=function(){return t[ht.Constants.DeviceMetadata.MANUFACTURER]}),null!=t[ht.Constants.DeviceMetadata.MODEL]&&(this.gn.getDeviceModel=function(){return t[ht.Constants.DeviceMetadata.MODEL]}),null!=t[ht.Constants.DeviceMetadata.TYPE]&&(this.gn.getDeviceType=function(){return t[ht.Constants.DeviceMetadata.TYPE]}),null!=t[ht.Constants.DeviceMetadata.VERSION]&&(this.gn.getDeviceVersion=function(){return t[ht.Constants.DeviceMetadata.VERSION]}),null!=t[ht.Constants.DeviceMetadata.OS_NAME]&&(this.gn.getOperatingSystemName=function(){return t[ht.Constants.DeviceMetadata.OS_NAME]}),null!=t[ht.Constants.DeviceMetadata.OS_VERSION]&&(this.gn.getOperatingSystemVersion=function(){return t[ht.Constants.DeviceMetadata.OS_VERSION]}),null!=t[ht.Constants.DeviceMetadata.CATEGORY]&&(this.gn.getDeviceCategory=function(){return t[ht.Constants.DeviceMetadata.CATEGORY]}),null==(n=t[ht.Constants.DeviceMetadata.SCREEN_RESOLUTION_WIDTH])||isNaN(n)||(this.gn.getScreenWidth=function(){return n.toString()}),null==(i=t[ht.Constants.DeviceMetadata.SCREEN_RESOLUTION_HEIGHT])||isNaN(i)||(this.gn.getScreenHeight=function(){return i.toString()}),null==(e=t[ht.Constants.DeviceMetadata.SCREEN_RESOLUTION_SCALE_FACTOR])||isNaN(e)||(this.gn.getScaleFactor=function(){return e.toString()}))},reportDeviceMetric:function(t,n){switch(null!=this.ce&&null!=this.ce||(this.ce={}),t){case ht.Constants.Network.CONNECTION_TYPE:if(!z.St(n))return void this.c.error("reportDeviceMetric() : Connection Type is not a valid string");this.ce[t]=n,this.Ki&&this.Ki.W(this.ce[ht.Constants.Network.CONNECTION_TYPE]);break;case ht.Constants.Network.LINK_ENCRYPTION:if(!z.St(n))return void this.c.error("reportDeviceMetric() : Link Encryption is not a valid string");this.ce[t]=n,this.Ki&&this.Ki.J(this.ce[ht.Constants.Network.LINK_ENCRYPTION]);break;case ht.Constants.Network.SIGNAL_STRENGTH:var i=parseInt(n,10);if(isNaN(i))return void this.c.error("reportDeviceMetric() : Signal Strength is not a number");if(R.DEFAULT_SIGNAL_STRENGTH===i)return void this.c.error("reportDeviceMetric() : DEFAULT_SIGNAL_STRENGTH shouldn't be reported");this.ce[t]=i,this.Ki&&this.Ki.X(i);break;default:this.c.error("reportDeviceMetric() : unknown device metric = "+t)}}};g.version="4.1.2";var y=at.AnalyticsImpl=function(){var a=this;function h(){var t=null!=a.ki,n=a.getAdType(),i=a.ne();return n==S.AdType.SERVER_SIDE&&i==S.AdPlayer.CONTENT?y.Ee.ve:n!=S.AdType.SERVER_SIDE||i!=S.AdPlayer.SEPARATE?n==S.AdType.CLIENT_SIDE&&i==S.AdPlayer.CONTENT?y.Ee.pe:n==S.AdType.CLIENT_SIDE&&i==S.AdPlayer.SEPARATE?null!=t&&t?y.Ee.pe:y.Ee.ge:t?y.Ee.pe:y.Ee.ge:void 0}function c(t,n,i){t=parseInt(t,10),n=parseInt(n,10);isNaN(t)&&isNaN(n)?a.c.error("reportPlaybackResolution() : width and height are not numbers"):(isNaN(t)&&a.c.warning("reportPlaybackResolution() : width is not a number"),isNaN(n)&&a.c.warning("reportPlaybackResolution() : height is not a number"),null==a.ki||i!=y.Ee.pe&&i!=y.Ee.ve||a.ki.Ae(t,n),null==a.Bi||i!=y.Ee.ge&&i!=y.Ee.ve||a.Bi.Ae(t,n))}function f(t,n){R.mi(t)?(null==a.ki||n!=y.Ee.pe&&n!=y.Ee.ve||a.ki.Se(t),(null!=a.Bi&&n==y.Ee.ge||n==y.Ee.ve)&&a.Bi.Se(t)):a.c.error("reportPlayerState() : Player State is not valid")}function d(t,n){t=parseInt(t,10);isNaN(t)?a.c.error("reportPlayerPlayHeadTime() : playheadtime is not a number"):(null==a.ki||n!=y.Ee.pe&&n!=y.Ee.ve||a.ki.Re(t),null==a.Bi||n!=y.Ee.ge&&n!=y.Ee.ve||a.Bi.Re(t))}function v(t,n){t=parseInt(t,10);isNaN(t)?a.c.error("reportPlayerBufferLength() : buffer length is not a number"):(null==a.ki||n!=y.Ee.pe&&n!=y.Ee.ve||a.ki.ye(t),null==a.Bi||n!=y.Ee.ge&&n!=y.Ee.ve||a.Bi.ye(t))}function E(t,n){t=parseInt(t,10);null==a.ki||n!=y.Ee.pe&&n!=y.Ee.ve||a.ki.Ce(!0,t),null==a.Bi||n!=y.Ee.ge&&n!=y.Ee.ve||a.Bi.Ce(!0,t)}function p(t){null==a.ki||t!=y.Ee.pe&&t!=y.Ee.ve||a.ki.Ce(!1,-1),null==a.Bi||t!=y.Ee.ge&&t!=y.Ee.ve||a.Bi.Ce(!1,-1)}function g(t,n){t=parseInt(t,10);isNaN(t)?a.c.error("reportPlayerBitrate() : bitrate is not a number"):(null==a.ki||n!=y.Ee.pe&&n!=y.Ee.ve||a.ki.me(t),null==a.Bi||n!=y.Ee.ge&&n!=y.Ee.ve||a.Bi.me(t))}function A(t,n){t=parseInt(t,10);isNaN(t)?a.c.error("reportPlayerRenderedFrameRate() : rendered framerate is not a number"):(null==a.ki||n!=y.Ee.pe&&n!=y.Ee.ve||a.ki.Te(t),null==a.Bi||n!=y.Ee.ge&&n!=y.Ee.ve||a.Bi.Te(t))}(function(){}).apply(this,arguments),this.Ji=function(t,n,i,e){switch(null!=a.c&&t!==ht.Constants.Playback.PLAY_HEAD_TIME&&t!==ht.Constants.Playback.BUFFER_LENGTH&&a.c.debug("reportMetric() "+t+" "+(void 0!==n&&"CONVIVA"!==n?n:"")+" "+(void 0!==i&&"CONVIVA"!==i&&i!==y.Ee.pe?i:"")+" "+(void 0!==e&&"CONVIVA"!==e&&e!==y.Ee.pe?e:"")),t){case S.Playback.BITRATE:"CONVIVA"===i?a.c.info("Bitrate change requested from the Conviva Library:"):a.c.info("Bitrate change requested from the application:"),e==y.Ee.pe?g(n,y.Ee.pe):g(n,h());break;case S.Playback.PLAY_HEAD_TIME:e==y.Ee.pe?d(n,y.Ee.pe):d(n,h());break;case S.Playback.RESOLUTION:e==y.Ee.pe?c(n,i,y.Ee.pe):c(n,i,h());break;case S.Playback.BUFFER_LENGTH:e==y.Ee.pe?v(n,y.Ee.pe):v(n,h());break;case S.Playback.PLAYER_STATE:e==y.Ee.pe?f(n,y.Ee.pe):f(n,h());break;case S.Playback.RENDERED_FRAMERATE:e==y.Ee.pe?A(n,y.Ee.pe):A(n,h());break;case S.Playback.SEEK_STARTED:2<=arguments.length&&"CONVIVA"!=n?E(n,h()):i==y.Ee.pe?E(-1,y.Ee.pe):E(-1,h());break;case S.Playback.SEEK_ENDED:i==y.Ee.pe?p(y.Ee.pe):p(h());break;case S.Playback.CDN_IP:"CONVIVA"==i?a.c.info("CDN Server IP change requested from the Conviva Library:"):a.c.info("CDN Server IP change requested from the application:"),o=n,r=h(),z.St(o)?(null==a.ki||r!=y.Ee.pe&&r!=y.Ee.ve||a.ki.Ie(o),null==a.Bi||r!=y.Ee.ge&&r!=y.Ee.ve||a.Bi.Ie(o)):a.c.error("reportCDNServerIp() : CDNServerIP is not a valid string");break;case S.Playback.DROPPED_FRAMES_TOTAL:"CONVIVA"==i?a.c.info("Dropped frames total change requested from the Conviva Library:"):a.c.info("Dropped frames total change requested from the application:"),u=n,o=h(),u=parseInt(u,10),isNaN(u)?a.c.error("reportDroppedFramesTotal() : Dropped frames total is not a number"):(null==a.ki||o!=y.Ee.pe&&o!=y.Ee.ve||a.ki.Ne(u),null==a.Bi||o!=y.Ee.ge&&o!=y.Ee.ve||a.Bi.Ne(u));break;case S.Playback.DROPPED_FRAMES_COUNT:"CONVIVA"==i?a.c.info("Dropped frames count change requested from the Conviva Library:"):a.c.info("Dropped frames count change requested from the application:"),s=n,l=h(),s=parseInt(s,10),isNaN(s)?a.c.error("reportDroppedFramesTotal() : Dropped frames total is not a number"):(null==a.ki||l!=y.Ee.pe&&l!=y.Ee.ve||a.ki.we(s),null==a.Bi||l!=y.Ee.ge&&l!=y.Ee.ve||a.Bi.we(s));break;default:u=t,l=n,s=h(),!(z.St(u)&&null!=l&&null!=l?(null==a.ki||s!=y.Ee.pe&&s!=y.Ee.ve||a.ki.Bt(u,l),void(null==a.Bi||s!=y.Ee.ge&&s!=y.Ee.ve||a.Bi.Bt(u,l))):a.c.error("reportMetric() : Metric key/value should be a proper value"))}var s,l,u,o,r}};y.Ee={pe:1,ge:2,ve:3};var e=at.PlayerMonitor=function(){var e=this;this._e=null,this.Oe=null,this.pt=null,this.Pe=null,this.Qn=ht.PlayerStateManager.PlayerState.UNKNOWN,this.De=-1,this.be=-1,this.si=null,this.Me=null,this.Le=null,this.Ve=-2,this.zn=-1,this._=ht.PlayerStateManager.DEFAULT_SIGNAL_STRENGTH,this.ke=null,this.bi=null,this.w=null,this.N=null,this.Gi=null,this.Ue=null,this.Fe=null,this.Be=null,this.He=null,this.Zi=null,this.ji=null,function(t){e.Gi=t}.apply(this,arguments),this.Ke=function(){return e.Qn},this.Se=function(t){e.Qn!=t&&(e.le(),e.Qn=t,e.Ge())},this.je=function(){return e.xe},this.We=function(){return e.qe},this.Ce=function(t,n){e.le(),e.xe=t,e.qe=n,e.Ye()},this.Je=function(){return e.De},this.Re=function(t){e.De=t},this.Qe=function(){return e.be},this.ye=function(t){e.be=t},this.Xe=function(){return e.Ve},this.me=function(t){e.Ve!=t&&(e.Ve=t,e.Ge())},this.ze=function(){return e.zn},this.Te=function(t){e.zn=t},this.Ze=function(){return e.ke},this.Ie=function(t){e.ke=t,e.Ge()},this.Di=function(){return e.bi},this.Ne=function(t){e.bi=t,e.Ge()},this.we=function(t){e.$e(t)},this.ts=function(){return e._},this.ns=function(){return e.es},this.ss=function(){return e.ls},this.Ae=function(t,n){t<0&&(t=0),n<0&&(n=0),e.es==t&&e.ls==n||(e.es=t,e.ls=n,e.Ge())},this.us=function(){return e.Oe},this.os=function(){null!=e.us()&&(e.pt=new ht.ContentMetadata,e.Pe={},e.Fe={},e.rs())},this.as=function(t){null==e.Oe&&null==t||(this.le(),null!=e.Oe&&(e.Oe=null,e.os()),null!=t&&(e.Oe=z.hs(e.Oe,t),e.os()))},this.Yi=function(t){if(null!=t)if(null!=e.pt){var n,i=!1;for(n in t)if(e.pt[n]!=t[n]){i=!0;break}i&&(e.le(),e.Oe=z.hs(t),e.rs())}else e.as(t)},this.Qi=function(t){null==t?(e.Be=null,e.cs()):e.Be!=t&&(e.Be=t,e.fs())},this.le=function(){e.ds||null!=e.Be&&(e.ds=!0,e.Be(),e.ds=!1)},this.Ui=function(){return e._e},this.Hi=function(t){e._e!=t&&(e.le(),e._e&&(e.vs(),e.cs(),e.zi()),e._e=t,e._e&&e.ue())},this.Es=function(){return e.Me},this.ps=function(){return null!=e.Le?e.Le:null},this.gs=function(){return e.si},this.Ci=function(t){this.le(),e.si=t,e.Oi()},this.Xi=function(t,n){e.le(),e.Me=t,e.Le=n,e.As()},this.Ss=function(){e.le()},this.fs=function(){e.cs(),e.Ue=e.Gi.create(e.Ss,1e3,"PlayerMonitor.update")},this.cs=function(){null!=e.Ue&&(e.Ue(),e.Ue=null)},this.$i=function(t,n,i){e.He=i,e.Rs(),e.Zi=t,e.ji=n,null!=e.Zi&&null!=e.Zi&&S.AdType.CLIENT_SIDE===e.Zi&&(e.Qn=S.PlayerState.UNKNOWN,e.ys(e.Zi,n,null==i||null==i?null:i[S.POD_POSITION]))},this.te=function(){null!=e.Zi&&S.AdType.CLIENT_SIDE===e.Zi&&(e.Cs(),e.Qn=S.PlayerState.UNKNOWN),e.ms(),e.Zi=null,e.ji=null},this.Ts=function(){return e.He},this.zi=function(){this._e=null,this.Oe=null,this.pt=null,this.Pe=null,this.Qn=ht.PlayerStateManager.PlayerState.UNKNOWN,this.De=-1,this.be=-1,this.si=null,this.Me=null,this.Le=null,this.Ve=-2,this.zn=-1,this._=ht.PlayerStateManager.DEFAULT_SIGNAL_STRENGTH,this.ke=null,this.w=null,this.N=null,this.Gi=null,this.Ue=null,this.Fe=null,this.Be=null,this.He=null,this.Zi=null,this.ji=null,e.oe=null,e.he=ht.Client.NO_SESSION_KEY}},A=at.PlayerMonitorImpl=function(){var l=this;l.ie=null,l.oe=null,l.he=ht.Client.NO_SESSION_KEY,function(t,n){e.call(this,n),l.ie=t}.apply(this,arguments),this.getPHT=function(){return l.Je()},this.getBufferLength=function(){return l.Qe()},this.getRenderedFrameRate=function(){return l.ze()},this.getSignalStrength=function(){return l.ts()},this.Ye=function(){null!=l.oe&&l.Is!=r.NO_SESSION_KEY&&(l.je()?l.oe.setPlayerSeekStart(l.We()):l.oe.setPlayerSeekEnd())},this.Ge=function(){null!=l.oe&&(l.oe.setPlayerState(l.Ke()),0<l.Xe()&&l.oe.setBitrateKbps(l.Xe()),0<l.ns()&&l.oe.setVideoResolutionWidth(l.ns()),0<l.ss()&&l.oe.setVideoResolutionHeight(l.ss()),null!=l.Ze()&&l.oe.setCDNServerIP(l.Ze()),null!=l.Di()&&l.oe.setDroppedFramesTotal(l.Di()))},this.yt=function(){l.he!=r.NO_SESSION_KEY&&null!=l.ie&&l.ie.updateContentMetadata(l.he,l.pt)},this.re=function(){var t,n,i;null!=l.oe&&null!=l.Fe&&0!=z._t(l.Fe)&&(null!=l.Fe[S.MODULE_NAME]&&null!=l.Fe[S.MODULE_VERSION]&&(t=l.Fe[S.MODULE_NAME],n=l.Fe[S.MODULE_VERSION],z.St(t)&&z.St(n)&&l.oe.setModuleNameAndVersion(t,n)),null!=l.Fe[S.FRAMEWORK_NAME]&&(i=l.Fe[S.FRAMEWORK_NAME],z.St(i)&&l.oe.setPlayerType(i)),null!=l.Fe[S.FRAMEWORK_VERSION]&&(i=l.Fe[S.FRAMEWORK_VERSION],z.St(i)&&l.oe.setPlayerVersion(i)))},this.Cs=function(){null!=l.oe&&l.he!=r.NO_SESSION_KEY&&(l.Ge(),this.Ns())},this.Tt=function(){null!=l.oe&&l.he!=r.NO_SESSION_KEY&&(l.Ge(),l.ie.It(l.he))},this.Ns=function(){null!=l.ie&&l.he!=S.NO_SESSION_KEY&&l.ie.adEnd(l.he)},this.ys=function(t,n,i){var e;null!=l.oe&&l.he!=S.NO_SESSION_KEY&&(e=null,S.AdType.CLIENT_SIDE===t?e=r.AdStream.SEPARATE:S.AdType.SERVER_SIDE===t&&(e=r.AdStream.CONTENT),l.ws(e,n,i))},this.Ct=function(){null!=l.oe&&l.he!=S.NO_SESSION_KEY&&l.ie.mt(l.he)},this.ws=function(t,n,i){null!=l.ie&&l.he!=S.NO_SESSION_KEY&&l.ie.adStart(l.he,t,n,i)},this.ue=function(){null!=l.ie&&(l.oe=l.ie.getPlayerStateManager(),l.re(),l.oe.setClientMeasureInterface(this),l.he=l.ie.createSession(l.pt,l.oe))},this.vs=function(){null!=l.ie&&(null!=l.oe&&(l.oe.setPlayerState(S.PlayerState.STOPPED),l.oe=null),l.he!=S.NO_SESSION_KEY&&(l.ie.cleanupSession(l.he),l.he=S.NO_SESSION_KEY))},this.Oi=function(){var t;null!=l.ie&&l.he!=r.NO_SESSION_KEY&&(t=l.gs(),l.ie.reportError(l.he,t._s(),t.Os()))},this.As=function(){l.he!=r.NO_SESSION_KEY&&null!=l.ie&&l.ie.sendCustomEvent(l.he,l.Es(),l.ps())},this.rs=function(){var t,n=l.us(),i=!1,e=!1;for(t in n){var s=n[t];if(z.St(t)&&null!=s)switch(t){case S.STREAM_URL:e=!0,l.pt.streamUrl=s;break;case S.ASSET_NAME:e=!0,l.pt.assetName=s;break;case S.DEFAULT_RESOURCE:e=!0,l.pt.defaultResource=s;break;case S.VIEWER_ID:e=!0,l.pt.viewerId=s;break;case S.PLAYER_NAME:e=!0,l.pt.applicationName=s;break;case S.DURATION:e=!0,l.pt.duration=s;break;case S.IS_LIVE:e=!0,l.pt.streamType=s;break;case S.ENCODED_FRAMERATE:e=!0,l.pt.encodedFrameRate=s;break;case S.MODULE_NAME:case S.MODULE_VERSION:case S.FRAMEWORK_NAME:case S.FRAMEWORK_VERSION:i=!0,l.Fe[t]=s;break;case S.APPLICATION_VERSION:default:e=!0,l.pt.custom[t]=s}}i&&this.re(),e&&this.yt()},this.Rs=function(){this.Ps(S.Events.POD_START)},this.ms=function(){this.Ps(S.Events.POD_END)},this.Ps=function(t){var n,i,e;null!=l.ie&&l.he!=S.NO_SESSION_KEY&&((n=null)!=(e=this.Ts())&&(n={},null!=(i=e[S.POD_POSITION])&&(n[S.POD_POSITION]=i),null!=(i=e[S.POD_INDEX])&&(n[S.POD_INDEX]=i+""),t!==S.Events.POD_START||null!=(e=e[S.POD_DURATION])&&(n[S.POD_DURATION]=e+"")),l.ie.sendCustomEvent(l.he,t,n))},this.$e=function(t){l.oe.setDroppedFramesCount(t)},this.Ds=function(t){this.he==S.NO_SESSION_KEY&&t!=S.NO_SESSION_KEY&&(this.he=t)},this.ae=function(){return this.he},this.Ut=function(){return l.ie.getSessionId(this.he)},this.Ft=function(t){return l.ie.getClientId(this.he)},this.Bt=function(t,n){l.ie.Bt(this.he,t,n)},A.prototype=Object.create(e.prototype),A.prototype.constructor=A},n=at.VideoAnalytics=function(){var s=this;s.Ki=null,s.c=null,s.v=null,s.Gi=null,s.Bi=null,s.xi=null,s.Zi=null,s.ji=null,this.release=function(){null!=s.c&&s.c.debug("VideoAnalytics.release()"),null!=s.Bi&&s.Bi.Ui()&&(s.Bi.Hi(!1),void 0!==ht.ProxyMonitor&&null!=s.xi&&(ht.ProxyMonitor.release(s.xi),s.xi=null)),null!=s.Bi&&(s.Bi.Qi(null),s.Bi.zi(),s.Bi=null),s.Gi=null,s.Zi=null,s.ji=null},function(t,n){s.Ki=t,s.v=n,s.Gi=n.buildTimer(),s.c=n.buildLogger(),s.c.setModuleName("VideoAnalytics"),s.Bi=new A(s.Ki,s.Gi),y.call(this)}.apply(this,arguments),this.reportPlaybackRequested=function(t){null!=s.c&&s.c.debug("VideoAnalytics.reportPlaybackRequested()"),null!=s.Bi?(0<z._t(t)&&s.setContentInfo(t),s.Bi.Ui()||s.Bi.Hi(!0)):s.c.error("VideoAnalytics.reportPlaybackRequested() : "+S.o)},this.reportPlaybackEnded=function(){null!=s.c&&s.c.debug("VideoAnalytics.reportPlaybackEnded()"),null!=s.Bi?s.Bi.Ui()&&(s.Bi.Hi(!1),void 0!==ht.ProxyMonitor&&null!=s.xi&&(ht.ProxyMonitor.release(s.xi),s.xi=null),s.Bi.Qi(null)):s.c.error("VideoAnalytics.reportPlaybackEnded() : "+S.o)},this.reportPlaybackFailed=function(t,n){null!=s.Bi?(0<z._t(n)&&s.setContentInfo(n),s.Bi.Ui()||s.Bi.Hi(!0),null!=s.c&&s.c.debug("VideoAnalytics.reportPlaybackFailed()"),s.reportPlaybackError(t,r.ErrorSeverity.FATAL),s.reportPlaybackEnded()):s.c.error("VideoAnalytics.reportPlaybackFailed() : "+S.e)},this.setContentInfo=function(t){z._t(t)<=0?s.c.error("VideoAnalytics.setContentInfo() : Content Info is not set"):null!=s.Bi?(null!=s.c&&s.c.debug("VideoAnalytics.setContentInfo()"),s.Bi.Yi(t)):s.c.error("VideoAnalytics.setContentInfo() : "+S.e)},this.setPlayerInfo=function(t){z._t(t)<=0?s.c.error("VideoAnalytics.setPlayerInfo() : Player Info is not set"):null!=s.Bi?(null!=s.c&&s.c.debug("VideoAnalytics.setPlayerInfo()"),s.Bi.Yi(t)):s.c.error("VideoAnalytics.setPlayerInfo() : "+S.e)},this.reportPlaybackMetric=function(){0!=arguments.length?1==arguments.length?s.Ji(arguments[0]):2==arguments.length?s.Ji(arguments[0],arguments[1]):3==arguments.length?s.Ji(arguments[0],arguments[1],arguments[2]):4==arguments.length&&s.Ji(arguments[0],arguments[1],arguments[2],arguments[3]):s.c.error("VideoAnalytics.reportPlaybackMetric() : Need to report metric mandatory")},this.reportPlaybackError=function(t,n){null!=s.Bi?z.St(t)?(null!=s.c&&s.c.debug("VideoAnalytics.reportPlaybackError()"),n=new it(t,n),s.Bi.Ci(n)):s.c.error("VideoAnalytics.reportPlaybackError() : errorMessage need to be valid string"):s.c.error("VideoAnalytics.reportPlaybackError() : "+S.e)},this.reportPlaybackEvent=function(t,n){if(z.St(t))if(null!=s.Bi){if(null!=s.c&&s.c.debug("VideoAnalytics.reportPlaybackEvent()"),null!=s.Bi)switch(t){case ht.Constants.Events.USER_WAIT_STARTED:case ht.Constants.Events.BUMPER_VIDEO_STARTED:s.Bi.Ct();break;case ht.Constants.Events.USER_WAIT_ENDED:case ht.Constants.Events.BUMPER_VIDEO_ENDED:s.Bi.Tt();break;default:s.Bi.Xi(t,n)}}else s.c.error("VideoAnalytics.reportPlaybackEvent() : "+S.e);else s.c.error("VideoAnalytics.reportPlaybackEvent(): eventType parameter must be a valid string.")},this.setCallback=function(t){null!=s.c&&s.c.debug("setCallback()"),null!=s.Bi&&s.Bi.Qi(t)},this.reportAdBreakStarted=function(t,n,i){null!=s.Bi?(null!=s.c&&s.c.debug("VideoAnalytics.reportAdBreakStarted()"),s.Zi=t,s.ji=n,s.Bi.$i(t,n,i)):s.c.error("VideoAnalytics.reportAdBreakStarted() : "+S.e)},this.reportAdBreakEnded=function(){null!=s.Bi?(s.Zi=null,(s.ji=null)!=s.c&&s.c.debug("VideoAnalytics.VideoAnalytics.reportAdBreakEnded()"),s.Bi.te()):s.c.error("VideoAnalytics.reportAdBreakEnded() : "+S.e)},this.setPlayer=function(t,n){var i,e;void 0!==t?(n&&(i=n[ht.Constants.CONVIVA_MODULE],e=n[ht.Constants.MEDIA_ELEMENT]),void 0!==i?ht.ProxyMonitor=i.ProxyMonitor:"undefined"!=typeof ConvivaModule&&(ht.ProxyMonitor=ConvivaModule.ProxyMonitor),void 0!==ht.ProxyMonitor?(null!=s.c&&s.c.debug("VideoAnalytics.setPlayer()"),null==t&&null!=s.xi?(ht.ProxyMonitor.release(s.xi),s.xi=null):null!=t?(null!=s.xi&&ht.ProxyMonitor.release(s.xi),null!=s.c&&s.c.debug("VideoAnalytics.setPlayer() : Initializing drop-in module"),s.xi=void 0!==e?ht.ProxyMonitor.initConvivaDropIn(t,e,s.v,this,ht):ht.ProxyMonitor.initConvivaDropIn(t,s.v,this,ht)):null==t&&void 0!==e&&(s.xi=ht.ProxyMonitor.initConvivaDropIn(t,e,s.v,this,ht))):s.c.error("VideoAnalytics.setPlayer() : Include the missing Player Module")):s.c.error("VideoAnalytics.setPlayer() : Need to configure the Player")},this.configureExistingSession=function(t){t!=S.NO_SESSION_KEY?null!=s.Bi?(null!=s.c&&s.c.debug("VideoAnalytics.configureExistingSession()"),s.Bi.Ds(t)):s.c.error("VideoAnalytics.configureExistingSession() : "+S.e):s.c.error("VideoAnalytics.configureExistingSession() : Invalid Session Key")},this.getSessionId=function(){if(null!=s.Bi)return null!=s.c&&s.c.debug("VideoAnalytics.getSessionId()"),s.Bi.Ut();s.c.error("VideoAnalytics.getSessionId() : "+S.e)},this.getClientId=function(){if(null!=s.Bi)return null!=s.c&&s.c.debug("VideoAnalytics.getClientId()"),s.Bi.Ft();s.c.error("VideoAnalytics.getClientId() : "+S.e)},this.qi=function(){return null!=s.c&&s.c.debug("VideoAnalytics.getPlayerMonitor()"),this.Bi},this.getAdType=function(){return null!=s.Bi?s.Bi.Zi:null},this.ne=function(){return null!=s.Bi?s.Bi.ji:null},n.prototype=Object.create(y.prototype),n.prototype.constructor=n};ht.Impl=ht.Impl||{},ht.Impl.Html5Http=function(){(function(){}).apply(this,arguments),this.makeRequest=function(t,n,i,e,s,l){return this.makeRequestStandard.apply(this,arguments)},this.makeRequestStandard=function(t,n,i,e,s,l){var u=new XMLHttpRequest;return u.open(t,n,!0),e&&u.overrideMimeType&&(u.overrideMimeType=e),e&&u.setRequestHeader&&u.setRequestHeader("Content-Type",e),0<s&&(u.timeout=s,u.ontimeout=function(){u.ontimeout=u.onreadystatechange=null,l&&l(!1,"timeout after "+s+" ms")}),u.onreadystatechange=function(){4===u.readyState&&(u.ontimeout=u.onreadystatechange=null,200==u.status?l&&l(!0,u.responseText):l&&l(!1,"http status "+u.status))},u.send(i),null},this.release=function(){}},ht.Impl=ht.Impl||{},ht.Impl.Html5Logging=function(){(function(){}).apply(this,arguments),this.consoleLog=function(t,n){"undefined"!=typeof console&&(console.log&&n===ht.SystemSettings.LogLevel.DEBUG||n===ht.SystemSettings.LogLevel.INFO?console.log(t):console.warn&&n===ht.SystemSettings.LogLevel.WARNING?console.warn(t):console.error&&n===ht.SystemSettings.LogLevel.ERROR&&console.error(t))},this.release=function(){}},ht.Impl=ht.Impl||{},ht.Impl.Html5Metadata=function(){(function(){}).apply(this,arguments),this.getBrowserName=function(){return null},this.getBrowserVersion=function(){return null},this.getDeviceBrand=function(){return null},this.getDeviceManufacturer=function(){return null},this.getDeviceModel=function(){return null},this.getDeviceType=function(){return null},this.getDeviceVersion=function(){return null},this.getFrameworkName=function(){return null},this.getFrameworkVersion=function(){return null},this.getOperatingSystemName=function(){return null},this.getOperatingSystemVersion=function(){return null},this.getDeviceCategory=function(){return null},this.getScreenWidth=function(){return"undefined"!=typeof window&&window&&window.screen&&window.screen.width?window.screen.width.toString():null},this.getScreenHeight=function(){return"undefined"!=typeof window&&window&&window.screen&&window.screen.height?window.screen.height.toString():null},this.getScaleFactor=function(){return"undefined"!=typeof window&&window&&window.devicePixelRatio?window.devicePixelRatio.toString():null},this.release=function(){}},ht.Impl=ht.Impl||{},ht.Impl.Html5Storage=function(){(function(){}).apply(this,arguments),this.saveData=function(t,n,i,e){var s=t+"."+n;try{localStorage.setItem(s,i),e(!0,null)}catch(t){e(!1,t.toString())}},this.loadData=function(t,n,i){var e=t+"."+n;try{i(!0,localStorage.getItem(e))}catch(t){i(!1,t.toString())}},this.release=function(){}},ht.Impl=ht.Impl||{},ht.Impl.Html5Time=function(){(function(){}).apply(this,arguments),this.getEpochTimeMs=function(){return(new Date).getTime()},this.release=function(){}},ht.Impl=ht.Impl||{},ht.Impl.Html5Timer=function(){(function(){}).apply(this,arguments),this.createTimer=function(t,n,i){var e=setInterval(t,n);return function(){-1!==e&&(clearInterval(e),e=-1)}},this.release=function(){}};var C,m,T,I,N,w=at.JSON2={};function t(t){return t<10?"0"+t:t}function _(t){return C.lastIndex=0,C.test(t)?'"'+t.replace(C,function(t){var n=I[t];return"string"==typeof n?n:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}),"function"!=typeof w.stringify&&(C=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,I={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},w.stringify=function(t,n,i){var e;if(T=m="","number"==typeof i)for(e=0;e<i;e+=1)T+=" ";else"string"==typeof i&&(T=i);if((N=n)&&"function"!=typeof n&&("object"!=typeof n||"number"!=typeof n.length))throw new Error("JSON2.stringify");return function t(n,i){var e,s,l,u,o,r=m,a=i[n];switch(a&&"object"==typeof a&&"function"==typeof a.toJSON&&(a=a.toJSON(n)),"function"==typeof N&&(a=N.call(i,n,a)),typeof a){case"string":return _(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";if(m+=T,o=[],Object.prototype.toString.apply(a)===Object.prototype.toString.apply([])){for(u=a.length,e=0;e<u;e+=1)o[e]=t(e,a)||"null";return l=0===o.length?"[]":m?"[\n"+m+o.join(",\n"+m)+"\n"+r+"]":"["+o.join(",")+"]",m=r,l}if(N&&"object"==typeof N)for(u=N.length,e=0;e<u;e+=1)"string"==typeof N[e]&&(l=t(s=N[e],a))&&o.push(_(s)+(m?": ":":")+l);else for(s in a)Object.prototype.hasOwnProperty.call(a,s)&&(l=t(s,a))&&o.push(_(s)+(m?": ":":")+l);return l=0===o.length?"{}":m?"{\n"+m+o.join(",\n"+m)+"\n"+r+"}":"{"+o.join(",")+"}",m=r,l}}("",{"":t})});var O,P,D,b,M,L=at.JsonParse=(b={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},M=function(){switch(B(),P){case"{":return function(){var t,n={};if("{"===P){if(k("{"),B(),"}"===P)return k("}"),n;for(;P;){if(t=F(),B(),k(":"),Object.hasOwnProperty.call(n,t)&&V('Duplicate key "'+t+'"'),n[t]=M(),B(),"}"===P)return k("}"),n;k(","),B()}}V("Bad object")}();case"[":return function(){var t=[];if("["===P){if(k("["),B(),"]"===P)return k("]"),t;for(;P;){if(t.push(M()),B(),"]"===P)return k("]"),t;k(","),B()}}V("Bad array")}();case'"':return F();case"-":return U();default:return("0"<=P&&P<="9"?U:function(){switch(P){case"t":return k("t"),k("r"),k("u"),k("e"),!0;case"f":return k("f"),k("a"),k("l"),k("s"),k("e"),!1;case"n":return k("n"),k("u"),k("l"),k("l"),null}V("Unexpected '"+P+"'")})()}},function(t,u){return D=t,O=0,P=" ",t=M(),B(),P&&V("Syntax error"),"function"==typeof u?function t(n,i){var e,s,l=n[i];if(l&&"object"==typeof l)for(e in l)Object.hasOwnProperty.call(l,e)&&(void 0!==(s=t(l,e))?l[e]=s:delete l[e]);return u.call(n,i,l)}({"":t},""):t});function V(t){throw{name:"SyntaxError",message:t,at:O,text:D}}function k(t){return t&&t!==P&&V("Expected '"+t+"' instead of '"+P+"'"),P=D.charAt(O),O+=1,P}function U(){var t,n="";for("-"===P&&k(n="-");"0"<=P&&P<="9";)n+=P,k();if("."===P)for(n+=".";k()&&"0"<=P&&P<="9";)n+=P;if("e"===P||"E"===P)for(n+=P,k(),"-"!==P&&"+"!==P||(n+=P,k());"0"<=P&&P<="9";)n+=P,k();if(t=+n,!isNaN(t))return t;V("Bad number")}function F(){var t,n,i,e="";if('"'===P)for(;k();){if('"'===P)return k(),e;if("\\"===P)if(k(),"u"===P){for(n=i=0;n<4&&(t=parseInt(k(),16),isFinite(t));n+=1)i=16*i+t;e+=String.fromCharCode(i)}else{if("string"!=typeof b[P])break;e+=b[P]}else e+=P}V("Bad string")}function B(){for(;P&&P<=" ";)k()}var H=at.CwsProtocol=function(){this.bs=function(t,n,i,e){return e.seq=t,e.st=n,e.t=i,e},this.Ms=function(t,n){var i=H.Ls;return this.bs(t,n,i,{})}};H.version="2.6",H.Vs="/0/wsg",H.M="0",H.ks=!1,H.Us=2,H.Fs=-1,H.Bs=-1,H.Hs=1e3,H.Ks="sdk.js.1",H.Gs="CwsStateChangeEvent",H.js="CwsErrorEvent",H.Ls="CwsSessionEndEvent",H.xs="CwsCustomEvent",H.Ws="CwsSeekEvent",H.qs="CwsDataSamplesEvent",H.Ys="ok",H.Js="err",H.Qs="clid",H.Xs="cfg",H.zs="evs",H.Zs="maxhbinfos",H.$s="slg",H.tl="hbi",H.nl="gw",H.il="fp",H.el="csi_en",H.sl="CwsSessionHb",H.ll="t",H.ul="st",H.ol="sst",H.rl="lv",H.al="seq",H.hl="cid",H.cl="clid",H.fl="clv",H.dl="pver",H.vl="iid",H.El="sid",H.pl="vid",H.gl="an",H.Al="pn",H.Sl="tags",H.Rl="sf",H.yl="evs",H.Cl="lg",H.ml="hbinfos",H.Tl="sdk",H.Il="pj",H.Nl="ps",H.wl="br",H._l="cl",H.Ol="efps",H.Pl="afps",H.Dl="rfpstot",H.bl="rfpscnt",H.Ml="rs",H.Ll="pht",H.Vl="bl",H.kl="url",H.Ul="caps",H.Fl="pm",H.Bl="w",H.Hl="h",H.Kl="ct",H.Gl="le",H.jl="dftot",H.xl="dfcnt",H.Wl="ss",H.ql="csi_n",H.Yl="csi_t",H.Jl="csi_l",H.Ql="csi_v",H.Xl="csi_c",H.zl="sch",H.Zl="br",H.$l="brv",H.tu="dvb",H.nu="dvma",H.iu="dvm",H.eu="dvt",H.su="dvv",H.lu="sw",H.uu="sh",H.ou="scf",H.ru="fw",H.au="fwv",H.hu="cc",H.cu="mn",H.fu="mv",H.du="os",H.vu="osv",H.Eu="cat",H.pu="caps",H.gu="t",H.Au="seq",H.Su="st",H.Ru="act",H.yu="skto",H.Cu="err",H.mu="ft",H.Tu="new",H.Iu="old",H.Nu="name",H.wu="attr",H._u="seq",H.Ou="err",H.Pu="rtt",H.Du="ad",H.bu="csi",H.Mu=function(t){switch(t){case R.PlayerState.STOPPED:return H.Lu;case R.PlayerState.PLAYING:return H.Vu;case R.PlayerState.BUFFERING:return H.ku;case R.PlayerState.PAUSED:return H.Uu;case R.PlayerState.NOT_MONITORED:return H.Fu;default:return H.Bu}},H.Lu=1,H.Vu=3,H.ku=6,H.Uu=12,H.Fu=98,H.Bu=100,H.Hu={Ku:0,ct:1,Gu:2,ju:4},H.xu={Wu:0},at.JSONInterface=function(){this.qu=function(t){},this.Yu=function(t){}};var K=at.LibJSONInterface=function(){this.qu=function(t){var n=null;try{n=w.stringify(t)}catch(t){}return n},this.Yu=function(t){var n=null;try{n=L(t)}catch(t){}return z.Ju(n)||(n=null),n}},G=at.CwsHeartbeat=function(){this.Qu={},function(){}.apply(this,arguments),this.get=function(){return this.Qu},this.Xu=function(t,n){this.Qu[t]=n},this.zu=function(t,n,i){this.Qu[t]||(this.Qu[t]={}),this.Qu[t][n]=i},this.Zu=function(t){this.Xu(H.ll,t)},this.$u=function(t){this.Xu(H.ul,t)},this.no=function(t){this.Xu(H.ol,t)},this.io=function(t){this.Xu(H.rl,t)},this.eo=function(t){this.Xu(H.al,t)},this.so=function(t){this.Xu(H.hl,t)},this.lo=function(t){this.Xu(H.cl,t)},this.uo=function(t){this.Xu(H.fl,t)},this.oo=function(t){this.Xu(H.dl,t)},this.ro=function(t){this.Xu(H.pu,t)},this.Si=function(t){this.Xu(H.El,t)},this.ao=function(t){this.Xu(H.vl,t)},this.ho=function(t){this.Xu(H.pl,t)},this.co=function(t){this.Xu(H.gl,t)},this.fo=function(t){this.Xu(H.Al,t)},this.do=function(t){this.Xu(H.Sl,t)},this.vo=function(t){this.Xu(H.Rl,t)},this.Eo=function(t){this.Xu(H.Ul,t)},this.po=function(t){this.Xu(H.yl,t)},this.go=function(t){this.Xu(H.Tl,t)},this.Ao=function(t){this.Xu(H.Cl,t)},this.So=function(t){this.Xu(H.ml,t)},this.Se=function(t){this.Xu(H.Nl,t)},this.Ro=function(t){this.Xu(H.Il,t)},this.yo=function(t){this.Xu(H._l,t)},this.Co=function(t){this.Xu(H.wl,t)},this.mo=function(t){this.Xu(H.Ml,t)},this.To=function(t){this.Xu(H.Ol,t)},this.Io=function(t){this.Xu(H.Pl,t)},this.No=function(t){this.Xu(H.bl,t)},this.wo=function(t){this.Xu(H.Dl,t)},this._o=function(t){this.zu(H.Fl,H.zl,t)},this.Oo=function(t){this.zu(H.Fl,H.Zl,t)},this.Po=function(t){this.zu(H.Fl,H.$l,t)},this.Do=function(t){this.zu(H.Fl,H.tu,t)},this.bo=function(t){this.zu(H.Fl,H.nu,t)},this.Mo=function(t){this.zu(H.Fl,H.iu,t)},this.Lo=function(t){this.zu(H.Fl,H.eu,t)},this.Vo=function(t){this.zu(H.Fl,H.su,t)},this.ko=function(t){this.zu(H.Fl,H.ru,t),this.Xu(H.ru,t)},this.Uo=function(t){this.zu(H.Fl,H.au,t),this.Xu(H.au,t)},this.Fo=function(t){this.zu(H.Fl,H.du,t.toUpperCase())},this.Bo=function(t){this.zu(H.Fl,H.vu,t)},this.Ho=function(t){this.zu(H.Fl,H.Eu,t)},this.Ko=function(t){this.zu(H.Fl,H.lu,t)},this.Go=function(t){this.zu(H.Fl,H.uu,t)},this.jo=function(t){this.zu(H.Fl,H.ou,t)},this.xo=function(t){this.Xu(H.jl,t)},this.$e=function(t){this.Xu(H.xl,t)},this.Wo=function(t){this.Xu(H.Ll,t)},this.qo=function(t){this.Xu(H.Vl,t)},this.Yo=function(t){this.Xu(H.kl,t)},this.Jo=function(t){this.Xu(H.Bl,t)},this.Qo=function(t){this.Xu(H.Hl,t)},this.Xo=function(t){this.Xu(H.Kl,t)},this.zo=function(t){this.Xu(H.Gl,t)},this.Zo=function(){this.Xu(H.Du,!0)},this.$o=function(t){this.Xu(H.Wl,t)},this.setModuleName=function(t){this.zu(H.hu,H.cu,t)},this.tr=function(t){this.zu(H.hu,H.fu,t)},this.nr=function(t){this.Xu(H.bu,t)},this.ir=function(t){null!=t&&this.Xu(H.ql,t)},this.er=function(t){null!=t&&this.Xu(H.Yl,t)},this.sr=function(t){null!=t&&this.Xu(H.Jl,t)},this.lr=function(t){null!=t&&this.Xu(H.Ql,t)},this.ur=function(t){null!=t&&this.Xu(H.Xl,t)}},j=at.CwsSession=function(t,n,i,e,s,l,u,o,r,a,h,c){var E=this;E.or=null,E.pt=null,E.rr=0,E.ar=0,E.hr=H.Hu.Ku,E.cr=H.xu.Wu,E.fr=[],E.dr=-1,E.Jn=-2,E.bi=-1,E.vr=-1,E.Er=null,E.Qn=R.PlayerState.UNKNOWN,E.cn=-1,E.pr=-1,E.on=null,E.ii=-1,E.ei=-1,E.oe=null,E.in=null,E.ln=null,E.gr=null,E.Ar=null,E.Sr={},E.Rr=null,E.yr=null,E.Cr=null,E.mr=null,E.Tr=null,E.Ir=null,E.Nr=null,E.wr=null,E._r=null,E.Or=null,E.Pr=null,E.Dr=null,E.br=null,E.Mr=null,E.Lr=null,E.ti=null,E.ni=null,E.N=null,E.w=null,E.ke=null,E.Vr=null,E.kr=!1,E.Ur=!1,E.Fr=!1,E.Br=!1,E.Hr=null,E.Kr=1e3,E.Gr=0,E.jr=0,E.xr={},E.m={},E.Wr=!1,E.qr=null,E.Yr=null,E.Jr=null,E.Qr=null,E.Xr=null,E.zr=null,E.Zr=12e4,E.$r=H.ks,E.ta=!1,E.na=null,function(t,n,i,e,s,l,u,o,r,a,h,c){this.ia=t,this.Ki=n,this.Rn=i,this.c=e,this.c.setModuleName("CwsSession"),this.S=s,this.Gi=l,this.ea=u,this.sa=o,this.la=r,this.Cn=a,this.ua=h,this.pt=c,null!=this.pt&&(E.cn=this.pt.encodedFrameRate,E.on=this.pt.streamUrl,E.pr=this.pt.duration),null!=this.ua&&(E.na=E.ua.get(Y.D))}.apply(this,arguments),this.rt=function(){this.ua=null,this.Cn=null,this.A=null,this.la=null,this.sa=null,this.ea=null,this.Gi=null,this.S=null,this.c=null,this.Rn=null,this.Ki=null,this.ia.oa(),this.ia=null,this.Vr=null,this.Fr=!0},this.ra=function(t){this.aa=t,this.ha=this.aa.ha,this.c.Si(this.aa.y),this.rr=this.la.current(),this.ca()||this.fa()?(this.hr+=j.da,E.c.info("start(): assetName="+E.pt.assetName)):E.c.info("start()"+E.va())},this.Ea=function(){this.Br=!0},this.pa=function(){this.c.debug("initialize()"),(this.ca()||this.fa()||this.ga())&&(E.Aa(),E.Sa(),E.Ra(),(this.ca()||this.fa())&&E.ya())},this.Ca=function(){this.c.debug("end(): schedule the last hb before session cleanup"+E.va()),this.ma(),this.Ta(),this.Ia(),this.Na()},this.wa=function(){this.Br||(this.Na(),this._a())},this.Oo=function(t){var n=E.Rr;n!==t&&null!=t&&(E.c.debug("Change browserName from "+n+" to "+t),E.Rr=t)},this.Po=function(t){var n=E.yr;n!==t&&null!=t&&(E.c.debug("Change browserVersion from "+n+" to "+t),E.yr=t)},this.Do=function(t){var n=E.Cr;n!==t&&null!=t&&(E.c.debug("Change deviceBrand from "+n+" to "+t),E.Cr=t)},this.bo=function(t){var n=E.mr;n!==t&&null!=t&&(E.c.debug("Change deviceManufacturer from "+n+" to "+t),E.mr=t)},this.Mo=function(t){var n=E.Tr;n!==t&&null!=t&&(E.c.debug("Change deviceModel from "+n+" to "+t),E.Tr=t)},this.Lo=function(t){var n=E.Ir;n!==t&&null!=t&&(E.c.debug("Change deviceType from "+n+" to "+t),E.Ir=t)},this.Vo=function(t){var n=E.Nr;n!==t&&null!=t&&(E.c.debug("Change deviceVersion from "+n+" to "+t),E.Nr=t)},this.Fo=function(t){var n=E.Or;n!==t&&null!=t&&(E.c.debug("Change operatingSystemName from "+n+" to "+t),E.Or=t)},this.Bo=function(t){var n=E.Pr;n!==t&&null!=t&&(E.c.debug("Change operatingSystemVersion from "+n+" to "+t),E.Pr=t)},this.Ho=function(t){var n=E.Dr;n!==t&&null!=t&&(E.c.debug("Change deviceCategory from "+n+" to "+t),E.Dr=t)},this.Ko=function(t){var n=E.br;n!==t&&null!=t&&(E.c.debug("Change screenWidth from "+n+" to "+t),E.br=t)},this.Go=function(t){var n=E.Mr;n!==t&&null!=t&&(E.c.debug("Change screenHeight from "+n+" to "+t),E.Mr=t)},this.jo=function(t){var n=E.Dr;n!==t&&null!=t&&(E.c.debug("Change scaleFactor from "+n+" to "+t),E.Lr=t)},this.Oa=function(){return E.wr},this.ko=function(t){var n=E.wr;n!==t&&null!=t&&(E.c.debug("Change frameworkName from "+n+" to "+t),E.wr=t)},this.Pa=function(){return E._r},this.Uo=function(t){var n=E._r;n!==t&&null!=t&&(E.c.debug("Change frameworkVersion from "+n+" to "+t),E._r=t)},this.Yo=function(t){var n;null!=E.pt.streamUrl||(n=E.on)!==t&&null!=t&&(E.c.debug("Change stream url from "+n+" to "+t),E.on=t)},this.Da=function(){E.Ta(),E.ta||(E.ba(),E.zr=E.Gi.create(E.ba,E.Zr,"CwsSession.startCdnTimer"),E.c.debug("fetching cdn ip timer started"))},this.Ta=function(){null!=E.zr&&(E.zr(),E.Ma(null,null,null,null,null),E.zr=null)},this.ba=function(){E.c.debug("detectCDNServerIp(): For "+E.on),E.$r?E.La():E.Ta()},this.La=function(){try{var t;"function"==typeof XMLHttpRequest?((t=new XMLHttpRequest).open("HEAD",E.on,!0),t.setRequestHeader("Pragma","akamai-x-cache-on"),t.onreadystatechange=function(){4===this.readyState&&(200===this.status&&(0<=this.getAllResponseHeaders().indexOf("x-cache")||0<=this.getAllResponseHeaders().indexOf("X-Cache"))?E.Ma("Akamai","header","X-Cache",""+this.getResponseHeader("X-Cache"),""+this.status):E.Ma("null","header","null","null",""+this.status))},t.send()):E.c.info("xmlhttpreq is not available here to fetch CDN Server Ip")}catch(t){E.c.info("Exception caught in makeAkamaiHeadRequest")}},this.Ma=function(t,n,i,e,s){var l={},u={};E.qr!=t&&(null!==E.qr&&(u[H.ql]=E.qr),E.qr=t,null===E.qr?l[H.ql]="null":l[H.ql]=E.qr),E.Yr!=n&&(null!==E.Yr&&(u[H.Yl]=E.Yr),E.Yr=n,null===E.Yr?l[H.Yl]="null":l[H.Yl]=E.Yr),E.Jr!=i&&(null!==E.Jr&&(u[H.Jl]=E.Jr),E.Jr=i,null===E.Jr?l[H.Jl]="null":l[H.Jl]=E.Jr),E.Qr!=e&&(null!==E.Qr&&(u[H.Ql]=E.Qr),E.Qr=e,null===E.Qr?l[H.Ql]="null":l[H.Ql]=E.Qr),E.Xr!=s&&(null!==E.Xr&&(u[H.Xl]=E.Xr),E.Xr=s,null===E.Xr?l[H.Xl]="null":l[H.Xl]=E.Xr),"{}"!=z.Va(l)&&E.ka(l,u)},this.Ua=function(t){var n=E.Jn;n!==t&&0<t&&(E.c.info("Change bitrate from "+n+" to "+t),E.Fa(n,t),E.Jn=t)},this.xo=function(t){var n=E.bi;n!==t&&0<=t&&(E.c.info("Change dropped frames total from "+n+" to "+t),E.Ba(n,t),E.bi=t)},this.$e=function(t){var n=E.vr,i=t+(-1===E.vr?0:E.vr);n!==t&&0<=i&&(E.c.info("Change dropped frames count from "+n+" to "+i),E.Ha(n,i),E.vr=i)},this.mo=function(t){var n=E.Er;n!==t&&null!=t&&(E.c.info("Change resource from "+n+" to "+t),E.Er=t)},this.co=function(t){E.in!==t&&null!=t&&(E.c.info("Change assetName from "+E.in+" to "+t),E.in=t)},this.io=function(t){var n=E.Ar;n!==t&&null!=t&&(E.c.info("Change isLive from "+n+" to "+t),E.Ar=t)},this.ho=function(t){var n=E.ln;n!==t&&null!=t&&(E.c.info("Change viewerId from "+n+" to "+t),E.ln=t)},this.fo=function(t){var n=E.gr;n!==t&&null!=t&&(E.c.info("Change playerName from "+n+" to "+t),E.gr=t)},this.do=function(t){var n=E.Sr;z.Ka(n,t)||null==t||(E.c.info("Change tags from "+z.Va(n)+" to "+z.Va(t)),E.Sr=t)},this.To=function(t){0<E.pt.encodedFrameRate||(E.c.debug("setEncodedFrameRate(): "+t),E.cn=t)},this.yo=function(t){0<E.pt.duration||(E.c.debug("setContentLength(): "+t),E.pr=t)},this.Se=function(t){var n;E.Ur||t!=R.PlayerState.PLAYING||(E.Ga(!1),E.Ur=!0,z.St(E.pt.viewerId)||E.c.error("Missing viewerId. viewerId should be updated before first frame is rendered."),z.St(E.pt.streamType)&&f.StreamType.UNKNOWN!==E.pt.streamType||E.c.error("Missing streamType - Live or VOD. streamType should be updated before first frame is rendered."),z.St(E.pt.applicationName)||E.c.error("Missing applicationName. applicationName should be updated before first frame is rendered.")),E.Qn!==t&&(n=E.Qn,E.c.info("setPlayerState(): changing player state from "+n+" to "+t),E.ja(n,t),E.Qn=t)},this.xa=function(t){var n=E.ii;n!==t&&0<t&&(E.c.debug("Change stream resolution width from "+n+" to "+t),E.Wa(n,t),E.ii=t)},this.qa=function(t){var n=E.ei;n!==t&&0<t&&(E.c.debug("Change stream resolution height from "+n+" to "+t),E.Ya(n,t),E.ei=t)},this.Xo=function(t){var n=E.N;n!==t&&null!=t&&(E.c.debug("Change network connection type from "+n+" to "+t),E.Ja(n,t),E.N=t)},this.zo=function(t){var n=E.w;n!==t&&null!=t&&(E.c.debug("Change network link encryption from "+n+" to "+t),E.Qa(n,t),E.w=t)},this.nr=function(t){E.ta=!0,E.Ta();var n=E.ke;n!==t&&z.St(t)&&(E.c.debug("Change CDN Server IP from "+n+" to "+t),E.Xa(n,t),E.ke=t)},this.Ga=function(t){var n;E.c.debug("togglePauseJoin()"),E.kr!==t?(n=E.kr,t=!E.kr,E.za(n,t),E.kr=!E.kr):E.c.debug("togglePauseJoin(): same value, ignoring")},this.Za=function(t,n){E.$a(t,n)},this.th=function(t,n){var i;n[H.gu]=t,n[H.Su]=this.nh(),n[H.Au]=this.ia.ih(),this.oe&&(i=nt.eh(this.oe.getPHT(),0,null,-1),t=nt.eh(this.oe.getBufferLength(),0,null,-1),0<=i&&(n[H.Ll]=i),0<t&&(n[H.Vl]=t)),this.ia.sh(n)},this.lh=function(t){E.oe=t,null!=E.oe?E.uh():E.oh()},this.ma=function(){var t=this.nh(),n=this.rh(),t=this.sa.Ms(n,t);this.ia.sh(t)},this.$a=function(t,n){var i={};i[H.Cu]=t,i[H.mu]=n,this.th(H.js,i)},this.Fa=function(t,n){var i={},e={};0<t&&(e[H.wl]=t),i[H.wl]=n,this.ka(i,e)},this.ah=function(t,n){var i={};i[H.Ru]=t,0<=n&&(i[H.yu]=n),this.th(H.Ws,i)},this.Wa=function(t,n){var i={},e={};-1!==t&&(e[H.Bl]=t),i[H.Bl]=n,this.ka(i,e)},this.Ya=function(t,n){var i={},e={};-1!==t&&(e[H.Hl]=t),i[H.Hl]=n,this.ka(i,e)},this.Ja=function(t,n){var i={},e={};null!==t&&(e[H.Kl]=t),i[H.Kl]=n,this.ka(i,e)},this.Qa=function(t,n){var i={},e={};null!==t&&(e[H.Gl]=t),i[H.Gl]=n,this.ka(i,e)},this.Xa=function(t,n){var i={},e={};z.St(t)&&(e[H.bu]=t),i[H.bu]=n,this.ka(i,e)},this.Ba=function(t,n){var i={},e={};0<=t&&(e[H.jl]=t),i[H.jl]=n,this.ka(i,e)},this.Ha=function(t,n){var i={},e={};0<=t&&(e[H.xl]=t),i[H.xl]=n,this.ka(i,e)},this.za=function(t,n){var i={},e={};e[H.Il]=t,i[H.Il]=n,this.ka(i,e)},this.ja=function(t,n){var i={},e={};i[H.Nl]=H.Mu(n),e[H.Nl]=H.Mu(t),this.ka(i,e)},this.ka=function(t,n){var i={};i[H.Tu]=t,null!=n&&0<z._t(n)&&(i[H.Iu]=n),this.th(H.Gs,i)},this.hh=function(t,n){var i={};i[H.Nu]=t,0<z._t(n)&&(i[H.wu]=n),this.th(H.xs,i)},this.Ia=function(){null!=E.or&&(E.or(),E.or=null)},this._a=function(){E.Ia();var t=1e3*E.Rn.heartbeatInterval;E.or=E.Gi.create(E.Na,t,"Session.sendHeartbeat:"+this.ha)},this.oh=function(){null!=E.Hr&&(E.Hr(),E.Hr=null)},this.uh=function(){E.oh(),E.Hr=E.Gi.create(E.ch,E.Kr,"Session.startRfpsTimer")},this.fh=function(){var t={err:"pending"};t.seq=E.ar-1,t.sentAt=E.nh(),t.rtt=-1,E.fr.push(t);for(var n=0;n<E.fr.length;n++)"ok"===(t=E.fr[n]).err&&(E.fr.splice(n,1),n--)},this.dh=function(t,n){for(var i=0;i<E.fr.length;i++){var e=E.fr[i];e.seq===t&&(e.rtt=E.nh()-e.sentAt,e.err=n)}},this.vh=function(t){for(var n=0;n<E.fr.length;n++){var i=E.fr[n];i.seq===t&&(i.rtt=E.nh()-i.sentAt,i.err="ok")}},this.Eh=function(){for(var t,n,i=E.ua.get(Y.ph),e=[],s=-1,l=0;l<E.fr.length;l++)if("ok"==(n=E.fr[l]).err){s=n.seq;break}for(var u=0;u<E.fr.length;u++)((t=(n=E.fr[u]).seq)<E.ar-i||t<s)&&e.push(u);for(var o=[],r=0;r<E.fr.length;r++)t=(n=E.fr[r]).seq,e.indexOf(r)<0&&o.push(E.fr[r]);E.fr=o},this.gh=function(){E.Eh();for(var t=[],n=0;n<E.fr.length;n++){var i=E.fr[n],e={};e[H._u]=i.seq,e[H.Pu]=i.rtt,e[H.Ou]=i.err,t.push(e)}return t},this.Ah=function(){var t=E.ia.oa();if(E.ga()&&0===t.length)return null;var n=new G;if(n.Zu(H.sl),n.so(E.Rn.customerKey),n.lo(E.ua.get(Y.D)),n.Si(E.aa.y),n.eo(E.ar),n.oo(H.version),n.uo(E.Ki.version),n.ao(E.Ki.y),n.ro(0),null!=E.Ki.N?n.Xo(E.Ki.N):null!=E.N&&n.Xo(E.N),null!=E.Ki.w?n.zo(E.Ki.w):null!=E.w&&n.zo(E.w),z.St(E.ke)&&n.nr(E.ke),n._o(H.Ks),null!=E.Rr&&n.Oo(E.Rr),null!=E.yr&&n.Po(E.yr),null!=E.Cr&&n.Do(E.Cr),null!=E.mr&&n.bo(E.mr),null!=E.Tr&&n.Mo(E.Tr),null!=E.Ir&&n.Lo(E.Ir),null!=E.Nr&&n.Vo(E.Nr),null!=E.Or&&n.Fo(E.Or),null!=E.Pr&&n.Bo(E.Pr),null!=E.Dr&&n.Ho(E.Dr),null!=E.wr&&n.ko(E.wr),null!=E._r&&n.Uo(E._r),null==E.br||isNaN(E.br)||n.Ko(parseInt(E.br,10)),null==E.Mr||isNaN(E.Mr)||n.Go(parseInt(E.Mr,10)),null==E.Lr||isNaN(E.Lr)?(null!=E.br&&!isNaN(E.br)||null!=E.Mr&&!isNaN(E.Mr))&&n.jo(1):n.jo(parseFloat(E.Lr)),null!=E.oe&&(E.ti=E.oe.di(),null!=E.ti&&n.setModuleName(E.ti),E.ni=E.oe.vi(),null!=E.ni&&n.tr(E.ni),null!=E.oe.Ei()&&(E.wr=E.oe.Ei(),n.ko(E.wr)),null!=E.oe.gi()&&(E._r=E.oe.gi(),n.Uo(E._r))),null!=E.ln&&n.ho(E.ln),0<z._t(E.Sr)&&n.do(E.Sr),E.ca()||E.fa()){E.fa()&&n.Zo(),null!=E.in&&n.co(E.in),n.vo(E.hr);var i=H.Mu(E.Qn);n.Se(i),n.Ro(E.kr),null!=E.gr&&n.fo(E.gr),null!=E.Ar&&n.io(E.Ar),0<E.pr&&n.yo(E.pr),0<E.Jn&&n.Co(E.Jn),null!==E.Er&&n.mo(E.Er),0<E.cn&&n.To(E.cn);var e,s=-1,i=-1;null!=E.oe&&(s=nt.eh(E.oe.getPHT(),0,null,-1),i=nt.eh(E.oe.getBufferLength(),0,null,-1)),null!=E.Ki._?e=E.Ki._:null!=E.oe&&(e=E.oe.getSignalStrength()),0<=s&&n.Wo(s),0<i&&n.qo(i);i=E.Sh();if(0<i&&n.Io(i),0<E.jr&&n.wo(nt.eh(E.jr,0,null,-1)),0<E.Gr&&n.No(nt.eh(E.Gr,0,null,-1)),e!==R.DEFAULT_SIGNAL_STRENGTH&&n.$o(e),null!=E.on&&n.Yo(E.on),0<E.ii&&n.Jo(E.ii),0<E.ei&&n.Qo(E.ei),-1<E.bi&&n.xo(E.bi),-1<E.vr&&(n.$e(E.vr),0<E.vr&&(E.Ha(E.vr,0),E.vr=0)),null!=E.Vr)for(var l in E.Vr)n.Xu(l,E.Vr[l])}else n.vo(H.Hu.Ku);return 0<t.length&&n.po(t),n.Eo(E.cr),n.go(!0),E.ua.get(Y.Rh)&&n.Ao(E.Cn.oa()),0<E.ua.get(Y.ph)&&(0<(t=E.gh()).length&&n.So(t)),0==E.ar&&(n=E.yh(n)),0!=E.ar&&(n=E.Ch(n)),n.no(E.rr),n.$u(E.nh()),E.$r&&(n.ir(E.qr),n.er(E.Yr),n.sr(E.Jr),n.lr(E.Qr),n.ur(E.Xr)),E.ar++,n.get()},this.Ch=function(t){var n,i=E.m,e={};for(n in t.Qu.tags)i.hasOwnProperty(n)||(e[n]=t.Qu.tags[n]);t.Qu.tags=e,E.m={};for(var s=0;s<E.xr.length;s++)E.Ki.m.hasOwnProperty(E.xr[s])?E.Ki.I.hasOwnProperty(E.xr[s])?E.Ki.I[E.xr[s]]==Y.Kt.Gt?(E.m[Y.mh+""+E.xr[s]]=Y.Kt.Gt,E.Ki.T("End-user chose to opt-out of personal data collection")):E.Ki.I[E.xr[s]]==Y.Kt.xt?(E.m[Y.mh+""+E.xr[s]]=Y.Kt.xt,E.Ki.T("End-user chose to opt-out of personal data collection")):E.Ki.I[E.xr[s]]==Y.Kt.Ht?(E.m[Y.mh+""+E.xr[s]]=Y.Kt.Ht,E.Ki.T("End-user used privacy settings and chose to opt-out of personal data collection")):(E.m[Y.mh+""+E.xr[s]]=E.Ki.m[E.xr[s]],E.Ki.T("Data collection successful")):(E.m[Y.mh+""+E.xr[s]]=E.Ki.m[E.xr[s]],E.Ki.T("Data collection successful")):E.m[Y.mh+""+E.xr[s]]=Y.Kt.Th;var l,u={};for(l in i){var o=l.split(".");"{}"!=JSON.stringify(E.xr)&&-1!=E.xr.indexOf(""+o[2])||i[Y.mh+""+o[2]]==Y.Kt.Ih||(E.Ki.T("Data collection restricted from Conviva back-end"),E.m[Y.mh+""+o[2]]=Y.Kt.Ih,u[Y.mh+""+o[2]]=Y.Kt.Ih)}if("{}"!==JSON.stringify(E.m)){var r,a=z.Nh(E.m);for(r in t.Qu.tags)a[r]=t.Qu.tags[r];if(t.Qu.tags=a,!z.Ka(i,E.m)){var h={};if("{}"!==JSON.stringify(u)&&(h[H.Sl]=u),"{}"!==JSON.stringify(i)){for(var c in i)void 0!==E.m[c]&&i[c]!==E.m[c]&&(null==h[H.Sl]&&(h[H.Sl]={}),h[H.Sl][c]=E.m[c]);for(c in E.m)i.hasOwnProperty(c)&&i[c]===E.m[c]||(null==h[H.Sl]&&(h[H.Sl]={}),h[H.Sl][c]=E.m[c])}"{}"==JSON.stringify(i)&&(h[H.Sl]=E.m);var f,d,v={};v[H.Tu]=h,v[H.gu]=H.Gs,v[H.Su]=E.nh(),v[H.Au]=E.ia.ih(),E.oe&&(f=nt.eh(E.oe.getPHT(),0,null,-1),d=nt.eh(E.oe.getBufferLength(),0,null,-1),0<=f&&(v[H.Ll]=f),0<d&&(v[H.Vl]=d)),null==t.Qu.evs&&(t.Qu.evs=[]),t.Qu.evs.push(v)}}return t},this.yh=function(t){var n=E.wh();if("{}"===JSON.stringify(n))return t;var i,e=z.Nh(n);for(i in t.Qu.tags)e[i]=t.Qu.tags[i];t.Qu.tags=e;var s={};s[H.Sl]=n;var l={};return l[H.Tu]=s,l[H.gu]=H.Gs,l[H.Su]=E.nh(),l[H.Au]=E.ia.ih(),E.oe&&(n=nt.eh(E.oe.getPHT(),0,null,-1),s=nt.eh(E.oe.getBufferLength(),0,null,-1),0<=n&&(l[H.Ll]=n),0<s&&(l[H.Vl]=s)),null==t.Qu.evs&&(t.Qu.evs=[]),t.Qu.evs.push(l),t},this.wh=function(){var t={};if("undefined"!=typeof navigator&&null!=navigator){if(t["c3.fp.cookie"]=null!=navigator.cookieEnabled&&null!=navigator.cookieEnabled?""+navigator.cookieEnabled:"",t["c3.fp.memory"]=null!=navigator.deviceMemory&&null!=navigator.deviceMemory?""+navigator.deviceMemory:"",t["c3.fp.hwConc"]=null!=navigator.hardwareConcurrency&&null!=navigator.hardwareConcurrency?""+navigator.hardwareConcurrency:"",t["c3.fp.java"]=""+("function"!=typeof navigator.javaEnabled)?"false":navigator.javaEnabled(),t["c3.fp.lang"]=null!=navigator.language&&null!=navigator.language?""+navigator.language:"",t["c3.fp.langs"]=null!=navigator.languages&&null!=navigator.languages&&0<navigator.languages.length?""+navigator.languages.toString():"",t["c3.fp.maxTp"]=null!=navigator.maxTouchPoints&&null!=navigator.maxTouchPoints?""+navigator.maxTouchPoints:"",t["c3.fp.plugins"]="",null!=navigator.plugins&&0<navigator.plugins.length)for(var n=0;n<navigator.plugins.length;n++)t["c3.fp.plugins"]+=navigator.plugins[n].name+",";if(t["c3.fp.mime"]="",null!=navigator.mimeTypes&&0<navigator.mimeTypes.length)for(var i=0;i<navigator.mimeTypes.length;i++)t["c3.fp.mime"]+=navigator.mimeTypes[i].type+",";t["c3.fp.sysLang"]=null!=navigator.systemLanguage&&null!=navigator.systemLanguage?""+navigator.systemLanguage:"",t["c3.fp.platform"]=null!=navigator.platform&&null!=navigator.platform?""+navigator.platform:"",t["c3.fp.product"]=null!=navigator.product&&null!=navigator.product?""+navigator.product:"",t["c3.fp.productSub"]=null!=navigator.productSub&&null!=navigator.productSub?""+navigator.productSub:"",t["c3.fp.vendor"]=null!=navigator.vendor&&null!=navigator.vendor?""+navigator.vendor:"",t["c3.fp.vendorSub"]=null!=navigator.vendorSub&&null!=navigator.vendorSub?""+navigator.vendorSub:"";var e=E._h();""!=e&&(t["c3.fp.canvFp"]=e)}return"undefined"!=typeof window&&null!=window&&(null!=window.screen&&(t["c3.fp.availHeight"]=null!=window.screen.availHeight&&null!=window.screen.availHeight?""+window.screen.availHeight:"",t["c3.fp.availWidth"]=null!=window.screen.availWidth&&null!=window.screen.availWidth?""+window.screen.availWidth:"",t["c3.fp.height"]=null!=window.screen.height&&null!=window.screen.height?""+window.screen.height:"",t["c3.fp.width"]=null!=window.screen.width&&null!=window.screen.width?""+window.screen.width:"",t["c3.fp.colorDepth"]=null!=window.screen.colorDepth&&null!=window.screen.colorDepth?""+window.screen.colorDepth:"",t["c3.fp.deviceXDPI"]=null!=window.screen.deviceXDPI&&null!=window.screen.deviceXDPI?""+window.screen.deviceXDPI:"",t["c3.fp.deviceYDPI"]=null!=window.screen.deviceYDPI&&null!=window.screen.deviceYDPI?""+window.screen.deviceYDPI:""),t["c3.fp.dpi"]=null!=window.devicePixelRatio&&null!=window.devicePixelRatio?""+window.devicePixelRatio:"",t["c3.fp.secure"]=null!=window.isSecureContext&&null!=window.isSecureContext?""+window.isSecureContext:""),t},this._h=function(){if("undefined"==typeof document||null==document)return"";var t=document.createElement("CANVAS"),n=t.getContext("2d"),i="conviva";return n.textBaseline="top",n.font="14px 'Arial'",n.textBaseline="alphabetic",n.fillStyle="#f40",n.fillRect(null!=navigator.plugins&&null!=navigator.plugins?navigator.plugins.length:0,null!=navigator.mimeTypes&&null!=navigator.mimeTypes?navigator.mimeTypes.length:0,null!=navigator.product&&null!=navigator.product?navigator.product.length:0,null!=navigator.vendor&&null!=navigator.vendor?navigator.vendor.length:0),n.fillStyle="#069",n.fillText(i,null!=navigator.maxTouchPoints&&null!=navigator.maxTouchPoints?navigator.maxTouchPoints:0,null!=navigator.product&&null!=navigator.product?navigator.product.length:0),n.fillStyle="rgba(102, 204, 0, 0.7)",n.fillText(i,null!=navigator.deviceMemory&&null!=navigator.deviceMemory?navigator.deviceMemory:0,null!=navigator.hardwareConcurrency&&null!=navigator.hardwareConcurrency?navigator.hardwareConcurrency:0),z.Oh(t.toDataURL())},this.Na=function(){var t;E.Fr||null!=(t=E.Ah())&&E.Ph(t)},this.ch=function(){var t;E.Qn!==R.PlayerState.PLAYING||null==E.oe||0<(t=E.oe.getRenderedFrameRate())&&(E.jr+=t,E.Gr++)},this.Sh=function(){return 0<E.jr&&0<E.Gr?z.Dh.Cast(+E.jr/E.Gr):(this.ch(),0<E.jr&&0<E.Gr?z.Dh.Cast(+E.jr/E.Gr):R.DEFAULT_RENDERED_FRAME_RATE)},this.Ph=function(t){E.fh();var i=E.ar-1;E.c.info("postHeartbeat(): Send HB["+i+"]"+E.va());E.ea.bh(t,function(t,n){E.Mh(t,n,i)})},this.Mh=function(s,l,u){E.Fr||E.S.P("onHeartbeatResponse",function(){var t,n,i,e;s?null!=(n=l)?(E.c.debug("onHeartbeatResponse(): received valid response for HB["+u+"]"),E.vh(u),null==(e=n[H.Qs])||e!=(t=E.ua.get(Y.D))&&(E.c.debug("onHeartbeatResponse(): setting the client id to "+e+" (from gateway)"),E.ua.set(Y.D,e),E.ua.Lh(),t===H.M&&e!==H.M&&E.Ki.O()),null!=(e=n[H.Js])&&e!=H.Ys&&E.c.error("onHeartbeatResponse(): error from gateway: "+e),"object"==typeof(e=n[H.Xs])&&(null!=(n=e[H.Zs])&&E.ua.get(Y.ph)!==n&&(E.c.debug("onHeartbeatResponse(): setting Maximum Heartbeat Infos to "+n+" (from gateway)"),E.ua.set(Y.ph,n)),(n=null!=(n=e[H.$s])&&z.Vh(n))!==E.ua.get(Y.Rh)&&(E.c.debug("onHeartbeatResponse(): turning "+(n?"on":"off")+" sending of logs"),E.ua.set(Y.Rh,n)),null==(n=e[H.tl])||(i=z.Dh.Cast(n))!=E.Rn.heartbeatInterval&&(E.c.debug("onHeartbeatResponse(): received hbIntervalMs from gateway: "+i),E.Rn.heartbeatInterval=i,null!=E.or&&E._a()),null!=(i=e[H.nl])&&i!=E.Rn.gatewayUrl&&(E.c.debug("onHeartbeatResponse(): received gatewayUrl from gateway: "+i),E.Rn.gatewayUrl=i),E.kh()||(E.xr={},null!=(i=e[H.il])&&(E.Wr||(E.Wr=!0),E.c.debug("onHeartbeatResponse(): received fp from gateway: "+i),E.xr=i.split(",")),E.$r=e[H.el],1==E.$r?(E.c.debug("onHeartbeatResponse(): enabling the CDN Server IP collection"),null!=E.zr&&null!=E.zr||E.Da()):(E.c.debug("onHeartbeatResponse(): disabling the CDN Server IP collection (from gateway)"),E.Ta())))):E.c.warning("onHeartbeatResponse(): decoded heartbeat response is null."):(e=l,z.St(e)?z.Uh(e,"HTTP timeout")?E.c.warning("onHeartbeatResponse(): "+e):E.c.error("onHeartbeatResponse(): failed to send heartbeat: "+e):(e=x.Fh,E.c.error("onHeartbeatResponse(): "+e)),E.dh(u,e))})},this.nh=function(){return z.Dh.Cast(E.la.current()-E.rr)},this.rh=function(){return this.ia.ih()},this.va=function(){return this.ga()?" (global session)":""},this.ga=function(){return this.ha==j.ft.Ku},this.kh=function(){return this.ha==j.ft.Ku&&"T"===this.Sr["c3.IPV4IPV6GlobalSession"]},this.ca=function(){return this.ha==j.ft.ct},this.fa=function(){return this.ha==j.ft.At},this.yt=function(t){E.Bh(t),E.Aa()},this.Bh=function(t){var n={},i={};if(z.St(t.assetName)&&(E.pt.assetName!=t.assetName?(null!=E.pt.assetName&&(n[H.gl]=E.pt.assetName),i[H.gl]=t.assetName,E.pt.assetName=t.assetName):E.c.warning("mergeContentMetadata(): assetName was not changed.")),z.St(t.applicationName)&&(E.pt.applicationName!=t.applicationName?(null!=E.pt.applicationName&&(n[H.Al]=E.pt.applicationName),i[H.Al]=t.applicationName,E.pt.applicationName=t.applicationName):E.c.warning("mergeContentMetadata(): applicationName was not changed.")),z.St(t.streamUrl)&&(E.pt.streamUrl!=t.streamUrl?(null!=E.pt.streamUrl&&(n[H.kl]=E.pt.streamUrl),i[H.kl]=t.streamUrl,E.pt.streamUrl=t.streamUrl,E.on=E.pt.streamUrl):E.c.warning("mergeContentMetadata(): streamUrl was not changed.")),z.St(t.viewerId)&&(E.pt.viewerId!=t.viewerId?(null!=E.pt.viewerId&&(n[H.pl]=E.pt.viewerId),i[H.pl]=t.viewerId,E.pt.viewerId=t.viewerId):E.c.warning("mergeContentMetadata(): viewerId was not changed.")),z.St(t.defaultResource)&&(E.pt.defaultResource!=t.defaultResource?(null!=E.pt.defaultResource&&(n[H.Ml]=E.pt.defaultResource),i[H.Ml]=t.defaultResource,E.pt.defaultResource=t.defaultResource):E.c.warning("mergeContentMetadata(): defaultResource was not changed.")),z.dt(t.duration)&&0<t.duration&&(E.pt.duration!=t.duration?(0<E.pr&&(n[H._l]=E.pr),i[H._l]=t.duration,E.pt.duration=t.duration,E.pr=E.pt.duration):E.c.warning("mergeContentMetadata(): duration was not changed.")),z.dt(t.encodedFrameRate)&&0<t.encodedFrameRate&&(E.pt.encodedFrameRate!=t.encodedFrameRate?(-1<E.pt.encodedFrameRate&&(n[H.Ol]=E.pt.encodedFrameRate),i[H.Ol]=t.encodedFrameRate,E.pt.encodedFrameRate=t.encodedFrameRate,E.cn=E.pt.encodedFrameRate):E.c.warning("mergeContentMetadata(): encodedFrameRate was not changed.")),t.streamType!=f.StreamType.UNKNOWN&&(E.pt.streamType!=t.streamType?(E.pt.streamType!=f.StreamType.UNKNOWN&&(E.pt.streamType==ht.ContentMetadata.StreamType.LIVE?n[H.rl]=!0:n[H.rl]=!1),t.streamType==ht.ContentMetadata.StreamType.LIVE?i[H.rl]=!0:i[H.rl]=!1,E.pt.streamType=t.streamType):E.c.warning("mergeContentMetadata(): streamType was not changed.")),0<z._t(t.custom)){var e,s={},l={};for(e in t.custom)E.pt.custom[e]!=t.custom[e]?(s[e]=t.custom[e],E.pt.custom[e]&&(l[e]=E.pt.custom[e]),E.pt.custom[e]=t.custom[e]):E.c.info("mergeContentMetadata(): custom."+e+" was not changed.");0<z._t(s)?(0<z._t(l)&&(n[H.Sl]=l),i[H.Sl]=s):E.c.warning("mergeContentMetadata(): custom was not changed.")}0<z._t(i)&&this.ka(i,n)},this.Aa=function(){var t;E.c.debug("setStatesFromContentMetadata()"),null!=E.pt.defaultResource&&this.mo(E.pt.defaultResource),null!=E.pt.streamUrl&&this.Yo(E.pt.streamUrl),0<E.pt.duration&&this.yo(E.pt.duration),0<E.pt.encodedFrameRate&&this.To(E.pt.encodedFrameRate),E.pt.streamType!==f.StreamType.UNKNOWN&&(t=E.pt.streamType===f.StreamType.LIVE,this.io(t)),null!=E.pt.assetName&&this.co(E.pt.assetName),null!=E.pt.viewerId&&this.ho(E.pt.viewerId),null==E.pt.applicationName&&null==E.pt.playerName||this.fo(E.pt.applicationName||E.pt.playerName),0<z._t(E.pt.custom)&&this.do(E.pt.custom)},this.Sa=function(){var t={};if(this.ga()||(null!=E.pt.assetName?t[H.gl]=E.pt.assetName:E.c.warning("enqueueEventForContentMetadata(): assetName was not set."),null!=E.pt.applicationName?t[H.Al]=E.pt.applicationName:E.c.warning("enqueueEventForContentMetadata(): applicationName was not set."),null!=E.pt.streamUrl?t[H.kl]=E.pt.streamUrl:E.c.warning("enqueueEventForContentMetadata(): streamUrl was not set."),null!=E.pt.viewerId?t[H.pl]=E.pt.viewerId:E.c.warning("enqueueEventForContentMetadata(): viewerId was not set."),null!=E.pt.defaultResource?t[H.Ml]=E.pt.defaultResource:E.c.warning("enqueueEventForContentMetadata(): defaultResource was not set."),-1<E.pt.duration?t[H._l]=E.pt.duration:E.c.warning("enqueueEventForContentMetadata(): duration was not set."),-1<E.pt.encodedFrameRate?t[H.Ol]=E.pt.encodedFrameRate:E.c.warning("enqueueEventForContentMetadata(): encodedFrameRate was not set."),E.pt.streamType!=f.StreamType.UNKNOWN?E.pt.streamType==ht.ContentMetadata.StreamType.LIVE?t[H.rl]=!0:t[H.rl]=!1:E.c.warning("enqueueEventForContentMetadata(): streamType was not set.")),0<z._t(E.pt.custom))for(var n in t[H.Sl]={},E.pt.custom)t[H.Sl][n]=E.pt.custom[n];else this.ga()||E.c.warning("enqueueEventForContentMetadata(): custom tags were not set.");0<z._t(t)&&this.ka(t,null)},this.ya=function(){null!=E.pt&&z.St(E.pt.assetName)||E.c.warning("Missing assetName during session creation"),null!=E.pt&&z.St(E.pt.defaultResource)||E.c.warning("Missing resource during session creation"),null!=E.pt&&z.St(E.pt.streamUrl)||E.c.warning("Missing streamUrl during session creation"),(null==E.pt||E.pt.encodedFrameRate<=0)&&E.c.warning("Missing encodedFrameRate during session creation"),null!=E.pt&&z.St(E.pt.viewerId)||E.c.warning("Missing viewerId during session creation"),null!=E.pt&&null!=E.pt.streamType&&f.StreamType.UNKNOWN!==E.pt.streamType||E.c.warning("Missing streamType during session creation"),null!=E.pt&&z.St(E.pt.applicationName)||E.c.warning("Missing applicationName during session creation"),(null==E.pt||E.pt.duration<=0)&&E.c.warning("Missing duration during session creation")},this.Bt=function(t,n){null==E.Vr&&(E.Vr={}),E.Vr[t]=n},this.Ra=function(){var t={};null!=E.Ki.N&&(t[H.Kl]=E.Ki.N,E.N=E.Ki.N),null!=E.Ki.w&&(t[H.Gl]=E.Ki.w,E.w=E.Ki.w),0<z._t(t)&&this.ka(t,null)}};j.da=H.Hu.ct+H.Hu.Gu+H.Hu.ju,j.ft={ct:"Video",Ku:"Global",At:"Ad"},at.IMonitor=function(){this.Ti=function(t){},this.Ii=function(t){},this.Ni=function(t,n){},this.ri=function(t){},this.Hh=function(t){},this.ci=function(t){},this.Kh=function(t){},this.fi=function(t){},this.Gh=function(t){},this.pi=function(t){},this.Ai=function(t){},this.wi=function(t){},this._i=function(t){},this.Y=function(t){},this.Q=function(t){},this.jh=function(t){},this.Oi=function(t,n){},this.ui=function(){},this.Pi=function(t){}};var x=at.Session=function(){var e=this;e.oe=null,e.y=0,e.ha=j.ft.ct,e.xh=!1,e.Fr=!1,e.Wh=!1,e.qh=null,e.ji=null,e.Yh=null,e.Jh=!1,e.Qh=R.PlayerState.NOT_MONITORED,e.Xh=!1,e.zh=!1,e.Zh=!1,e.$h=!1,e.tc=!1,function(t,n,i,e,s,l,u){this.y=t,this.ha=n,this.ua=i,this.nc=e,this.Et=s,this.S=l,this.c=u,this.c.setModuleName("Session"),this.c.Si(z.gt(this.y))}.apply(e,arguments),this.ra=function(t){e.Et.ra(this),null!=t&&null!=t&&e.Tt(t),e.ua.ic()?e.ec():e.ua.sc(function(){e.ec()})},this.cleanup=function(){e.c.info("cleanup()"+e.va()),e.xh=!0,e.Et.Ea(),e.ua.ic()?e.lc():e.ua.sc(function(){e.lc()})},this.uc=function(){e.c.debug("cleanupAll()"+e.va()),(e.ca()||e.fa())&&null!=e.oe&&e.oc(),e.c.Si(null),e.c=null,e.S=null,e.Ki=null,e.ua=null,e.nc=null,e.Et.rt(),e.Et=null,e.Fr=!0},this.lc=function(){e.Et.Ca(),e.uc()},this.ec=function(){e.Et.pa(),e.rc(),e.Et.wa()},this.rc=function(){e.c.debug("setStatesFromSystemMetadata()");var t=e.nc.get(),n=t[ut.BROWSER_NAME];null!=n&&e.Et.Oo(n);n=t[ut.BROWSER_VERSION];null!=n&&e.Et.Po(n);n=t[ut.DEVICE_BRAND];null!=n&&e.Et.Do(n);n=t[ut.DEVICE_MANUFACTURER];null!=n&&e.Et.bo(n);n=t[ut.DEVICE_MODEL];null!=n&&e.Et.Mo(n);n=t[ut.DEVICE_TYPE];null!=n&&e.Et.Lo(n);n=t[ut.DEVICE_VERSION];null!=n&&e.Et.Vo(n);n=t[ut.FRAMEWORK_NAME];null!=n&&e.Et.ko(n);n=t[ut.FRAMEWORK_VERSION];null!=n&&e.Et.Uo(n);n=t[ut.OPERATING_SYSTEM_NAME];null!=n&&e.Et.Fo(n);n=t[ut.OPERATING_SYSTEM_VERSION];null!=n&&e.Et.Bo(n);n=t[ut.DEVICE_CATEGORY];null!=n&&e.Et.Ho(n);n=t[ut.SCREEN_WIDTH];null!=n&&e.Et.Ko(n);n=t[ut.SCREEN_HEIGHT];null!=n&&e.Et.Go(n);t=t[ut.SCALE_FACTOR];null!=t&&e.Et.jo(t)},this.Ti=function(t){e.c.debug("onPlayerStateChange(): "+t),e.Et.Qn!=t&&(e.Et.Qn==R.PlayerState.NOT_MONITORED&&t!=R.PlayerState.NOT_MONITORED&&(e.Qh=t),e.Jh?e.c.debug("onPlayerStateChange(): "+t+" (pooled, "+(e.Wh?"ad playing":"preloading")+")"):e.Et.Se(t))},this.Ii=function(t){e.c.debug("onBitrateChange(): "+t),e.Xh?e.c.info("onBitrateChange(): ignored"):e.Et.Ua(t)},this.Mi=function(t){e.c.debug("onDroppedFramesTotalChange(): "+t),e.zh?e.c.info("onDroppedFramesTotalChange(): ignored"):e.Et.xo(t)},this.Li=function(t){e.c.debug("onDroppedFramesCountChange(): "+t),e.zh?e.c.info("onDroppedFramesCountChange(): ignored"):e.Et.$e(t)},this.Ni=function(t,n){z.dt(n)||(e.c.warning("onSeekEvent(): Ignored non-integer seekToPosition data: "+n),n=-1),e.Et.ah(t,n)},this.ri=function(t){e.c.debug("onEncodedFrameRateChange(): "+t),0<t?e.$h?e.c.info("onEncodedFrameRateChange(): Ignored encoded frame rate data: "+t+" (ads)"):(e.Et.To(t),e.c.info("onEncodedFrameRateChange(): Received encoded frame rate data: "+t)):e.c.warning("onEncodedFrameRateChange(): Ignored invalid encoded frame rate data: "+t)},this.ci=function(t){e.c.debug("onContentLengthChange(): "+t),0<t?e.$h?e.c.info("setContentLength(): Ignored content length data: "+t+" (ads)"):(e.Et.yo(t),e.c.info("setContentLength(): Received content length data: "+t)):e.c.warning("setContentLength(): Ignored invalid content length data: "+t)},this.fi=function(t){e.c.debug("onStreamUrlChange(): "+t),e.Et.Yo(t)},this.wi=function(t){e.c.debug("onStreamResolutionWidthChange(): "+t),e.Et.xa(t)},this._i=function(t){e.c.debug("onStreamResolutionHeightChange(): "+t),e.Et.qa(t)},this.Y=function(t){e.c.debug("onConnectionTypeChange(): "+t),e.Et.Xo(t)},this.Q=function(t){e.c.debug("onLinkEncryptionChange(): "+t),e.Et.zo(t)},this.pi=function(t){e.c.debug("onPlayerTypeChange(): "+t),null==e.Et.Oa()&&e.Et.ko(t)},this.Ai=function(t){e.c.debug("onPlayerVersionChange(): "+t),null==e.Et.Pa()&&e.Et.Uo(t)},this.Pi=function(t){e.c.debug("onCDNServerIPChange(): "+t),e.Et.nr(t)},this.Oi=function(t,n){e.c.debug("onError(): "+t+" ("+n+")"),e.Rt(t,n)},this.ui=function(){e.c.debug("onRelease()"),e.oc()},this.bt=function(t,n,i){e.c.debug("adStart(): adStream="+t+" adPlayer="+n+" adPosition="+i),e.Wh?e.c.warning("adStart(): multiple _adStart calls, ignoring"):(e.Wh=!0,e.qh=t,e.ji=n,e.Yh=i,e.Et.Ur||e.Et.Ga(!0),e.qh==ht.Client.AdStream.CONTENT||e.ji==ht.Client.AdPlayer.SEPARATE?(e.Et.Qn!==R.PlayerState.NOT_MONITORED&&(e.Qh=e.Et.Qn),e.Et.Se(R.PlayerState.NOT_MONITORED),e.Jh=!0):e.qh==ht.Client.AdStream.SEPARATE&&e.ji==ht.Client.AdPlayer.CONTENT&&(e.Et.Qn!==R.PlayerState.NOT_MONITORED&&(e.Qh=e.Et.Qn),e.Et.Se(R.PlayerState.NOT_MONITORED),e.Jh=!0,e.Xh=!0,e.zh=!0,e.$h=!0,e.Zh=!0,e.tc=!0))},this.Mt=function(){e.c.debug("adEnd()"),e.Wh?(e.Et.Ur||e.Et.Ga(!1),e.qh==ht.Client.AdStream.CONTENT||e.ji==ht.Client.AdPlayer.SEPARATE?e.ac||(e.Jh=!1,e.Et.Se(e.Qh)):e.qh==ht.Client.AdStream.SEPARATE&&e.ji==ht.Client.AdPlayer.CONTENT&&(e.Xh=!1,e.zh=!1,e.$h=!1,e.Zh=!1,e.tc=!1,e.ac||(e.Jh=!1,e.Et.Se(e.Qh))),e.Wh=!1,e.qh=e.ji=e.Yh=null):e.c.warning("adEnd(): called before _adStart, ignoring")},this.Ct=function(){e.c.debug("detachPlayer()"),null!=e.oe?null!==e.oe&&(e.S.P("Session.detachPlayer",function(){e.oe.oi()}),e.oe=null,e.Et.lh(null),e.Et.Se(R.PlayerState.NOT_MONITORED)):e.c.error("detachPlayer(): called before attachPlayer, ignoring")},this.oc=function(){null!==e.oe&&(e.S.P("Session.releasePlayerStateManager",function(){e.oe.oi()}),e.oe=null,e.Et.lh(null),e.Et.Se(R.PlayerState.NOT_MONITORED))},this.mt=function(){e.c.debug("offFocus()"),e.Et.Ur||e.Et.Ga(!0),e.Et.Qn!==R.PlayerState.NOT_MONITORED&&(e.Qh=e.Et.Qn),e.Et.Se(R.PlayerState.NOT_MONITORED),e.Jh=!0},this.Tt=function(t){e.c.debug("attachPlayer()"),null==e.oe?t instanceof R?e.S.P("Session.attachPlayer()",function(){t.setMonitoringNotifier(e,e.y)?(t.Ri(),e.oe=t,e.Et.lh(e.oe)):e.c.error("attachPlayer(): instance of PlayerStateManager is already attached to a session")}):e.c.error("attachPlayer(): Incorrect PlayerStateManager instance"):e.c.error("attachPlayer(): detach current PlayerStateManager first")},this.It=function(){e.c.debug("onFocus()"),e.Et.Ur||e.Et.Ga(!1),e.Xh=!1,e.zh=!1,e.$h=!1,e.Zh=!1,e.tc=!1,e.ac||(e.Jh=!1,e.Qh!==R.PlayerState.NOT_MONITORED&&e.Et.Se(e.Qh))},this.Vt=function(){return e.c.debug("getPlayerStateManager()"),e.oe},this.Nt=function(){e.c.debug("contentPreload()"),e.ac?e.c.debug("contentPreload(): called twice, ignoring"):(e.ac=!0,e.Jh=!0)},this.wt=function(){e.c.debug("contentStart()"),e.ac?(e.ac=!1,e.Wh||(e.Jh=!1,e.Qh!==R.PlayerState.NOT_MONITORED&&e.Et.Se(e.Qh))):e.c.warning("contentStart(): called without _contentPreload, ignoring")},this.Rt=function(t,n){var i;e.c.info("reportError(): "+t),z.St(t)?n===ht.Client.ErrorSeverity.FATAL||n===ht.Client.ErrorSeverity.WARNING?e.tc?e.c.debug("reportError(): ignored"):(i=n===ht.Client.ErrorSeverity.FATAL,e.Et.Za(t,i)):e.c.error("reportError(): invalid error severity: "+n):e.c.error("reportError(): invalid error message string: "+t)},this.yt=function(t){e.S.P("Session.updateContentMetadata",function(){e.Et.yt(t)})},this.Dt=function(t,n){e.c.info("sendEvent(): eventName="+t+e.va()),e.Et.hh(t,n)},this.ga=function(){return e.ha==j.ft.Ku},this.ca=function(){return e.ha==j.ft.ct},this.fa=function(){return e.ha==j.ft.At},this.va=function(){return e.ga()?" (global session)":""},this.Ut=function(){return this.y},this.Ft=function(){var t=null;return e.ua.ic()&&(t=e.ua.get(Y.D)),t},this.Bt=function(t,n){e.Et.Bt(t,n)}};x.Fh="received no response (or a bad response) to heartbeat POST request";var W=at.SessionFactory=function(){var s=this;s.c=null,s.Cn=null,s.hc=0,s.cc=null,function(t,n,i,e){s.Ki=t,s.Rn=n,s.ua=i,s.v=e,s.c=s.v.buildLogger(),s.c.setModuleName("SessionFactory"),s.hc=0,s.cc={}}.apply(s,arguments),this.rt=function(){for(var t in s.c=null,s.Cn=null,s.cc)s.cc[t].cleanup();s.cc=null,s.hc=0},this.fc=function(){var t=s.hc;return s.hc++,t},this.ht=function(t,n,i){return null==t&&(t=new f),s.dc(t,n,i)},this.B=function(t){return s.dc(t,j.ft.Ku)},this.vc=function(){return tt.Ec()},this.dc=function(t,n,i){var e=t.tt(),t=s.vc(),n=s.v.Vn(s.Ki,s.Rn,s.ua,t,n,e),e=s.fc();return s.pc(e,n),n.ra(i),e},this.Pt=function(t){t=s.cc[t];return null==t&&s.c.error("Client: invalid sessionKey. Did you cleanup that session previously?"),t},this.vt=function(t){t=this.Pt(t);return null!=t&&(t.ca()||t.fa()||(s.c.error("Client: invalid sessionKey. Did you cleanup that session previously?"),t=null)),t},this.pc=function(t,n){s.cc[t]=n},this.gc=function(t){delete s.cc[t]},this.Lt=function(t){var n=s.Pt(t);s.gc(t),n.cleanup()},this.q=function(){return s.cc}},q=at.Ac=function(t){this.Gi=t,this.Sc=function(i,t,n){var e=!1;this.Gi.createOnce(function(){e||i(!(e=!0),n+" ("+t+" ms)")},t,"CallbackWithTimeout.wrap");return function(t,n){e||(e=!0,i(t,n))}}},Y=at.Config=function(t,n,i){var e=this;this.c=t,this.c.setModuleName("Config"),this.Rc=n,this.yc=i,this.Cc={clientId:H.M,sendLogs:!1,maxHbInfos:H.Us},this.R=z.Nh(this.Cc),this.mc=!1,this.Tc=!1,this.Ic=[],this.ic=function(){return this.mc},this.ut=function(){this.Rc.ut(Y.Nc,function(t,n){t?(e.wc(n),e.c.debug("load): configuration successfully loaded from local storage"+(e.Tc?" (was empty)":"")+".")):e.c.error("load): error loading configuration from local storage: "+n),e.mc=!0,e._c()})},this.wc=function(t){t=this.yc.Yu(t);null!=t?null!=(t=t[Y.Oc])&&t!=H.M&&""!=t&&"null"!=t&&(this.R[Y.D]=t,this.c.debug("parse(): loaded clientId="+t+" (from local storage)")):this.Tc=!0},this.Pc=function(){var t={};return t[Y.Oc]=this.R.clientId,this.c.debug("marshall(): saving clientId="+this.R.clientId+" (to local storage)"),this.yc.qu(t)},this.Lh=function(){this.Rc.Lh(Y.Nc,this.Pc(),function(t,n){t?e.c.debug("save(): configuration successfully saved to local storage."):e.c.error("save(): error saving configuration to local storage: "+n)})},this.sc=function(t){this.ic()?t():this.Ic.push(t)},this.get=function(t){return this.mc?this.R[t]:null},this.set=function(t,n){this.mc&&(this.R[t]=n)},this._c=function(){for(var t;null!=(t=this.Ic.shift());)t()}};Y.Nc="sdkConfig",Y.Oc="clId",Y.D="clientId",Y.Rh="sendLogs",Y.ph="maxHbInfos",Y.mh="c3.fp.",Y.Kt={Th:"0",Dc:"1",Gt:"2",Ht:"3",Ih:"4",xt:"5",jt:"6"};var J=at.EventQueue=function(){this.bc=[],this.Mc=0,this.sh=function(t){this.bc.push(t)},this.ih=function(){var t=this.Mc;return this.Mc++,t},this.oa=function(){var t=this.bc;return this.bc=[],t}},Q=at.ExceptionCatcher=function(t,n,i){this.c=t,this.c.setModuleName("ExceptionCatcher"),this.Lc=n,this.A=i,this.P=function(n,t,i){try{t()}catch(t){if(null!=i)i(t);else{if(this.A.allowUncaughtExceptions)throw t;this.Vc(n,t)}}},this.Vc=function(t,n){var i="Uncaught exception: "+t+": "+n.toString();if(null!=this.Lc)try{this.Lc.bh(i)}catch(t){this.c.error("Caught exception while sending ping: "+t.toString())}this.c.error(i)}},X=at.GatewayControl=function(t,n,i,e,s){var l=this;this.Rn=t,this.c=n,this.c.setModuleName("GatewayControl"),this.kc=i,this.yc=e,this.Uc=s,this.bh=function(t,e){var n=this.yc.qu(t),t=(null!=this.Uc?-1<this.Uc.indexOf("ipv4")?this.Rn.L:this.Rn.H:this.Rn.gatewayUrl)+H.Vs;this.kc.Fc("POST",t,n,"application/json",function(t,n){var i;t?(i=l.yc.Yu(n),e(t,i)):e(t,n)})}},z=at.Lang={};z.Bc=function(t){return z.St(t)&&null!=t&&"undefined"!=t&&"null"!=t},z.Ot=function(t){var n,i,e={};for(n in t)z.Bc(n)&&(i=t[n],z.Bc(i)&&(e[n]=i));return e},z.ai=function(t,n,i){if(null==t)throw new Error("Expected "+i+" implementation is null.");for(var e in n)if("function"!=typeof t[e])throw new Error("Expected method "+e+" in "+i+" implementation.")},z._t=function(t){var n,i=0;for(n in t)t.hasOwnProperty(n)&&i++;return i},z.gt=function(t){return""+t},z.Hc=function(t){return Math.floor(t)},z.Xt=function(t){return Math.abs(z.Hc(t))},z.Vh=function(t){return Boolean(t)},z.St=function(t){return"string"==typeof t&&""!==t},z.Uh=function(t,n){return"string"==typeof t&&"string"==typeof n&&("function"==typeof t.indexOf&&0===t.indexOf(n))},z.Hn=function(t){return"boolean"==typeof t},z.Kc=function(t){return escape(t)},z.Ju=function(t){return"object"==typeof t},z.Va=function(t){var n,i="";for(n in t)i+=n+"="+t[n];return"Object{"+i+"}"},z.Gc=function(t){var n,i=z.Nh(t);for(n in i)null==i[n]&&delete i[n];return i},z.Nh=function(t){var n,i={};for(n in t)i[n]=t[n];return i},z.Ka=function(t,n){if(typeof t!=typeof n)return!1;if(t instanceof Object&&n instanceof Object){if(z._t(t)!==z._t(n))return!1;for(var i in t)if(!(t[i]===n[i]))return!1;return!0}return t===n},z.hs=function(){for(var t={},n=0;n<arguments.length;n++)for(var i in arguments[n])null!=arguments[n][i]&&null!=arguments[n][i]&&(t[i]=arguments[n][i]);return t},z.dt=function(t){return"number"==typeof t&&Math.round(t)===t},z.jc=function(t){return"[object Array]"===Object.prototype.toString.call(t)},z.xc=function(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(t.length!=n.length)return!1;for(var i=0;i<t.length;++i)if(z.jc(t[i])&&z.jc(n[i])){if(!z.xc(t[i],n[i]))return!1}else if(t[i]!==n[i])return!1;return!0},z.Wc=function(){return void 0!==Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(t){return!1}}()},z.qt=function(t,n,i){if(z.Wc())Object.defineProperty(t,n,{configurable:!0,enumerable:!0,get:i});else{if(void 0===t.__defineGetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineGetter__");t.__defineGetter__(n,i)}},z.Yt=function(t,n,i){if(z.Wc())Object.defineProperty(t,n,{configurable:!0,set:i});else{if(void 0===t.__defineSetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineSetter__");t.__defineSetter__(n,i)}},z.Oh=function t(n){function i(t,n){return t>>>n|t<<32-n}for(var e,s,l=Math.pow,u=l(2,32),o="length",r="",a=[],h=8*n[o],c=t.h=t.h||[],f=t.k=t.k||[],d=f[o],v={},E=2;d<64;E++)if(!v[E]){for(e=0;e<313;e+=E)v[e]=E;c[d]=l(E,.5)*u|0,f[d++]=l(E,1/3)*u|0}for(n+="\0";n[o]%64-56;)n+="\0";for(e=0;e<n[o];e++){if((s=n.charCodeAt(e))>>8)return;a[e>>2]|=s<<(3-e)%4*8}for(a[a[o]]=h/u|0,a[a[o]]=h,s=0;s<a[o];){var p=a.slice(s,s+=16),g=c;for(c=c.slice(0,8),e=0;e<64;e++){var A=p[e-15],S=p[e-2],R=c[0],y=c[4],S=c[7]+(i(y,6)^i(y,11)^i(y,25))+(y&c[5]^~y&c[6])+f[e]+(p[e]=e<16?p[e]:p[e-16]+(i(A,7)^i(A,18)^A>>>3)+p[e-7]+(i(S,17)^i(S,19)^S>>>10)|0);(c=[S+((i(R,2)^i(R,13)^i(R,22))+(R&c[1]^R&c[2]^c[1]&c[2]))|0].concat(c))[4]=c[4]+S|0}for(e=0;e<8;e++)c[e]=c[e]+g[e]|0}for(e=0;e<8;e++)for(s=3;s+1;s--){var C=c[e]>>8*s&255;r+=(C<16?0:"")+C.toString(16)}return r},function(){var n={two32:4294967296};n.qc=n.two32-1,n.Yc=0,z.Jc=n,z.Jc.Cast=function(t){t=parseInt(t,10);return t>n.qc?t%=n.two32:t<n.Yc&&(t=-t%n.two32,t=n.two32-t),t},z.Jc.Qc=function(t){t=parseInt(t,10);return t<=n.qc&&t>=n.Yc};var i={qc:2147483647,Yc:-2147483648};z.Dh=i,z.Dh.Cast=function(t){t=parseInt(t,10);return t>i.qc?t%=i.qc:t<i.Yc&&(t=-t%i.qc,t=i.qc-t),t},z.Dh.Qc=function(t){t=parseInt(t,10);return t<=i.qc&&t>=i.Yc}}();var Z=at.LogBuffer=function(){this.Xc=[],this.zc=function(t){32<=this.Xc.length&&this.Xc.shift(),this.Xc.push(t)},this.oa=function(){var t=this.Xc;return this.Xc=[],t}},$=at.Ping=function(t,n,i,e){this.Zc=!1,this.$c=null,this.c=t,this.c.setModuleName("Ping"),this.kc=n,this.Rn=i,this.yn=e,this.bh=function(t){this.Zc||(this.Zc=!0,t=this.tf()+"&d="+z.Kc(t.toString()),this.c.error("send(): "+t),this.kc.Fc("GET",t,null,null,null),this.Zc=!1)},this.tf=function(){if(!this.$c){var t=$.nf+"?comp="+$.if+"&clv="+(this.yn||ht.Client.version);if(this.Rn&&(t+="&cid="+this.Rn.customerKey),t+="&sch="+H.Ks,!this.Rn)return t;this.$c=t}return this.$c}};$.if="sdkjs",$.nf="https://pings.conviva.com/ping.ping";var tt=at.ef={};tt.sf=4294967295,tt.lf=2147483647,tt.uf=-2147483648,tt.Ec=function(){return Math.floor(Math.random()*tt.sf)+tt.uf},tt.et=function(){return Math.floor(Math.random()*tt.sf)};var nt=at.rf={};nt.eh=function(t,n,i,e){if(isNaN(t))return e;if("number"!=typeof t)return e;if(t==e)return e;t=z.Hc(t);return nt.af(t,n,i)},nt.af=function(t,n,i){return null!=i&&i<t?t=i:null!=n&&t<n&&(t=n),t},nt.hn=function(t){return-1==t||-2==t?t:t=nt.eh(t,0,null,-1)};var it=at.StreamerError=function(){var i=this;i.errorCode=null,i.severity=r.ErrorSeverity.FATAL,function(t,n){i.errorCode=t,i.severity=n}.apply(i,arguments),this._s=function(){return i.errorCode},this.Os=function(){return i.severity}},et=at.HttpClient=function(t,n,i,e){this.c=t,this.c.setModuleName("HttpClient"),this.En=n,this.hf=i,this.A=e,this.Fc=function(t,n,i,e,s){var l=1e3*this.A.httpTimeout,u=null;null!=s&&(u=this.hf.Sc(s,l,"HTTP timeout")),this.c.debug("request(): calling HttpInterface.makeRequest"),this.En.makeRequest(t,n,i,e,l,u)}},st=at.Logger=function(t,n,i,e,s){this.An=t,this.dn=n,this.g=i,this.Cn=e,this.Sn=s,this.debug=function(t){this.log(t,c.LogLevel.DEBUG)},this.info=function(t){this.log(t,c.LogLevel.INFO)},this.warning=function(t){this.log(t,c.LogLevel.WARNING)},this.error=function(t){this.log(t,c.LogLevel.ERROR)},this.log=function(t,n){t=this.cf(t,n);this.Cn.zc(t),this.g.logLevel<=n&&this.An.consoleLog(t,n)},this.ff=function(t){return"["+this.ti+"] "+t},this.df=function(t){return"["+this.Sn+"] "+t},this.vf=function(t){return"[Conviva] "+t},this.Ef=function(t){return"["+(this.dn.getEpochTimeMs()/1e3).toFixed(3).toString()+"] "+t},this.pf=function(t,n){return"["+st.gf(n)+"] "+t},this.Af=function(t){return null!=this.Sf&&(t="sid="+this.Sf+" "+t),t},this.Si=function(t){this.Sf=t},this.setModuleName=function(t){this.ti=t},this.cf=function(t,n){return this.vf(this.Ef(this.pf(this.df(this.ff(this.Af(t))),n)))}};st.gf=function(t){var n;switch(t){case c.LogLevel.ERROR:n="ERROR";break;case c.LogLevel.WARNING:n="WARNING";break;case c.LogLevel.INFO:n="INFO";break;case c.LogLevel.DEBUG:n="DEBUG"}return n};var lt=at.Storage=function(t,n,i,e){this.c=t,this.c.setModuleName("Storage"),this.pn=n,this.hf=i,this.A=e,this.ut=function(t,n){n=this.hf.Sc(n,1e3*this.A.storageTimeout,"storage load timeout");this.c.debug("load): calling StorageInterface.loadData"),this.pn.loadData(lt.Rf,t,n)},this.Lh=function(t,n,i){i=this.hf.Sc(i,1e3*this.A.storageTimeout,"storage save timeout");this.c.debug("save(): calling StorageInterface.saveData"),this.pn.saveData(lt.Rf,t,n,i)}};lt.Rf="Conviva";var ut=at.SystemMetadata=function(t,n,i){this.c=t,this.c.setModuleName("SystemMetadata"),this.gn=n,this.S=i,this.yf=null,this.get=function(){return this.yf||this.retrieve(),this.yf},this.retrieve=function(){var t={};t[ut.BROWSER_NAME]=this.gn.getBrowserName,t[ut.BROWSER_VERSION]=this.gn.getBrowserVersion,t[ut.DEVICE_BRAND]=this.gn.getDeviceBrand,t[ut.DEVICE_MANUFACTURER]=this.gn.getDeviceManufacturer,t[ut.DEVICE_MODEL]=this.gn.getDeviceModel,t[ut.DEVICE_TYPE]=this.gn.getDeviceType,t[ut.DEVICE_VERSION]=this.gn.getDeviceVersion,t[ut.FRAMEWORK_NAME]=this.gn.getFrameworkName,t[ut.FRAMEWORK_VERSION]=this.gn.getFrameworkVersion,t[ut.OPERATING_SYSTEM_NAME]=this.gn.getOperatingSystemName,t[ut.OPERATING_SYSTEM_VERSION]=this.gn.getOperatingSystemVersion,t[ut.DEVICE_CATEGORY]=this.gn.getDeviceCategory,t[ut.SCREEN_WIDTH]=this.gn.getScreenWidth,t[ut.SCREEN_HEIGHT]=this.gn.getScreenHeight,t[ut.SCALE_FACTOR]=this.gn.getScaleFactor;var n,e=this;for(n in this.c.debug("retrieve(): calling MetadataInterface methods"),t)!function(n,i){e.S.P("Session.getSystemMetadataSchema(): "+n,function(){var t=i[n];i[n]=t.call(e.gn)})}(n,t),z.St(t[n])||delete t[n];var i=!1;if(void 0!==t[ut.DEVICE_TYPE]){for(var s in ht.Client.DeviceType)if(t[ut.DEVICE_TYPE]===ht.Client.DeviceType[s]){i=!0;break}i||delete t[ut.DEVICE_TYPE]}if(i=!1,void 0!==t[ut.DEVICE_CATEGORY]){for(var l in ht.Client.DeviceCategory)if(t[ut.DEVICE_CATEGORY]===ht.Client.DeviceCategory[l]){i=!0;break}i||delete t[ut.DEVICE_CATEGORY]}this.yf=z.Gc(t)}};ut.BROWSER_NAME="browserName",ut.BROWSER_VERSION="browserVersion",ut.DEVICE_BRAND="deviceBrand",ut.DEVICE_MANUFACTURER="deviceManufacturer",ut.DEVICE_MODEL="deviceModel",ut.DEVICE_TYPE="deviceType",ut.DEVICE_VERSION="deviceVersion",ut.FRAMEWORK_NAME="frameworkName",ut.FRAMEWORK_VERSION="frameworkVersion",ut.OPERATING_SYSTEM_NAME="operatingSystemName",ut.OPERATING_SYSTEM_VERSION="operatingSystemVersion",ut.DEVICE_CATEGORY="deviceCategory",ut.SCREEN_WIDTH="screenWidth",ut.SCREEN_HEIGHT="screenHeight",ut.SCALE_FACTOR="scaleFactor";var ot=at.Time=function(t,n){this.dn=t,this.c=n,this.c.setModuleName("Time"),this.current=function(){var t=this.dn.getEpochTimeMs();return z.dt(t)||this.c.error("current(): TimeInterface.getEpochTimeMs() did not return an integer ("+t+")"),t}},rt=at.Timer=function(t,n,i){var s=this;this.c=t,this.c.setModuleName("Timer"),this.vn=n,this.S=i,this.create=function(t,n,i){return this.createTimer(function(){s.S.P(i,function(){t()})},n,i)},this.createOnce=function(t,n,i){var e={cancel:null},n=this.createTimer(function(){s.S.P(i,function(){e&&"function"==typeof e.cancel&&(e.cancel(),e.cancel=null,e=null),t()})},n,i);return e.cancel=n},this.createTimer=function(t,n,i){return this.c.debug("createTimer(): calling TimerInterface.create"),this.vn.createTimer(t,n,i)}}}()}(),ht});