/*! (C) 2020 Conviva, Inc. All rights reserved. Confidential and proprietary. */

!function(n,t){"function"==typeof define&&define.amd?define(t):("object"==typeof exports||"object"==typeof module&&module.exports)&&(module.exports=t()),void 0!==n&&void 0===n.Conviva&&(n.ConvivaLoading||(n.ConvivaLoading=!0,n.Conviva=t(),delete n.ConvivaLoading))}(this,function(){var fn={};return function(){"use strict";var an={};!function(){var N=fn.Constants={};N.version="4.1.2",N.CUSTOMER_KEY="customerKey",N.GATEWAY_URL="gatewayUrl",N.LOG_LEVEL="logLevel",N.ASSET_NAME="Conviva.assetName",N.PLAYER_NAME="Conviva.applicationName",N.APPLICATION_VERSION="c3.app.version",N.IS_LIVE="Conviva.streamType",N.ENCODED_FRAMERATE="Conviva.encodedFrameRate",N.DEFAULT_RESOURCE="Conviva.defaultResource",N.STREAM_URL="Conviva.streamUrl",N.VIEWER_ID="Conviva.viewerId",N.DURATION="Conviva.duration",N.POD_INDEX="podIndex",N.POD_POSITION="podPosition",N.POD_DURATION="podDuration",N.MODULE_NAME="Conviva.moduleName",N.MODULE_VERSION="Conviva.moduleVersion",N.FRAMEWORK_NAME="Conviva.frameworkName",N.FRAMEWORK_VERSION="Conviva.frameworkVersion",N.i="Constants not yet configured",N.u="Invalid : Did you report playback ended?",N.s="Invalid : Did you report ad playback ended?",N.e="Player cannot be null",N.l="PlaybackAnlytics already built",N.o="PlaybackAnlytics not yet built",N.Playback={BITRATE:"BITRATE",PLAY_HEAD_TIME:"PLAY_HEAD_TIME",RESOLUTION:"RESOLUTION",BUFFER_LENGTH:"BUFFER_LENGTH",PLAYER_STATE:"PLAYER_STATE",RENDERED_FRAMERATE:"RENDERED_FRAMERATE",SEEK_STARTED:"SEEK_STARTED",SEEK_ENDED:"SEEK_ENDED",CDN_IP:"CDN_IP",DROPPED_FRAMES_TOTAL:"DROPPED_FRAMES_TOTAL",DROPPED_FRAMES_COUNT:"DROPPED_FRAMES_COUNT"},N.Network={SIGNAL_STRENGTH:"SIGNAL_STRENGTH",LINK_ENCRYPTION:"LINK_ENCRYPTION",CONNECTION_TYPE:"CONNECTION_TYPE"},N.ErrorSeverity={FATAL:1,WARNING:0},N.NO_SESSION_KEY=-2,N.AdPosition={PREROLL:"Pre-roll",MIDROLL:"Mid-roll",POSTROLL:"Post-roll"},N.AdPlayer={CONTENT:"CONTENT",SEPARATE:"SEPARATE"},N.DeviceType={DESKTOP:"DESKTOP",CONSOLE:"Console",SETTOP:"Settop",MOBILE:"Mobile",TABLET:"Tablet",SMARTTV:"SmartTV"},N.AdType={CLIENT_SIDE:"Client Side",SERVER_SIDE:"Server Side"},N.AdSlates={BLACKOUT_SLATE:"Blackout slate",TECHNICAL_DIFFICULTIES_SLATE:"Technical Difficulties slate",COMMERCIAL_SLATE:"Commercial Break slate",OTHER_SLATE:"Other slate",VPAID:"VPAID",REGULAR:"Regular Ad"},N.AdServingType={INLINE:"Inline",WRAPPER:"Wrapper"},N.DeviceCategory={ANDROID_DEVICE:"AND",APPLE_DEVICE:"APL",CHROMECAST:"CHR",DESKTOP_APP:"DSKAPP",DEVICE_SIMULATOR:"SIMULATOR",LG_TV:"LGTV",NINTENDO:"NINTENDO",PLAYSTATION:"PS",ROKU:"RK",SAMSUNG_TV:"SAMSUNGTV",SMART_TV:"TV",SET_TOP_BOX:"STB",TIVO:"TIVO",WEB:"WEB",WINDOWS_DEVICE:"WIN",XBOX:"XB",KAIOS_DEVICE:"KAIOS"},N.LogLevel={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},N.PlayerState={STOPPED:"STOPPED",PLAYING:"PLAYING",BUFFERING:"BUFFERING",PAUSED:"PAUSED",UNKNOWN:"UNKNOWN",NOT_MONITORED:"NOT_MONITORED"},N.Events={USER_WAIT_STARTED:"Conviva.UserWaitStarted",USER_WAIT_ENDED:"Conviva.UserWaitEnded",BUMPER_VIDEO_STARTED:"Conviva.BumperVideoStarted",BUMPER_VIDEO_ENDED:"Conviva.BumperVideoEnded",AD_REQUESTED:"Conviva.AdRequested",AD_RESPONSE:"Conviva.AdResponse",AD_SLOT_STARTED:"Conviva.SlotStarted",AD_ATTEMPTED:"Conviva.AdAttempted",AD_SLOT_ENDED:"Conviva.SlotEnded",AD_IMPRESSION_START:"Conviva.AdImpression",AD_START:"Conviva.AdStart",AD_FIRST_QUARTILE:"Conviva.AdFirstQuartile",AD_MID_QUARTILE:"Conviva.AdMidQuartile",AD_THIRD_QUARTILE:"Conviva.AdThirdQuartile",AD_COMPLETE:"Conviva.AdComplete",AD_END:"Conviva.AdEnd",AD_IMPRESSION_END:"Conviva.AdImpressionEnd",AD_SKIPPED:"Conviva.AdSkipped",AD_ERROR:"Conviva.AdError",AD_PROGRESS:"Conviva.AdProgress",AD_CLOSE:"Conviva.AdClose",CONTENT_PAUSED:"Conviva.PauseContent",CONTENT_RESUMED:"Conviva.ResumeContent",POD_START:"Conviva.PodStart",POD_END:"Conviva.PodEnd"},N.ErrorType={ERROR_UNKNOWN:"ERROR_UNKNOWN",ERROR_IO:"ERROR_IO",ERROR_TIMEOUT:"ERROR_TIMEOUT",ERROR_NULL_ASSET:"ERROR_NULL_ASSET",ERROR_MISSING_PARAMETER:"ERROR_MISSING_PARAMETER",ERROR_NO_AD_AVAILABLE:"ERROR_NO_AD_AVAILABLE",ERROR_PARSE:"ERROR_PARSE",ERROR_INVALID_VALUE:"ERROR_INVALID_VALUE",ERROR_INVALID_SLOT:"ERROR_INVALID_SLOT",ERROR_3P_COMPONENT:"ERROR_3P_COMPONENT",ERROR_UNSUPPORTED_3P_FEATURE:"ERROR_UNSUPPORTED_3P_FEATURE",ERROR_DEVICE_LIMIT:"ERROR_DEVICE_LIMIT",ERROR_UNMATCHED_SLOT_SIZE:"ERROR_UNMATCHED_SLOT_SIZE"},N.StreamType={UNKNOWN:"UNKNOWN",LIVE:"LIVE",VOD:"VOD"},N.CallbackFunctions={CONSOLE_LOG:"consoleLog",MAKE_REQUEST:"makeRequest",SAVE_DATA:"saveData",LOAD_DATA:"loadData",GET_EPOCH_TIME_IN_MS:"getEpochTimeInMs",CREATE_TIMER:"createTimer"},N.DeviceMetadata={BRAND:"DeviceBrand",MANUFACTURER:"DeviceManufacturer",MODEL:"DeviceModel",TYPE:"DeviceType",VERSION:"DeviceVersion",OS_NAME:"OperatingSystemName",OS_VERSION:"OperatingSystemVersion",CATEGORY:"DeviceCategory",SCREEN_RESOLUTION_WIDTH:"ScreenWidth",SCREEN_RESOLUTION_HEIGHT:"ScreenHeight",SCREEN_RESOLUTION_SCALE_FACTOR:"ScaleFactor"},N.AD_PRELOAD_FEATURE="adPreloading",N.AD_TAG_URL="adTagUrl",N.IMASDK_CONTENT_PLAYER="imaMainContentPlayer",N.CONVIVA_AD_MODULE="convivaAdModule",N.CONVIVA_MODULE="convivaModule",N.MEDIA_ELEMENT="mediaElement";var r=fn.Client=function(n,t){var l=this;this.a=!1,this.version=r.version,this.c=null,this.v=null,this.d=null,this.R=-1,this.T=null,this.w=null,this.N=null,this.S=null,this.g=-1,this.p=!1,this._={},this.O=function(n){l.c,0},this.C={},this.A=null,this.I=null,this.m=null,this.D=function(){this.N.y("Client.makeIPV4IPV6GlobalSessions",function(){var n;!l.S||null!==(n=l.S.get(Y.P))&&n!==B.M&&l.v&&((n=new c).custom["c3.IPV4IPV6GlobalSession"]="T",n.custom["c3.domain"]=-1<l.T.L.indexOf(h.U)?h.U:h.V,l.F=l.v.H(n,null),(n=new c).custom["c3.IPV4IPV6GlobalSession"]="T",n.custom["c3.domain"]=-1<l.T.B.indexOf(h.G)?h.G:h.K,l.j=l.v.H(n,null))})},this.W=function(i){l.N.y("Client.updateConnectionType",function(){if(l.A=i,l.v){var n,t=l.v.q();for(n in t)t[n].Y(i)}})},this.J=function(i){l.N.y("Client.updateLinkEncryption",function(){if(l.I=i,l.v){var n,t=l.v.q();for(n in t)t[n].Q(i)}})},this.X=function(n){l.N.y("Client.updateSignalStrength",function(){l.m=n})},function(n,t,i,u){if(!(n instanceof h))throw new Error("clientSettings parameter should be an instance of ClientSettings.");if(!(t instanceof a))throw new Error("systemFactory parameter should be an instance of SystemFactory.");n.gatewayUrl!=h.Z+h.z&&n.gatewayUrl!=h.$+h.z||(this.a=!0),u&&(this.version=u),this.T=n.nn(),this.d=t,this.d.tn("SDK",this.T,this.version),this.N=this.d.in(),this.N.y("Client.init",function(){if(l.g=nn.un(),l.S=l.d.sn(),l.S.en(),l.v=l.d.ln(l,l.T,l.S),i)for(var n in i)switch(n){case fn.Constants.Network.CONNECTION_TYPE:l.W(i[n]);break;case fn.Constants.Network.LINK_ENCRYPTION:l.J(i[n]);break;case fn.Constants.Network.SIGNAL_STRENGTH:l.X(i[n])}l.D()},function(n){throw new Error("Client constructor failed: "+n.message)})}.apply(this,arguments),this.release=function(){this.p||this.N.y("Client.release",function(){l.c,l.v.on(),l.v=null,l.R=-1,l.g=-1,l.N=null,l.T=null,l.w=null,l.d=null,l.p=!0})},this.createSession=function(n,t){var i=r.NO_SESSION_KEY;return this.p||(null==n||n instanceof c)&&this.N.y("Client.createSession",function(){i=l.v.rn(n,j.an.hn,t)}),i},this.createAdSession=function(i,u,s){var e=r.NO_SESSION_KEY;return this.p||(null==u||u instanceof c)&&this.N.y("Client.createAdSession",function(){var n,t;null==u&&(u=new c),!Z.fn(i)||i==r.NO_SESSION_KEY||null!=(n=l.v.cn(i))&&(t=u.custom[fn.Constants.APPLICATION_VERSION],(null==u.applicationName||null==u.viewerId||void 0===t&&null==t)&&null!=n.vn&&null!=n.vn.En&&(null==u.viewerId&&null!=n.vn.En.viewerId&&(u.viewerId=n.vn.En.viewerId),null==u.applicationName&&null!=n.vn.En.applicationName&&(u.applicationName=n.vn.En.applicationName),void 0!==t||null!=t||void 0!==(t=n.vn.En.custom[fn.Constants.APPLICATION_VERSION])&&t&&(u.custom[fn.Constants.APPLICATION_VERSION]=t)),u.custom["c3.csid"]=Z.dn(n.g)),e=l.v.rn(u,j.an.Rn,s)}),e},this.reportError=function(t,i,u){this.p||Z.Tn(i)&&(u!==fn.Client.ErrorSeverity.FATAL&&u!==fn.Client.ErrorSeverity.WARNING||this.N.y("Client.reportError",function(){var n=l.v.cn(t);null!=n&&n.wn(i,u)}))},this.updateContentMetadata=function(i,u){this.p||u instanceof c&&this.N.y("Client.updateContentMetadata",function(){var n,t=l.v.cn(i);null!=t&&(n=u.nn(),t.Nn(n))})},this.detachPlayer=function(t){this.p||this.N.y("Client.detachPlayer",function(){var n=l.v.cn(t);null!=n&&n.Sn()})},this.gn=function(t){this.p||this.N.y("Client.offFocus",function(){var n=l.v.cn(t);null!=n&&n.gn()})},this.attachPlayer=function(t,i){this.p||i instanceof S&&this.N.y("Client.attachPlayer",function(){var n=l.v.cn(t);null!=n&&n.pn(i)})},this._n=function(t){this.p||this.N.y("Client.onFocus",function(){var n=l.v.cn(t);null!=n&&n._n()})},this.contentPreload=function(t){this.p||this.N.y("Client.contentPreload",function(){var n=l.v.cn(t);null!=n&&n.On()})},this.contentStart=function(t){this.p||this.N.y("Client.contentStart",function(){var n=l.v.cn(t);null!=n&&n.Cn()})},this.sendCustomEvent=function(i,u,s){this.p||Z.Tn(u)&&(Z.An(s),this.N.y("Client.sendCustomEvent",function(){i==r.NO_SESSION_KEY&&(l.R<0&&(t=new c,l.R=l.v.H(t,null)),i=l.R);var n=Z.In(s),t=l.v.mn(i);null!=t&&t.Dn(u,n)}))},this.adStart=function(t,i,u,s){this.p||i!==r.AdStream.CONTENT&&i!==r.AdStream.SEPARATE||u!==r.AdPlayer.CONTENT&&u!==r.AdPlayer.SEPARATE||(s!==r.AdPosition.PREROLL&&s!==r.AdPosition.MIDROLL&&r.AdPosition.POSTROLL,this.N.y("Client.adStart",function(){var n=l.v.cn(t);null!=n&&n.yn(i,u,s)}))},this.adEnd=function(t){this.p||this.N.y("Client.adEnd",function(){var n=l.v.cn(t);null!=n&&n.Pn()})},this.cleanupSession=function(n){this.p||n!==r.NO_SESSION_KEY&&this.N.y("Client.cleanupSession",function(){null!=l.v.cn(n)&&l.v.bn(n)})},this.getAttachedPlayer=function(t){var i=null;return this.p||t===r.NO_SESSION_KEY||this.N.y("Client.getAttachedPlayer",function(){var n=l.v.cn(t);null!=n&&(i=n.Mn())}),i},this.isPlayerAttached=function(n){return!this.p&&null!==this.getAttachedPlayer(n)},this.getPlayerStateManager=function(){if(this.p)throw new Error("This instance of Conviva.Client has been released.");return new S(this.d)},this.releasePlayerStateManager=function(n){if(this.p)throw new Error("This instance of Conviva.Client has been released.");this.N.y("Client.releasePlayerStateManager",function(){n instanceof S&&n.release()})},this.Ln=function(){return this.T},this.getId=function(){return this.g},this.getSessionId=function(t){if(!this.p){var i=null;return this.N.y("Client.getSessionId",function(){var n=l.v.cn(t);null!=n&&(i=n.Un())}),i}},this.getClientId=function(t){if(!this.p){var i=null;return this.N.y("Client.getClientId",function(){var n=l.v.cn(t);null!=n&&(i=n.Vn())}),i}},this.kn=function(t,i,u){this.p||this.N.y("Client.updateCustomMetric",function(){var n=l.v.cn(t);null!=n&&n.kn(i,u)})},this.setUniqueIdentifier=function(n,t){if(this.p)throw new Error("This instance of Conviva.Client has been released.");if(null==n||void 0===n||"{}"==JSON.stringify(n))throw new Error("Identifiers are not set. No action taken !!");for(var i in n)this._[i]=n[i];t&&(this.O=t)},this.setUserPreferenceForDataCollection=function(n,t){if(this.p)throw new Error("This instance of Conviva.Client has been released.");if(null==n||void 0===n||"{}"==JSON.stringify(n))throw new Error("Identifiers are not set. No action taken !!");for(var i in n)"false"==n[i]?this.C[i]=t?Y.Hn.Fn:Y.Hn.Bn:this.C[i]=Y.Hn.Gn},this.setUserPreferenceForDataDeletion=function(n){if(this.p)throw new Error("This instance of Conviva.Client has been released.");if(null==n||void 0===n||"{}"==JSON.stringify(n))throw new Error("Identifiers are not set. No action taken !!");for(var t in n)"true"==n[t]?this.C[t]=Y.Hn.Kn:this.C[t]=Y.Hn.Gn}};r.version="4.1.2L",r.NO_SESSION_KEY=N.NO_SESSION_KEY,r.AdPosition={PREROLL:N.AdPosition.PREROLL,MIDROLL:N.AdPosition.MIDROLL,POSTROLL:N.AdPosition.POSTROLL},r.AdStream={CONTENT:N.AdPlayer.CONTENT,SEPARATE:N.AdPlayer.SEPARATE},r.AdPlayer={CONTENT:N.AdPlayer.CONTENT,SEPARATE:N.AdPlayer.SEPARATE},r.ErrorSeverity={FATAL:N.ErrorSeverity.FATAL,WARNING:N.ErrorSeverity.WARNING},r.DeviceType={DESKTOP:N.DeviceType.DESKTOP,CONSOLE:N.DeviceType.CONSOLE,SETTOP:N.DeviceType.SETTOP,MOBILE:N.DeviceType.MOBILE,TABLET:N.DeviceType.TABLET,SMARTTV:N.DeviceType.SMARTTV},r.AdTechnology={CLIENT_SIDE:N.AdType.CLIENT_SIDE,SERVER_SIDE:N.AdType.SERVER_SIDE},r.AdType={BLACKOUT_SLATE:N.AdSlates.BLACKOUT_SLATE,TECHNICAL_DIFFICULTIES_SLATE:N.AdSlates.TECHNICAL_DIFFICULTIES_SLATE,COMMERCIAL_SLATE:N.AdSlates.COMMERCIAL_SLATE,OTHER_SLATE:N.AdSlates.OTHER_SLATE,VPAID:N.AdSlates.VPAID,REGULAR:N.AdSlates.REGULAR},r.AdServingType={INLINE:N.AdServingType.INLINE,WRAPPER:N.AdServingType.WRAPPER},r.DeviceCategory={ANDROID_DEVICE:N.DeviceCategory.ANDROID_DEVICE,APPLE_DEVICE:N.DeviceCategory.APPLE_DEVICE,CHROMECAST:N.DeviceCategory.CHROMECAST,DESKTOP_APP:N.DeviceCategory.DESKTOP_APP,DEVICE_SIMULATOR:N.DeviceCategory.DEVICE_SIMULATOR,LG_TV:N.DeviceCategory.LG_TV,NINTENDO:N.DeviceCategory.NINTENDO,PLAYSTATION:N.DeviceCategory.PLAYSTATION,ROKU:N.DeviceCategory.ROKU,SAMSUNG_TV:N.DeviceCategory.SAMSUNG_TV,SMART_TV:N.DeviceCategory.SMART_TV,SET_TOP_BOX:N.DeviceCategory.SET_TOP_BOX,TIVO:N.DeviceCategory.TIVO,WEB:N.DeviceCategory.WEB,WINDOWS_DEVICE:N.DeviceCategory.WINDOWS_DEVICE,XBOX:N.DeviceCategory.XBOX,KAIOS_DEVICE:N.DeviceCategory.KAIOS_DEVICE};var h=fn.ClientSettings=function(n){var i=this;this.jn=null,Z.Wn(this,"customerKey",function(){return this.jn}),Z.xn(this,"customerKey",function(n){Z.Tn(n)&&(this.jn=n)}),this.qn=h.Yn,Z.Wn(this,"heartbeatInterval",function(){return this.qn}),Z.xn(this,"heartbeatInterval",function(n){var t;"number"!=typeof n||(t=Z.Jn(n))===n&&(this.qn=t)}),this.Qn=null,this.L=null,this.B=null,Z.Wn(this,"gatewayUrl",function(){return this.Qn}),Z.xn(this,"gatewayUrl",function(n){var t;Z.Tn(n)&&("https"!=(t=n.split("://"))[0]&&"http"!=t[0]||-1!==n.indexOf(".com",n.length-".com".length)&&(this.Qn=n))}),function(n){if(!Z.Tn(n))throw new Error("customerKey must be valid");this.customerKey=n}.apply(this,arguments),this.equals=function(n){return this.customerKey===n.customerKey&&this.gatewayUrl===n.gatewayUrl&&this.heartbeatInterval===n.heartbeatInterval},this.nn=function(){var n=new h(this.customerKey);return n.gatewayUrl=function(n){if(Z.Tn(n)){var t=n.split("://");if(-1==t[1].indexOf("cws.conviva.com")&&("https"==t[0]||"http"==t[0]))return i.L="https://"+h.V,i.B="https://"+h.K,n}return i.L="https://"+h.U,i.B="https://"+h.G,"https://"+i.customerKey+"."+h.z}(this.gatewayUrl),n.heartbeatInterval=this.heartbeatInterval,n.L=this.L,n.B=this.B,n}};h.Xn="https://conviva.testonly.conviva.com",h.Zn="https://cws.conviva.com",h.z="cws.conviva.com",h.U="ipv4.cws.conviva.com",h.G="ipv6.cws.conviva.com",h.zn="conviva.testonly.conviva.com",h.V="ipv4.testonly.conviva.com",h.K="ipv6.testonly.conviva.com",h.Z="https://",h.$="http://",h.$n=5,h.Yn=20;var c=fn.ContentMetadata=function(){this.nt=null,Z.Wn(this,"assetName",function(){return this.nt}),Z.xn(this,"assetName",function(n){if("string"!=typeof n)return;this.nt=n}),this.tt={},Z.Wn(this,"custom",function(){return this.tt}),Z.xn(this,"custom",function(n){if("object"!=typeof n)return;this.tt=Z.In(n)}),this.it=null,Z.Wn(this,"defaultResource",function(){return this.it}),Z.xn(this,"defaultResource",function(n){if("string"!=typeof n)return;this.it=n}),this.ut=null,Z.Wn(this,"viewerId",function(){return this.ut}),Z.xn(this,"viewerId",function(n){if("string"!=typeof n)return;this.ut=n}),this.et=null,Z.Wn(this,"applicationName",function(){return this.et}),Z.xn(this,"applicationName",function(n){if("string"!=typeof n)return;this.et=n}),this.lt=null,Z.Wn(this,"streamUrl",function(){return this.lt}),Z.xn(this,"streamUrl",function(n){if("string"!=typeof n)return;this.lt=n}),this.ot=c.StreamType.UNKNOWN,Z.Wn(this,"streamType",function(){return this.ot}),Z.xn(this,"streamType",function(n){n!==c.StreamType.UNKNOWN&&n!==c.StreamType.VOD&&n!==c.StreamType.LIVE||(this.ot=n)}),this.rt=-1,Z.Wn(this,"duration",function(){return this.rt}),Z.xn(this,"duration",function(n){this.rt=tn.ht(n)}),this.ft=-1,Z.Wn(this,"encodedFrameRate",function(){return this.ft}),Z.xn(this,"encodedFrameRate",function(n){this.ft=tn.ht(n)}),function(){}.apply(this,arguments),this.nn=function(){var n,t=new c;for(n in t.assetName=this.assetName,t.applicationName=this.applicationName,t.streamUrl=this.streamUrl,t.viewerId=this.viewerId,t.defaultResource=this.defaultResource,t.streamType=this.streamType,t.duration=this.duration,t.encodedFrameRate=this.encodedFrameRate,this.custom)t.custom[n]=this.custom[n];return t}};c.StreamType={UNKNOWN:N.StreamType.UNKNOWN,LIVE:N.StreamType.LIVE,VOD:N.StreamType.VOD},fn.ErrorType={ERROR_UNKNOWN:N.ErrorType.ERROR_UNKNOWN,ERROR_IO:N.ErrorType.ERROR_IO,ERROR_TIMEOUT:N.ErrorType.ERROR_TIMEOUT,ERROR_NULL_ASSET:N.ErrorType.ERROR_NULL_ASSET,ERROR_MISSING_PARAMETER:N.ErrorType.ERROR_MISSING_PARAMETER,ERROR_NO_AD_AVAILABLE:N.ErrorType.ERROR_NO_AD_AVAILABLE,ERROR_PARSE:N.ErrorType.ERROR_PARSE,ERROR_INVALID_VALUE:N.ErrorType.ERROR_INVALID_VALUE,ERROR_INVALID_SLOT:N.ErrorType.ERROR_INVALID_SLOT,ERROR_3P_COMPONENT:N.ErrorType.ERROR_3P_COMPONENT,ERROR_UNSUPPORTED_3P_FEATURE:N.ErrorType.ERROR_UNSUPPORTED_3P_FEATURE,ERROR_DEVICE_LIMIT:N.ErrorType.ERROR_DEVICE_LIMIT,ERROR_UNMATCHED_SLOT_SIZE:N.ErrorType.ERROR_UNMATCHED_SLOT_SIZE},fn.Events={AD_REQUESTED:N.Events.AD_REQUESTED,AD_RESPONSE:N.Events.AD_RESPONSE,AD_SLOT_STARTED:N.Events.AD_SLOT_STARTED,AD_ATTEMPTED:N.Events.AD_ATTEMPTED,AD_SLOT_ENDED:N.Events.AD_SLOT_ENDED,AD_IMPRESSION_START:N.Events.AD_IMPRESSION_START,AD_START:N.Events.AD_START,AD_FIRST_QUARTILE:N.Events.AD_FIRST_QUARTILE,AD_MID_QUARTILE:N.Events.AD_MID_QUARTILE,AD_THIRD_QUARTILE:N.Events.AD_THIRD_QUARTILE,AD_COMPLETE:N.Events.AD_COMPLETE,AD_END:N.Events.AD_END,AD_IMPRESSION_END:N.Events.AD_IMPRESSION_END,AD_SKIPPED:N.Events.AD_SKIPPED,AD_ERROR:N.Events.AD_ERROR,AD_PROGRESS:N.Events.AD_PROGRESS,AD_CLOSE:N.Events.AD_CLOSE,CONTENT_PAUSED:N.Events.CONTENT_PAUSED,CONTENT_RESUMED:N.Events.CONTENT_RESUMED,POD_START:N.Events.POD_START,POD_END:N.Events.POD_END};var a=fn.SystemFactory=function(n,t){var i=this;(function(n,t){if(!(n instanceof s))throw new Error("systemInterface parameter should be an instance of SystemInterface.");this.ct=n,this.vt=this.ct.vt,this.Et=this.ct.Et,this.dt=this.ct.dt,this.Rt=this.ct.Rt,this.Tt=this.ct.Tt,this.wt=this.ct.wt,this.T=t instanceof f?t.nn():new f}).apply(this,arguments),this.tn=function(n,t,i){this.Nt=n,this.St=t,this.gt=i},this.release=function(){this.ct.release(),this.ct=null,this.Nt=null,this.T=null,this.pt=null};var u=function(){return new en(i.wt,i.vt,i.Ln(),i.pt,i.Nt)};this.buildLogger=function(){return u()},this.ln=function(n,t,i){return new x(n,t,i,this)},this._t=function(){return new $(this.buildLogger(),this.Ot(),this.St,this.gt)},this.Ct=function(){return new q(this.buildTimer())},this.At=function(){var n=new Q(this.buildLogger(),null,this.Ln()),n=new hn(this.buildLogger(),this.Et,n);return new q(n)},this.Ot=function(){return new sn(this.buildLogger(),this.dt,this.At(),this.Ln())},this.in=function(){return new Q(this.buildLogger(),this._t(),this.Ln())},this.buildTime=function(){return new rn(this.vt,this.buildLogger())},this.buildTimer=function(){return new hn(this.buildLogger(),this.Et,this.in())},this.It=function(){return new ln(this.buildLogger(),this.Rt,this.Ct(),this.Ln())},this.sn=function(){return new Y(this.buildLogger(),this.It(),this.mt())},this.Dt=function(){return new on(this.buildLogger(),this.Tt,this.in())},this.yt=function(){return new B},this.Pt=function(n,t){return new X(n,this.buildLogger(),this.Ot(),this.mt(),t)},this.bt=function(n,t,i,u){var s=this.Pt(t,u.custom["c3.domain"]);return new j(this.Mt(),n,t,this.buildLogger(),this.in(),this.buildTimer(),s,this.yt(),this.buildTime(),this.Lt(),i,u)},this.Ut=function(n,t,i,u,s,e){var l=this.in(),o=this.buildLogger(),t=t.nn(),e=this.bt(n,t,i,e);return new W(u,s,i,this.Dt(),e,l,o)},this.Mt=function(){return new J},this.mt=function(){return new G},this.Lt=function(){return this.pt},this.Ln=function(){return this.T},this.pt=new z},f=fn.SystemSettings=function(){this.Vt=f.kt,Z.Wn(this,"logLevel",function(){return this.Vt}),Z.xn(this,"logLevel",function(n){var t;"number"!=typeof n||(t=Z.Jn(n))===n&&t>=f.LogLevel.DEBUG&&t<=f.LogLevel.ERROR&&(this.Vt=t)}),this.Ft=f.Ht,Z.Wn(this,"allowUncaughtExceptions",function(){return this.Ft}),Z.xn(this,"allowUncaughtExceptions",function(n){Z.Bt(n)&&(this.Ft=n)}),this.Gt=f.Kt,Z.Wn(this,"storageTimeout",function(){return this.Gt}),Z.xn(this,"storageTimeout",function(n){var t;"number"!=typeof n||(t=Z.Jn(n))===n&&(this.Gt=t)}),this.jt=f.Wt,Z.Wn(this,"httpTimeout",function(){return this.jt}),Z.xn(this,"httpTimeout",function(n){var t;"number"!=typeof n||(t=Z.Jn(n))===n&&(this.jt=t)}),function(){}.apply(this,arguments),this.equals=function(n){return this.logLevel===n.logLevel&&this.allowUncaughtExceptions===n.allowUncaughtExceptions&&this.storageTimeout===n.storageTimeout&&this.httpTimeout===n.httpTimeout},this.nn=function(){var n=new f;return n.logLevel=this.logLevel,n.allowUncaughtExceptions=this.allowUncaughtExceptions,n.storageTimeout=this.storageTimeout,n.httpTimeout=this.httpTimeout,n}};f.LogLevel={DEBUG:N.LogLevel.DEBUG,INFO:N.LogLevel.INFO,WARNING:N.LogLevel.WARNING,ERROR:N.LogLevel.ERROR,NONE:N.LogLevel.NONE},f.xt=f.LogLevel.DEBUG,f.kt=f.LogLevel.NONE,f.qt=!0,f.Ht=!1,f.Kt=10,f.Wt=10;var S=fn.PlayerStateManager=function(n){var u=this;u.Yt=null,u.Jt=-2,u.Qt=S.PlayerState.UNKNOWN,u.Xt={},u.Zt=-2,u.ft=-2,u.rt=-2,u.zt=null,u.$t=null,u.lt=null,u.ni=null,u.ti=null,u.ii=-1,u.ui=-1,u.A=null,u.I=null,u.si=null,u.ei=[],u.p=!1,this.release=function(){u.p||u.N.y("PlayerStateManager.release",function(){null!=u.Yt&&u.Yt.li(),u.oi(),u.d=null,u.N=null,u.p=!0})},this.setPlayheadTime=function(n){},this.setBufferLength=function(n){},this.setRenderedFrameRate=function(n){},this.getEncodedFrameRate=function(){return u.ft},this.setEncodedFrameRate=function(t){u.p||u.N.y("PlayerStateManager.setEncodedFrameRate",function(){var n=tn.ht(t);-1<=n&&(u.ft=n,null!=u.Yt&&u.Yt.ri(u.ft))})},this.getDuration=function(){return u.rt},this.setClientMeasureInterface=function(n){Z.hi(n,new fn.ClientMeasureInterface,"ClientMeasureInterface"),this.ai=n},this.getPHT=function(){return this.ai&&"function"==typeof this.ai.getPHT?this.ai.getPHT():S.DEFAULT_PHT},this.getBufferLength=function(){return this.ai&&"function"==typeof this.ai.getBufferLength?this.ai.getBufferLength():S.DEFAULT_BUFFER_LENGTH},this.getSignalStrength=function(){return this.ai&&"function"==typeof this.ai.getSignalStrength?this.ai.getSignalStrength():S.DEFAULT_SIGNAL_STRENGTH},this.getRenderedFrameRate=function(){return this.ai&&"function"==typeof this.ai.getRenderedFrameRate?this.ai.getRenderedFrameRate():S.DEFAULT_RENDERED_FRAME_RATE},this.setDuration=function(t){u.p||u.N.y("PlayerStateManager.setDuration",function(){var n=tn.ht(t);-1<=n&&(u.rt=n,null!=u.Yt&&u.Yt.fi(u.rt))})},this.getStreamUrl=function(){return u.lt},this.setStreamUrl=function(n){u.p||u.N.y("PlayerStateManager.setStreamUrl",function(){null!=n&&(u.lt=n,null!=u.Yt&&u.Yt.ci(u.lt))})},this.vi=function(){return u.ni},this.Ei=function(){return u.ti},this.setModuleNameAndVersion=function(n,t){u.ni=n,u.ti=t},this.di=function(){return u.$t},this.setPlayerType=function(n){u.p||u.N.y("PlayerStateManager.setPlayerType",function(){u.$t=n,null!=u.Yt&&u.Yt.Ri(u.$t)})},this.Ti=function(){return u.zt},this.setPlayerVersion=function(n){u.p||u.N.y("PlayerStateManager.setPlayerVersion",function(){u.zt=n,null!=u.Yt&&u.Yt.wi(u.zt)})},this.setMonitoringNotifier=function(n,t){if(!u.p)return null==u.Yt&&(u.Yt=n,u.c,!0)},this.oi=function(){u.p||(u.Yt=null,u.c)},this.Ni=function(){u.setPlayerState(u.getPlayerState()),u.setBitrateKbps(u.Si()),u.setDuration(u.getDuration()),u.setEncodedFrameRate(u.getEncodedFrameRate()),u.setStreamUrl(u.getStreamUrl()),u.setPlayerType(u.di()),u.setPlayerVersion(u.Ti());for(var n=0;n<u.ei.length;n++){var t=u.ei[n];u.gi(t)}u.ei=[]},this.getPlayerState=function(){return u.Qt},this.setPlayerState=function(n){u.p||u.N.y("PlayerStateManager.setPlayerState",function(){S.pi(n)&&(u.Qt=n,null!=u.Yt&&u.Yt._i(u.Qt))})},this.Si=function(){return u.Jt},this.setBitrateKbps=function(t){u.p||u.N.y("PlayerStateManager.setBitrateKbps",function(){var n=tn.ht(t);-1<=n&&(u.Jt=n,null!=u.Yt&&u.Yt.Oi(u.Jt))})},this.setPlayerSeekStart=function(n){u.p||u.N.y("PlayerStateManager.setPlayerSeekStart()",function(){null!=u.Yt&&u.Yt.Ci(S.SEEK_ACTIONS_TYPE.SEEK_START,n)})},this.setPlayerSeekEnd=function(){u.p||u.N.y("PlayerStateManager.setPlayerSeekEnd()",function(){null!=u.Yt&&u.Yt.Ci(S.SEEK_ACTIONS_TYPE.SEEK_END,-1)})},this.setUserSeekButtonUp=function(){u.p||u.N.y("PlayerStateManager.setUserSeekButtonUp()",function(){null!=u.Yt&&u.Yt.Ci(S.SEEK_ACTIONS_TYPE.BUTTON_UP,-1)})},this.setUserSeekButtonDown=function(){u.p||u.N.y("PlayerStateManager.setUserSeekButtonDown()",function(){null!=u.Yt&&u.Yt.Ci(S.SEEK_ACTIONS_TYPE.BUTTON_DOWN,-1)})},this.setVideoResolutionWidth=function(t){u.p||u.N.y("PlayerStateManager.setVideoResolutionWidth()",function(){var n=tn.ht(t);0<n&&(u.ii=n),null!=u.Yt&&u.Yt.Ai(u.ii)})},this.setVideoResolutionHeight=function(t){u.p||u.N.y("PlayerStateManager.setVideoResolutionHeight()",function(){var n=tn.ht(t);0<n&&(u.ui=n),null!=u.Yt&&u.Yt.Ii(u.ui)})},this.setConnectionType=function(n){u.p||u.N.y("PlayerStateManager.setConnectionType()",function(){u.A=n,null!=u.Yt&&u.Yt.Y(u.A)})},this.setLinkEncryption=function(n){u.p||u.N.y("PlayerStateManager.setLinkEncryption()",function(){u.I=n,null!=u.Yt&&u.Yt.Q(u.I)})},this.setSignalStrength=function(n){},this.gi=function(n){var t,i;u.si=n,null!=u.Yt?(t=n.errorCode,i=n.severity,u.Yt.mi(t,i)):u.ei.push(n)},this.sendError=function(t,i){u.p||u.N.y("PlayerStateManager.sendError",function(){var n=new an.StreamerError(t,i);u.gi(n)})},this.reset=function(){u.p||u.N.y("PlayerStateManager.reset",function(){u.Jt=-2,u.Qt=S.PlayerState.UNKNOWN,u.Xt={},u.Zt=-1,u.ft=-1,u.rt=-1,u.zt=null,u.$t=null,u.lt=null,u.si=null,u.ei=[]})},this.setCDNServerIP=function(n){u.p||u.N.y("PlayerStateManager.setCDNServerIP",function(){null!=u.Yt&&u.Yt.Di(n)})},this.yi=function(){return u.Pi},this.setDroppedFramesTotal=function(n){u.p||u.N.y("PlayerStateManager.setDroppedFramesTotal",function(){null!=u.Yt&&u.Yt.bi(n)})},this.setDroppedFramesCount=function(n){u.p||u.N.y("PlayerStateManager.setDroppedFramesCount",function(){null!=u.Yt&&u.Yt.Mi(n)})},this.Li=function(){return u.si},function(n){u.d=n,u.N=u.d.in()}.apply(u,arguments)};S.PlayerState={STOPPED:N.PlayerState.STOPPED,PLAYING:N.PlayerState.PLAYING,BUFFERING:N.PlayerState.BUFFERING,PAUSED:N.PlayerState.PAUSED,UNKNOWN:N.PlayerState.UNKNOWN,NOT_MONITORED:N.PlayerState.NOT_MONITORED},S.pi=function(n){return n===S.PlayerState.STOPPED||n===S.PlayerState.PLAYING||n===S.PlayerState.BUFFERING||n===S.PlayerState.PAUSED||n===S.PlayerState.UNKNOWN||n===S.PlayerState.NOT_MONITORED},S.SEEK_ACTIONS_TYPE={SEEK_START:"pss",SEEK_END:"pse",BUTTON_UP:"bu",BUTTON_DOWN:"bd"},S.DEFAULT_SIGNAL_STRENGTH=1e3,S.DEFAULT_RENDERED_FRAME_RATE=-1,S.DEFAULT_BUFFER_LENGTH=-1,S.DEFAULT_PHT=-1,fn.ClientMeasureInterface=function(){this.getPHT=function(){},this.getBufferLength=function(){},this.getSignalStrength=function(){},this.getRenderedFrameRate=function(){}};var l=fn.HttpInterface=function(){this.makeRequest=function(n,t,i,u,s,e){},this.release=function(){}},o=fn.LoggingInterface=function(){this.consoleLog=function(n,t){},this.release=function(){}},v=fn.MetadataInterface=function(){this.getBrowserName=function(){},this.getBrowserVersion=function(){},this.getDeviceBrand=function(){},this.getDeviceManufacturer=function(){},this.getDeviceModel=function(){},this.getDeviceType=function(){},this.getDeviceVersion=function(){},this.getFrameworkName=function(){},this.getFrameworkVersion=function(){},this.getOperatingSystemName=function(){},this.getOperatingSystemVersion=function(){},this.getDeviceCategory=function(){},this.getScreenWidth=function(){},this.getScreenHeight=function(){},this.getScaleFactor=function(){},this.release=function(){}},E=fn.StorageInterface=function(){this.saveData=function(n,t,i,u){},this.loadData=function(n,t,i){},this.release=function(){}},s=fn.SystemInterface=function(n,t,i,u,s,e){(function(n,t,i,u,s,e){Z.hi(n,new d,"TimeInterface"),Z.hi(t,new R,"TimerInterface"),Z.hi(i,new l,"HttpInterface"),Z.hi(u,new E,"StorageInterface"),Z.hi(s,new v,"MetadataInterface"),Z.hi(e,new o,"LoggingInterface"),this.vt=n,this.Et=t,this.dt=i,this.Rt=u,this.Tt=s,this.wt=e}).apply(this,arguments),this.release=function(){null!=this.vt&&(this.vt.release(),this.vt=null),null!=this.Et&&(this.Et.release(),this.Et=null),null!=this.dt&&(this.dt.release(),this.dt=null),null!=this.Rt&&(this.Rt.release(),this.Rt=null),null!=this.Tt&&(this.Tt.release(),this.Tt=null),null!=this.wt&&(this.wt.release(),this.wt=null)}},d=fn.TimeInterface=function(){this.getEpochTimeMs=function(){},this.release=function(){}},R=fn.TimerInterface=function(){this.createTimer=function(n,t,i){},this.release=function(){}},i=an.AdAnalytics=function(){var u=this;function t(n){n=n,null==u.Ui?u.c:(0<Z.An(n)&&u.setAdInfo(n),u.Ui.Vi()||(u.Ui.ki(u.Fi),u.Ui.Hi(!0)))}u.Bi=null,u.d=null,u.Gi=null,u.Fi=null,u.Ui=null,u.Ki=null,u.ji=null,u.Wi=null,function(n,t,i){u.Bi=n,u.Wi=i,u.d=t,null!=i&&(u.Fi=i.xi()),u.Gi=t.buildTimer(),u.Ui=new e(u.Bi,u.Gi),g.call(this)}.apply(this,arguments),this.setAdInfo=function(n){Z.An(n)<=0?u.c:(u.c,null!=u.Ui&&u.Ui.qi(n))},this.setAdPlayerInfo=function(n){Z.An(n)<=0?u.c:(u.c,null!=u.Ui&&u.Ui.qi(n))},this.reportAdMetric=function(){0!=arguments.length?1==arguments.length?u.Yi(arguments[0]):2==arguments.length?u.Yi(arguments[0],arguments[1]):3==arguments.length?u.Yi(arguments[0],arguments[1],arguments[2]):4==arguments.length&&u.Yi(arguments[0],arguments[1],arguments[2],arguments[3]):u.c},this.setCallback=function(n){null!=u.Ui&&u.Ui.Ji(n)},this.reportAdFailed=function(n,t){null!=u.Ui?(0<Z.An(t)&&u.setAdInfo(t),u.Ui.Vi()||(u.Ui.ki(u.Fi),u.Ui.Hi(!0)),u.c,u.reportAdError(n,r.ErrorSeverity.FATAL),u.reportAdEnded()):u.c},this.reportAdLoaded=function(n){u.c,t(n)},this.reportAdStarted=function(n){u.c,t(n)},this.reportAdEnded=function(){null!=u.Ui?(u.c,u.Ui.Vi()&&(u.Ui.ki(null),u.Ui.Hi(!1))):u.c},this.reportAdError=function(n,t){null!=u.Ui?(u.c,t=new un(n,t),u.Ui.gi(t)):u.c},this.reportAdPlayerEvent=function(n,t){if(Z.Tn(n))if(u.c,0,null!=u.Ui)switch(n){case fn.Constants.Events.USER_WAIT_STARTED:case fn.Constants.Events.BUMPER_VIDEO_STARTED:u.Ui.Sn();break;case fn.Constants.Events.USER_WAIT_ENDED:case fn.Constants.Events.BUMPER_VIDEO_ENDED:u.Ui.pn();break;default:u.Ui.Qi(n,t)}else u.c;else u.c},this.reportAdSkipped=function(){null!=u.Ui?(u.c,u.reportAdPlayerEvent(N.Events.AD_SKIPPED),u.reportAdEnded()):u.c},this.release=function(){u.c,null!=u.Ui&&(u.Ui.Vi()&&(u.Ui.ki(null),u.Ui.Hi(!1)),u.Ui.Ji(null),u.Ui.Xi(),u.Ui=null),void 0!==fn.AdProxyMonitor&&null!=u.ji&&(fn.AdProxyMonitor.release(u.ji),u.ji=null)},this.setAdListener=function(n,t){null!=n&&(void 0!==t&&void 0!==t.convivaModule?fn.AdProxyMonitor=convivaModule.AdProxyMonitor:"undefined"!=typeof ConvivaModule&&(fn.AdProxyMonitor=ConvivaModule.AdProxyMonitor),void 0!==fn.AdProxyMonitor&&(null==n&&null!=u.ji?(fn.AdProxyMonitor.release(u.ji),u.ji=null):null!=n&&null!=u.ji?(fn.AdProxyMonitor.release(u.ji),u.c,u.ji=fn.AdProxyMonitor.initConvivaDropIn(n,t,this,fn)):null!=n&&null==u.ji&&(u.c,u.ji=fn.AdProxyMonitor.initConvivaDropIn(n,t,this,fn))))},this.reportAdBreakStarted=function(n,t,i){null!=u.Fi&&(u.c,u.Zi=n,u.Ki=t,u.Fi.zi(n,t,i))},this.reportAdBreakEnded=function(){null!=u.Fi&&(u.c,u.Zi=null,u.Ki=null,u.Fi.$i())},this.getSessionId=function(){if(null!=u.Fi)return u.c,u.Ui.Un()},this.getClientId=function(){if(null!=u.Fi)return u.c,u.Ui.Vn()},this.getAdType=function(){return null!=u.Fi?u.Fi.Zi:null},this.nu=function(){return null!=u.Fi?u.Fi.Ki:null},i.prototype=Object.create(g.prototype),i.prototype.constructor=i},e=an.AdPlayerMonitorImpl=function(){var i=this;i.tu=null,i.iu=null,function(n,t){w.call(this,n,t)}.apply(this,arguments),this.ki=function(n){this.uu()!=n&&(this.su(),i.iu=null==n?null:n)},this.uu=function(){return i.iu},this.eu=function(){var n,t=this.uu();null!=i.tu&&(i.lu=i.tu.getPlayerStateManager(),i.ou(),i.lu.setClientMeasureInterface(this),(n=null)!=t&&(n=t.ru()),i.hu=i.tu.createAdSession(n,i.En,i.lu))},e.prototype=Object.create(w.prototype),e.prototype.constructor=e},T=fn.Analytics={init:function(n,t,i){if(null!=this.Bi&&this.Bi,0,arguments.length<=0)throw new Error("customerKey must be valid");var u=null,s=null,e=null;if("string"==typeof n&&(u=n,!Z.Tn(u)))throw new Error("customerKey must be valid");2<=arguments.length&&"object"==typeof t&&(s=t),3<=arguments.length&&"object"==typeof i&&(e=i);var l=new h(u),o=new f;0<Z.An(e)&&(null!=e[N.GATEWAY_URL]&&(l.gatewayUrl=e[N.GATEWAY_URL]),null!=e[N.LOG_LEVEL]&&(o.logLevel=e[N.LOG_LEVEL]));n=new fn.Impl.Html5Logging,t=new fn.Impl.Html5Storage,i=new fn.Impl.Html5Http,u=new fn.Impl.Html5Timer,e=new fn.Impl.Html5Time;null!=this.Tt&&null!=this.Tt||(this.Tt=new fn.Impl.Html5Metadata),null!=s&&null!=s&&(null!=s[fn.Constants.CallbackFunctions.CONSOLE_LOG]&&(n.consoleLog=s[fn.Constants.CallbackFunctions.CONSOLE_LOG]),null!=s[fn.Constants.CallbackFunctions.MAKE_REQUEST]&&(i.makeRequest=s[fn.Constants.CallbackFunctions.MAKE_REQUEST]),null!=s[fn.Constants.CallbackFunctions.SAVE_DATA]&&(t.saveData=s[fn.Constants.CallbackFunctions.SAVE_DATA]),null!=s[fn.Constants.CallbackFunctions.LOAD_DATA]&&(t.loadData=s[fn.Constants.CallbackFunctions.LOAD_DATA]),null!=s[fn.Constants.CallbackFunctions.GET_EPOCH_TIME_IN_MS]&&(e.getEpochTimeMs=s[fn.Constants.CallbackFunctions.GET_EPOCH_TIME_IN_MS]),null!=s[fn.Constants.CallbackFunctions.CREATE_TIMER]&&(u.createTimer=s[fn.Constants.CallbackFunctions.CREATE_TIMER])),this.ct=new fn.SystemInterface(e,u,i,t,this.Tt,n),this.d=new a(this.ct,o),this.d.tn("Analytics",l),this.Bi=new r(l,this.d,this.au,T.version)},release:function(){var n=0;if(null!=this.fu&&null!=this.fu){for(n=0;n<this.fu.length;n++){var t=this.fu[n];null!=t&&(t.release(),t.c=null,t.Gi=null,this.fu.splice(n,1),n--)}this.fu=null}if(null!=this.cu&&null!=this.cu){for(n=0;n<this.cu.length;n++){var i=this.cu[n];null!=i&&(i.release(),i.c=null,i.Gi=null,this.cu.splice(n,1),n--)}this.cu=null}null!=this.d&&null!=this.d&&(this.d.release(),this.d=null),null!=this.Bi&&null!=this.Bi&&(this.Bi.release(),this.Bi=null),this.Bi=null,this.c=null,this.ct=null,this.Tt=null,this.au=null},setUniqueIdentifier:function(n,t){if(null==this.Bi||null==this.Bi)throw new Error(N.i);this.Bi.setUniqueIdentifier(n,t)},setUserPreferenceForDataCollection:function(n,t){if(null==this.Bi||null==this.Bi)throw new Error(N.i);this.Bi.setUserPreferenceForDataCollection(n,t)},setUserPreferenceForDataDeletion:function(n){if(null==this.Bi||null==this.Bi)throw new Error(N.i);this.Bi.setUserPreferenceForDataDeletion(n)},reportAppEvent:function(n,t){if(null==this.Bi||null==this.Bi)throw new Error(N.i);this.Bi.sendCustomEvent(r.NO_SESSION_KEY,n,t)},reportAppBackgrounded:function(){if(null==this.Bi||null==this.Bi)throw new Error(N.i);this.Bi.sendCustomEvent(r.NO_SESSION_KEY,"App.Backgrounded",null)},reportAppForegrounded:function(){if(null==this.Bi||null==this.Bi)throw new Error(N.i);this.Bi.sendCustomEvent(r.NO_SESSION_KEY,"App.Foregrounded",null)},configureExistingClient:function(n){if(!(n instanceof r))throw new Error(N.i);this.Bi=n,this.d=this.Bi.d},buildVideoAnalytics:function(){if(null==this.Bi||null==this.Bi)throw new Error(N.i);var n=new t(this.Bi,this.d);return null!=this.cu&&null!=this.cu||(this.cu=[]),this.cu.push(n),n},buildAdAnalytics:function(n){if(null==this.Bi||null==this.Bi)throw new Error(N.i);n=new i(this.Bi,this.d,null!=n&&null!=n?n:null);return null!=this.fu&&null!=this.fu||(this.fu=[]),this.fu.push(n),n},setDeviceMetadata:function(n){var t,i,u;arguments.length<=0||0==Z.An(n)||(null!=this.Tt&&null!=this.Tt||(this.Tt=new fn.Impl.Html5Metadata),null!=n[fn.Constants.DeviceMetadata.BRAND]&&(this.Tt.getDeviceBrand=function(){return n[fn.Constants.DeviceMetadata.BRAND]}),null!=n[fn.Constants.DeviceMetadata.MANUFACTURER]&&(this.Tt.getDeviceManufacturer=function(){return n[fn.Constants.DeviceMetadata.MANUFACTURER]}),null!=n[fn.Constants.DeviceMetadata.MODEL]&&(this.Tt.getDeviceModel=function(){return n[fn.Constants.DeviceMetadata.MODEL]}),null!=n[fn.Constants.DeviceMetadata.TYPE]&&(this.Tt.getDeviceType=function(){return n[fn.Constants.DeviceMetadata.TYPE]}),null!=n[fn.Constants.DeviceMetadata.VERSION]&&(this.Tt.getDeviceVersion=function(){return n[fn.Constants.DeviceMetadata.VERSION]}),null!=n[fn.Constants.DeviceMetadata.OS_NAME]&&(this.Tt.getOperatingSystemName=function(){return n[fn.Constants.DeviceMetadata.OS_NAME]}),null!=n[fn.Constants.DeviceMetadata.OS_VERSION]&&(this.Tt.getOperatingSystemVersion=function(){return n[fn.Constants.DeviceMetadata.OS_VERSION]}),null!=n[fn.Constants.DeviceMetadata.CATEGORY]&&(this.Tt.getDeviceCategory=function(){return n[fn.Constants.DeviceMetadata.CATEGORY]}),null==(t=n[fn.Constants.DeviceMetadata.SCREEN_RESOLUTION_WIDTH])||isNaN(t)||(this.Tt.getScreenWidth=function(){return t.toString()}),null==(i=n[fn.Constants.DeviceMetadata.SCREEN_RESOLUTION_HEIGHT])||isNaN(i)||(this.Tt.getScreenHeight=function(){return i.toString()}),null==(u=n[fn.Constants.DeviceMetadata.SCREEN_RESOLUTION_SCALE_FACTOR])||isNaN(u)||(this.Tt.getScaleFactor=function(){return u.toString()}))},reportDeviceMetric:function(n,t){switch(null!=this.au&&null!=this.au||(this.au={}),n){case fn.Constants.Network.CONNECTION_TYPE:if(!Z.Tn(t))return void 0;this.au[n]=t,this.Bi&&this.Bi.W(this.au[fn.Constants.Network.CONNECTION_TYPE]);break;case fn.Constants.Network.LINK_ENCRYPTION:if(!Z.Tn(t))return void 0;this.au[n]=t,this.Bi&&this.Bi.J(this.au[fn.Constants.Network.LINK_ENCRYPTION]);break;case fn.Constants.Network.SIGNAL_STRENGTH:var i=parseInt(t,10);if(isNaN(i))return void 0;if(S.DEFAULT_SIGNAL_STRENGTH===i)return void 0;this.au[n]=i,this.Bi&&this.Bi.X(i);break;default:0}}};T.version="4.1.2";var g=an.AnalyticsImpl=function(){var h=this;function a(){var n=null!=h.Ui,t=h.getAdType(),i=h.nu();return t==N.AdType.SERVER_SIDE&&i==N.AdPlayer.CONTENT?g.Eu.vu:t!=N.AdType.SERVER_SIDE||i!=N.AdPlayer.SEPARATE?t==N.AdType.CLIENT_SIDE&&i==N.AdPlayer.CONTENT?g.Eu.du:t==N.AdType.CLIENT_SIDE&&i==N.AdPlayer.SEPARATE?null!=n&&n?g.Eu.du:g.Eu.Ru:n?g.Eu.du:g.Eu.Ru:void 0}function f(n,t,i){n=parseInt(n,10),t=parseInt(t,10);isNaN(n)&&isNaN(t)||(isNaN(n),isNaN(t),null==h.Ui||i!=g.Eu.du&&i!=g.Eu.vu||h.Ui.Tu(n,t),null==h.Fi||i!=g.Eu.Ru&&i!=g.Eu.vu||h.Fi.Tu(n,t))}function c(n,t){S.pi(n)&&(null==h.Ui||t!=g.Eu.du&&t!=g.Eu.vu||h.Ui.wu(n),(null!=h.Fi&&t==g.Eu.Ru||t==g.Eu.vu)&&h.Fi.wu(n))}function v(n,t){n=parseInt(n,10);isNaN(n)||(null==h.Ui||t!=g.Eu.du&&t!=g.Eu.vu||h.Ui.Nu(n),null==h.Fi||t!=g.Eu.Ru&&t!=g.Eu.vu||h.Fi.Nu(n))}function E(n,t){n=parseInt(n,10);isNaN(n)||(null==h.Ui||t!=g.Eu.du&&t!=g.Eu.vu||h.Ui.Su(n),null==h.Fi||t!=g.Eu.Ru&&t!=g.Eu.vu||h.Fi.Su(n))}function d(n,t){n=parseInt(n,10);null==h.Ui||t!=g.Eu.du&&t!=g.Eu.vu||h.Ui.gu(!0,n),null==h.Fi||t!=g.Eu.Ru&&t!=g.Eu.vu||h.Fi.gu(!0,n)}function R(n){null==h.Ui||n!=g.Eu.du&&n!=g.Eu.vu||h.Ui.gu(!1,-1),null==h.Fi||n!=g.Eu.Ru&&n!=g.Eu.vu||h.Fi.gu(!1,-1)}function T(n,t){n=parseInt(n,10);isNaN(n)||(null==h.Ui||t!=g.Eu.du&&t!=g.Eu.vu||h.Ui.pu(n),null==h.Fi||t!=g.Eu.Ru&&t!=g.Eu.vu||h.Fi.pu(n))}function w(n,t){n=parseInt(n,10);isNaN(n)||(null==h.Ui||t!=g.Eu.du&&t!=g.Eu.vu||h.Ui._u(n),null==h.Fi||t!=g.Eu.Ru&&t!=g.Eu.vu||h.Fi._u(n))}(function(){}).apply(this,arguments),this.Yi=function(n,t,i,u){switch(0,n){case N.Playback.BITRATE:0,u==g.Eu.du?T(t,g.Eu.du):T(t,a());break;case N.Playback.PLAY_HEAD_TIME:u==g.Eu.du?v(t,g.Eu.du):v(t,a());break;case N.Playback.RESOLUTION:u==g.Eu.du?f(t,i,g.Eu.du):f(t,i,a());break;case N.Playback.BUFFER_LENGTH:u==g.Eu.du?E(t,g.Eu.du):E(t,a());break;case N.Playback.PLAYER_STATE:u==g.Eu.du?c(t,g.Eu.du):c(t,a());break;case N.Playback.RENDERED_FRAMERATE:u==g.Eu.du?w(t,g.Eu.du):w(t,a());break;case N.Playback.SEEK_STARTED:2<=arguments.length&&"CONVIVA"!=t?d(t,a()):i==g.Eu.du?d(-1,g.Eu.du):d(-1,a());break;case N.Playback.SEEK_ENDED:i==g.Eu.du?R(g.Eu.du):R(a());break;case N.Playback.CDN_IP:0,o=t,r=a(),Z.Tn(o)&&(null==h.Ui||r!=g.Eu.du&&r!=g.Eu.vu||h.Ui.Ou(o),null==h.Fi||r!=g.Eu.Ru&&r!=g.Eu.vu||h.Fi.Ou(o));break;case N.Playback.DROPPED_FRAMES_TOTAL:0,l=t,o=a(),l=parseInt(l,10),isNaN(l)||(null==h.Ui||o!=g.Eu.du&&o!=g.Eu.vu||h.Ui.Cu(l),null==h.Fi||o!=g.Eu.Ru&&o!=g.Eu.vu||h.Fi.Cu(l));break;case N.Playback.DROPPED_FRAMES_COUNT:0,s=t,e=a(),s=parseInt(s,10),isNaN(s)||(null==h.Ui||e!=g.Eu.du&&e!=g.Eu.vu||h.Ui.Au(s),null==h.Fi||e!=g.Eu.Ru&&e!=g.Eu.vu||h.Fi.Au(s));break;default:l=n,e=t,s=a(),!void(Z.Tn(l)&&null!=e&&null!=e&&(null==h.Ui||s!=g.Eu.du&&s!=g.Eu.vu||h.Ui.kn(l,e),null==h.Fi||s!=g.Eu.Ru&&s!=g.Eu.vu||h.Fi.kn(l,e)))}var s,e,l,o,r}};g.Eu={du:1,Ru:2,vu:3};var u=an.PlayerMonitor=function(){var u=this;this.Iu=null,this.mu=null,this.En=null,this.Du=null,this.Qt=fn.PlayerStateManager.PlayerState.UNKNOWN,this.yu=-1,this.Pu=-1,this.si=null,this.bu=null,this.Mu=null,this.Lu=-2,this.Zt=-1,this.m=fn.PlayerStateManager.DEFAULT_SIGNAL_STRENGTH,this.Uu=null,this.Pi=null,this.I=null,this.A=null,this.Gi=null,this.Vu=null,this.ku=null,this.Fu=null,this.Hu=null,this.Zi=null,this.Ki=null,function(n){u.Gi=n}.apply(this,arguments),this.Bu=function(){return u.Qt},this.wu=function(n){u.Qt!=n&&(u.su(),u.Qt=n,u.Gu())},this.Ku=function(){return u.ju},this.Wu=function(){return u.xu},this.gu=function(n,t){u.su(),u.ju=n,u.xu=t,u.qu()},this.Yu=function(){return u.yu},this.Nu=function(n){u.yu=n},this.Ju=function(){return u.Pu},this.Su=function(n){u.Pu=n},this.Qu=function(){return u.Lu},this.pu=function(n){u.Lu!=n&&(u.Lu=n,u.Gu())},this.Xu=function(){return u.Zt},this._u=function(n){u.Zt=n},this.Zu=function(){return u.Uu},this.Ou=function(n){u.Uu=n,u.Gu()},this.yi=function(){return u.Pi},this.Cu=function(n){u.Pi=n,u.Gu()},this.Au=function(n){u.zu(n)},this.$u=function(){return u.m},this.ns=function(){return u.ts},this.us=function(){return u.ss},this.Tu=function(n,t){n<0&&(n=0),t<0&&(t=0),u.ts==n&&u.ss==t||(u.ts=n,u.ss=t,u.Gu())},this.es=function(){return u.mu},this.ls=function(){null!=u.es()&&(u.En=new fn.ContentMetadata,u.Du={},u.ku={},u.os())},this.rs=function(n){null==u.mu&&null==n||(this.su(),null!=u.mu&&(u.mu=null,u.ls()),null!=n&&(u.mu=Z.hs(u.mu,n),u.ls()))},this.qi=function(n){if(null!=n)if(null!=u.En){var t,i=!1;for(t in n)if(u.En[t]!=n[t]){i=!0;break}i&&(u.su(),u.mu=Z.hs(n),u.os())}else u.rs(n)},this.Ji=function(n){null==n?(u.Fu=null,u.as()):u.Fu!=n&&(u.Fu=n,u.fs())},this.su=function(){u.cs||null!=u.Fu&&(u.cs=!0,u.Fu(),u.cs=!1)},this.Vi=function(){return u.Iu},this.Hi=function(n){u.Iu!=n&&(u.su(),u.Iu&&(u.vs(),u.as(),u.Xi()),u.Iu=n,u.Iu&&u.eu())},this.Es=function(){return u.bu},this.ds=function(){return null!=u.Mu?u.Mu:null},this.Rs=function(){return u.si},this.gi=function(n){this.su(),u.si=n,u.mi()},this.Qi=function(n,t){u.su(),u.bu=n,u.Mu=t,u.Ts()},this.ws=function(){u.su()},this.fs=function(){u.as(),u.Vu=u.Gi.create(u.ws,1e3,"PlayerMonitor.update")},this.as=function(){null!=u.Vu&&(u.Vu(),u.Vu=null)},this.zi=function(n,t,i){u.Hu=i,u.Ns(),u.Zi=n,u.Ki=t,null!=u.Zi&&null!=u.Zi&&N.AdType.CLIENT_SIDE===u.Zi&&(u.Qt=N.PlayerState.UNKNOWN,u.Ss(u.Zi,t,null==i||null==i?null:i[N.POD_POSITION]))},this.$i=function(){null!=u.Zi&&N.AdType.CLIENT_SIDE===u.Zi&&(u.gs(),u.Qt=N.PlayerState.UNKNOWN),u.ps(),u.Zi=null,u.Ki=null},this._s=function(){return u.Hu},this.Xi=function(){this.Iu=null,this.mu=null,this.En=null,this.Du=null,this.Qt=fn.PlayerStateManager.PlayerState.UNKNOWN,this.yu=-1,this.Pu=-1,this.si=null,this.bu=null,this.Mu=null,this.Lu=-2,this.Zt=-1,this.m=fn.PlayerStateManager.DEFAULT_SIGNAL_STRENGTH,this.Uu=null,this.I=null,this.A=null,this.Gi=null,this.Vu=null,this.ku=null,this.Fu=null,this.Hu=null,this.Zi=null,this.Ki=null,u.lu=null,u.hu=fn.Client.NO_SESSION_KEY}},w=an.PlayerMonitorImpl=function(){var e=this;e.tu=null,e.lu=null,e.hu=fn.Client.NO_SESSION_KEY,function(n,t){u.call(this,t),e.tu=n}.apply(this,arguments),this.getPHT=function(){return e.Yu()},this.getBufferLength=function(){return e.Ju()},this.getRenderedFrameRate=function(){return e.Xu()},this.getSignalStrength=function(){return e.$u()},this.qu=function(){null!=e.lu&&e.Os!=r.NO_SESSION_KEY&&(e.Ku()?e.lu.setPlayerSeekStart(e.Wu()):e.lu.setPlayerSeekEnd())},this.Gu=function(){null!=e.lu&&(e.lu.setPlayerState(e.Bu()),0<e.Qu()&&e.lu.setBitrateKbps(e.Qu()),0<e.ns()&&e.lu.setVideoResolutionWidth(e.ns()),0<e.us()&&e.lu.setVideoResolutionHeight(e.us()),null!=e.Zu()&&e.lu.setCDNServerIP(e.Zu()),null!=e.yi()&&e.lu.setDroppedFramesTotal(e.yi()))},this.Nn=function(){e.hu!=r.NO_SESSION_KEY&&null!=e.tu&&e.tu.updateContentMetadata(e.hu,e.En)},this.ou=function(){var n,t,i;null!=e.lu&&null!=e.ku&&0!=Z.An(e.ku)&&(null!=e.ku[N.MODULE_NAME]&&null!=e.ku[N.MODULE_VERSION]&&(n=e.ku[N.MODULE_NAME],t=e.ku[N.MODULE_VERSION],Z.Tn(n)&&Z.Tn(t)&&e.lu.setModuleNameAndVersion(n,t)),null!=e.ku[N.FRAMEWORK_NAME]&&(i=e.ku[N.FRAMEWORK_NAME],Z.Tn(i)&&e.lu.setPlayerType(i)),null!=e.ku[N.FRAMEWORK_VERSION]&&(i=e.ku[N.FRAMEWORK_VERSION],Z.Tn(i)&&e.lu.setPlayerVersion(i)))},this.gs=function(){null!=e.lu&&e.hu!=r.NO_SESSION_KEY&&(e.Gu(),this.Cs())},this.pn=function(){null!=e.lu&&e.hu!=r.NO_SESSION_KEY&&(e.Gu(),e.tu._n(e.hu))},this.Cs=function(){null!=e.tu&&e.hu!=N.NO_SESSION_KEY&&e.tu.adEnd(e.hu)},this.Ss=function(n,t,i){var u;null!=e.lu&&e.hu!=N.NO_SESSION_KEY&&(u=null,N.AdType.CLIENT_SIDE===n?u=r.AdStream.SEPARATE:N.AdType.SERVER_SIDE===n&&(u=r.AdStream.CONTENT),e.As(u,t,i))},this.Sn=function(){null!=e.lu&&e.hu!=N.NO_SESSION_KEY&&e.tu.gn(e.hu)},this.As=function(n,t,i){null!=e.tu&&e.hu!=N.NO_SESSION_KEY&&e.tu.adStart(e.hu,n,t,i)},this.eu=function(){null!=e.tu&&(e.lu=e.tu.getPlayerStateManager(),e.ou(),e.lu.setClientMeasureInterface(this),e.hu=e.tu.createSession(e.En,e.lu))},this.vs=function(){null!=e.tu&&(null!=e.lu&&(e.lu.setPlayerState(N.PlayerState.STOPPED),e.lu=null),e.hu!=N.NO_SESSION_KEY&&(e.tu.cleanupSession(e.hu),e.hu=N.NO_SESSION_KEY))},this.mi=function(){var n;null!=e.tu&&e.hu!=r.NO_SESSION_KEY&&(n=e.Rs(),e.tu.reportError(e.hu,n.Is(),n.ms()))},this.Ts=function(){e.hu!=r.NO_SESSION_KEY&&null!=e.tu&&e.tu.sendCustomEvent(e.hu,e.Es(),e.ds())},this.os=function(){var n,t=e.es(),i=!1,u=!1;for(n in t){var s=t[n];if(Z.Tn(n)&&null!=s)switch(n){case N.STREAM_URL:u=!0,e.En.streamUrl=s;break;case N.ASSET_NAME:u=!0,e.En.assetName=s;break;case N.DEFAULT_RESOURCE:u=!0,e.En.defaultResource=s;break;case N.VIEWER_ID:u=!0,e.En.viewerId=s;break;case N.PLAYER_NAME:u=!0,e.En.applicationName=s;break;case N.DURATION:u=!0,e.En.duration=s;break;case N.IS_LIVE:u=!0,e.En.streamType=s;break;case N.ENCODED_FRAMERATE:u=!0,e.En.encodedFrameRate=s;break;case N.MODULE_NAME:case N.MODULE_VERSION:case N.FRAMEWORK_NAME:case N.FRAMEWORK_VERSION:i=!0,e.ku[n]=s;break;case N.APPLICATION_VERSION:default:u=!0,e.En.custom[n]=s}}i&&this.ou(),u&&this.Nn()},this.Ns=function(){this.Ds(N.Events.POD_START)},this.ps=function(){this.Ds(N.Events.POD_END)},this.Ds=function(n){var t,i,u;null!=e.tu&&e.hu!=N.NO_SESSION_KEY&&((t=null)!=(u=this._s())&&(t={},null!=(i=u[N.POD_POSITION])&&(t[N.POD_POSITION]=i),null!=(i=u[N.POD_INDEX])&&(t[N.POD_INDEX]=i+""),n!==N.Events.POD_START||null!=(u=u[N.POD_DURATION])&&(t[N.POD_DURATION]=u+"")),e.tu.sendCustomEvent(e.hu,n,t))},this.zu=function(n){e.lu.setDroppedFramesCount(n)},this.ys=function(n){this.hu==N.NO_SESSION_KEY&&n!=N.NO_SESSION_KEY&&(this.hu=n)},this.ru=function(){return this.hu},this.Un=function(){return e.tu.getSessionId(this.hu)},this.Vn=function(n){return e.tu.getClientId(this.hu)},this.kn=function(n,t){e.tu.kn(this.hu,n,t)},w.prototype=Object.create(u.prototype),w.prototype.constructor=w},t=an.VideoAnalytics=function(){var s=this;s.Bi=null,s.d=null,s.Gi=null,s.Fi=null,s.ji=null,s.Zi=null,s.Ki=null,this.release=function(){s.c,null!=s.Fi&&s.Fi.Vi()&&(s.Fi.Hi(!1),void 0!==fn.ProxyMonitor&&null!=s.ji&&(fn.ProxyMonitor.release(s.ji),s.ji=null)),null!=s.Fi&&(s.Fi.Ji(null),s.Fi.Xi(),s.Fi=null),s.Gi=null,s.Zi=null,s.Ki=null},function(n,t){s.Bi=n,s.d=t,s.Gi=t.buildTimer(),s.Fi=new w(s.Bi,s.Gi),g.call(this)}.apply(this,arguments),this.reportPlaybackRequested=function(n){s.c,null!=s.Fi&&(0<Z.An(n)&&s.setContentInfo(n),s.Fi.Vi()||s.Fi.Hi(!0))},this.reportPlaybackEnded=function(){s.c,null!=s.Fi&&s.Fi.Vi()&&(s.Fi.Hi(!1),void 0!==fn.ProxyMonitor&&null!=s.ji&&(fn.ProxyMonitor.release(s.ji),s.ji=null),s.Fi.Ji(null))},this.reportPlaybackFailed=function(n,t){null!=s.Fi&&(0<Z.An(t)&&s.setContentInfo(t),s.Fi.Vi()||s.Fi.Hi(!0),s.c,s.reportPlaybackError(n,r.ErrorSeverity.FATAL),s.reportPlaybackEnded())},this.setContentInfo=function(n){Z.An(n)<=0||null!=s.Fi&&(s.c,s.Fi.qi(n))},this.setPlayerInfo=function(n){Z.An(n)<=0||null!=s.Fi&&(s.c,s.Fi.qi(n))},this.reportPlaybackMetric=function(){0!=arguments.length&&(1==arguments.length?s.Yi(arguments[0]):2==arguments.length?s.Yi(arguments[0],arguments[1]):3==arguments.length?s.Yi(arguments[0],arguments[1],arguments[2]):4==arguments.length&&s.Yi(arguments[0],arguments[1],arguments[2],arguments[3]))},this.reportPlaybackError=function(n,t){null!=s.Fi&&Z.Tn(n)&&(s.c,t=new un(n,t),s.Fi.gi(t))},this.reportPlaybackEvent=function(n,t){if(Z.Tn(n)&&null!=s.Fi&&(s.c,null!=s.Fi))switch(n){case fn.Constants.Events.USER_WAIT_STARTED:case fn.Constants.Events.BUMPER_VIDEO_STARTED:s.Fi.Sn();break;case fn.Constants.Events.USER_WAIT_ENDED:case fn.Constants.Events.BUMPER_VIDEO_ENDED:s.Fi.pn();break;default:s.Fi.Qi(n,t)}},this.setCallback=function(n){s.c,null!=s.Fi&&s.Fi.Ji(n)},this.reportAdBreakStarted=function(n,t,i){null!=s.Fi&&(s.c,s.Zi=n,s.Ki=t,s.Fi.zi(n,t,i))},this.reportAdBreakEnded=function(){null!=s.Fi&&(s.Zi=null,s.Ki=null,s.c,s.Fi.$i())},this.setPlayer=function(n,t){var i,u;void 0!==n&&(t&&(i=t[fn.Constants.CONVIVA_MODULE],u=t[fn.Constants.MEDIA_ELEMENT]),void 0!==i?fn.ProxyMonitor=i.ProxyMonitor:"undefined"!=typeof ConvivaModule&&(fn.ProxyMonitor=ConvivaModule.ProxyMonitor),void 0!==fn.ProxyMonitor&&(s.c,null==n&&null!=s.ji?(fn.ProxyMonitor.release(s.ji),s.ji=null):null!=n?(null!=s.ji&&fn.ProxyMonitor.release(s.ji),s.c,s.ji=void 0!==u?fn.ProxyMonitor.initConvivaDropIn(n,u,s.d,this,fn):fn.ProxyMonitor.initConvivaDropIn(n,s.d,this,fn)):null==n&&void 0!==u&&(s.ji=fn.ProxyMonitor.initConvivaDropIn(n,u,s.d,this,fn))))},this.configureExistingSession=function(n){n!=N.NO_SESSION_KEY&&null!=s.Fi&&(s.c,s.Fi.ys(n))},this.getSessionId=function(){if(null!=s.Fi)return s.c,s.Fi.Un()},this.getClientId=function(){if(null!=s.Fi)return s.c,s.Fi.Vn()},this.xi=function(){return s.c,this.Fi},this.getAdType=function(){return null!=s.Fi?s.Fi.Zi:null},this.nu=function(){return null!=s.Fi?s.Fi.Ki:null},t.prototype=Object.create(g.prototype),t.prototype.constructor=t};fn.Impl=fn.Impl||{},fn.Impl.Html5Http=function(){(function(){}).apply(this,arguments),this.makeRequest=function(n,t,i,u,s,e){return this.makeRequestStandard.apply(this,arguments)},this.makeRequestStandard=function(n,t,i,u,s,e){var l=new XMLHttpRequest;return l.open(n,t,!0),u&&l.overrideMimeType&&(l.overrideMimeType=u),u&&l.setRequestHeader&&l.setRequestHeader("Content-Type",u),0<s&&(l.timeout=s,l.ontimeout=function(){l.ontimeout=l.onreadystatechange=null,e&&e(!1,"timeout after "+s+" ms")}),l.onreadystatechange=function(){4===l.readyState&&(l.ontimeout=l.onreadystatechange=null,200==l.status?e&&e(!0,l.responseText):e&&e(!1,"http status "+l.status))},l.send(i),null},this.release=function(){}},fn.Impl=fn.Impl||{},fn.Impl.Html5Logging=function(){(function(){}).apply(this,arguments),this.consoleLog=function(n,t){"undefined"!=typeof console&&(console.log&&t===fn.SystemSettings.LogLevel.DEBUG||t===fn.SystemSettings.LogLevel.INFO?console.log(n):console.warn&&t===fn.SystemSettings.LogLevel.WARNING?console.warn(n):console.error&&t===fn.SystemSettings.LogLevel.ERROR&&console.error(n))},this.release=function(){}},fn.Impl=fn.Impl||{},fn.Impl.Html5Metadata=function(){(function(){}).apply(this,arguments),this.getBrowserName=function(){return null},this.getBrowserVersion=function(){return null},this.getDeviceBrand=function(){return null},this.getDeviceManufacturer=function(){return null},this.getDeviceModel=function(){return null},this.getDeviceType=function(){return null},this.getDeviceVersion=function(){return null},this.getFrameworkName=function(){return null},this.getFrameworkVersion=function(){return null},this.getOperatingSystemName=function(){return null},this.getOperatingSystemVersion=function(){return null},this.getDeviceCategory=function(){return null},this.getScreenWidth=function(){return"undefined"!=typeof window&&window&&window.screen&&window.screen.width?window.screen.width.toString():null},this.getScreenHeight=function(){return"undefined"!=typeof window&&window&&window.screen&&window.screen.height?window.screen.height.toString():null},this.getScaleFactor=function(){return"undefined"!=typeof window&&window&&window.devicePixelRatio?window.devicePixelRatio.toString():null},this.release=function(){}},fn.Impl=fn.Impl||{},fn.Impl.Html5Storage=function(){(function(){}).apply(this,arguments),this.saveData=function(n,t,i,u){var s=n+"."+t;try{localStorage.setItem(s,i),u(!0,null)}catch(n){u(!1,n.toString())}},this.loadData=function(n,t,i){var u=n+"."+t;try{i(!0,localStorage.getItem(u))}catch(n){i(!1,n.toString())}},this.release=function(){}},fn.Impl=fn.Impl||{},fn.Impl.Html5Time=function(){(function(){}).apply(this,arguments),this.getEpochTimeMs=function(){return(new Date).getTime()},this.release=function(){}},fn.Impl=fn.Impl||{},fn.Impl.Html5Timer=function(){(function(){}).apply(this,arguments),this.createTimer=function(n,t,i){var u=setInterval(n,t);return function(){-1!==u&&(clearInterval(u),u=-1)}},this.release=function(){}};var p,_,O,C,A,I=an.JSON2={};function n(n){return n<10?"0"+n:n}function m(n){return p.lastIndex=0,p.test(n)?'"'+n.replace(p,function(n){var t=C[n];return"string"==typeof t?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+n(this.getUTCMonth()+1)+"-"+n(this.getUTCDate())+"T"+n(this.getUTCHours())+":"+n(this.getUTCMinutes())+":"+n(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}),"function"!=typeof I.stringify&&(p=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,C={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},I.stringify=function(n,t,i){var u;if(O=_="","number"==typeof i)for(u=0;u<i;u+=1)O+=" ";else"string"==typeof i&&(O=i);if((A=t)&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON2.stringify");return function n(t,i){var u,s,e,l,o,r=_,h=i[t];switch(h&&"object"==typeof h&&"function"==typeof h.toJSON&&(h=h.toJSON(t)),"function"==typeof A&&(h=A.call(i,t,h)),typeof h){case"string":return m(h);case"number":return isFinite(h)?String(h):"null";case"boolean":case"null":return String(h);case"object":if(!h)return"null";if(_+=O,o=[],Object.prototype.toString.apply(h)===Object.prototype.toString.apply([])){for(l=h.length,u=0;u<l;u+=1)o[u]=n(u,h)||"null";return e=0===o.length?"[]":_?"[\n"+_+o.join(",\n"+_)+"\n"+r+"]":"["+o.join(",")+"]",_=r,e}if(A&&"object"==typeof A)for(l=A.length,u=0;u<l;u+=1)"string"==typeof A[u]&&(e=n(s=A[u],h))&&o.push(m(s)+(_?": ":":")+e);else for(s in h)Object.prototype.hasOwnProperty.call(h,s)&&(e=n(s,h))&&o.push(m(s)+(_?": ":":")+e);return e=0===o.length?"{}":_?"{\n"+_+o.join(",\n"+_)+"\n"+r+"}":"{"+o.join(",")+"}",_=r,e}}("",{"":n})});var D,y,P,b,M,L=an.JsonParse=(b={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},M=function(){switch(H(),y){case"{":return function(){var n,t={};if("{"===y){if(V("{"),H(),"}"===y)return V("}"),t;for(;y;){if(n=F(),H(),V(":"),Object.hasOwnProperty.call(t,n)&&U('Duplicate key "'+n+'"'),t[n]=M(),H(),"}"===y)return V("}"),t;V(","),H()}}U("Bad object")}();case"[":return function(){var n=[];if("["===y){if(V("["),H(),"]"===y)return V("]"),n;for(;y;){if(n.push(M()),H(),"]"===y)return V("]"),n;V(","),H()}}U("Bad array")}();case'"':return F();case"-":return k();default:return("0"<=y&&y<="9"?k:function(){switch(y){case"t":return V("t"),V("r"),V("u"),V("e"),!0;case"f":return V("f"),V("a"),V("l"),V("s"),V("e"),!1;case"n":return V("n"),V("u"),V("l"),V("l"),null}U("Unexpected '"+y+"'")})()}},function(n,l){return P=n,D=0,y=" ",n=M(),H(),y&&U("Syntax error"),"function"==typeof l?function n(t,i){var u,s,e=t[i];if(e&&"object"==typeof e)for(u in e)Object.hasOwnProperty.call(e,u)&&(void 0!==(s=n(e,u))?e[u]=s:delete e[u]);return l.call(t,i,e)}({"":n},""):n});function U(n){throw{name:"SyntaxError",message:n,at:D,text:P}}function V(n){return n&&n!==y&&U("Expected '"+n+"' instead of '"+y+"'"),y=P.charAt(D),D+=1,y}function k(){var n,t="";for("-"===y&&V(t="-");"0"<=y&&y<="9";)t+=y,V();if("."===y)for(t+=".";V()&&"0"<=y&&y<="9";)t+=y;if("e"===y||"E"===y)for(t+=y,V(),"-"!==y&&"+"!==y||(t+=y,V());"0"<=y&&y<="9";)t+=y,V();if(n=+t,!isNaN(n))return n;U("Bad number")}function F(){var n,t,i,u="";if('"'===y)for(;V();){if('"'===y)return V(),u;if("\\"===y)if(V(),"u"===y){for(t=i=0;t<4&&(n=parseInt(V(),16),isFinite(n));t+=1)i=16*i+n;u+=String.fromCharCode(i)}else{if("string"!=typeof b[y])break;u+=b[y]}else u+=y}U("Bad string")}function H(){for(;y&&y<=" ";)V()}var B=an.CwsProtocol=function(){this.Ps=function(n,t,i,u){return u.seq=n,u.st=t,u.t=i,u},this.bs=function(n,t){var i=B.Ms;return this.Ps(n,t,i,{})}};B.version="2.6",B.Ls="/0/wsg",B.M="0",B.Us=!1,B.Vs=2,B.ks=-1,B.Fs=-1,B.Hs=1e3,B.Bs="sdk.js.1",B.Gs="CwsStateChangeEvent",B.Ks="CwsErrorEvent",B.Ms="CwsSessionEndEvent",B.js="CwsCustomEvent",B.Ws="CwsSeekEvent",B.xs="CwsDataSamplesEvent",B.qs="ok",B.Ys="err",B.Js="clid",B.Qs="cfg",B.Xs="evs",B.Zs="maxhbinfos",B.zs="slg",B.$s="hbi",B.ne="gw",B.te="fp",B.ie="csi_en",B.ue="CwsSessionHb",B.se="t",B.ee="st",B.le="sst",B.oe="lv",B.re="seq",B.he="cid",B.ae="clid",B.fe="clv",B.ce="pver",B.ve="iid",B.Ee="sid",B.de="vid",B.Re="an",B.Te="pn",B.we="tags",B.Ne="sf",B.Se="evs",B.ge="lg",B.pe="hbinfos",B._e="sdk",B.Oe="pj",B.Ce="ps",B.Ae="br",B.Ie="cl",B.me="efps",B.De="afps",B.ye="rfpstot",B.Pe="rfpscnt",B.be="rs",B.Me="pht",B.Le="bl",B.Ue="url",B.Ve="caps",B.ke="pm",B.Fe="w",B.He="h",B.Be="ct",B.Ge="le",B.Ke="dftot",B.je="dfcnt",B.We="ss",B.xe="csi_n",B.qe="csi_t",B.Ye="csi_l",B.Je="csi_v",B.Qe="csi_c",B.Xe="sch",B.Ze="br",B.ze="brv",B.$e="dvb",B.nl="dvma",B.tl="dvm",B.il="dvt",B.ul="dvv",B.sl="sw",B.el="sh",B.ll="scf",B.ol="fw",B.rl="fwv",B.hl="cc",B.al="mn",B.fl="mv",B.cl="os",B.vl="osv",B.El="cat",B.dl="caps",B.Rl="t",B.Tl="seq",B.wl="st",B.Nl="act",B.Sl="skto",B.gl="err",B.pl="ft",B._l="new",B.Ol="old",B.Cl="name",B.Al="attr",B.Il="seq",B.ml="err",B.Dl="rtt",B.yl="ad",B.Pl="csi",B.bl=function(n){switch(n){case S.PlayerState.STOPPED:return B.Ml;case S.PlayerState.PLAYING:return B.Ll;case S.PlayerState.BUFFERING:return B.Ul;case S.PlayerState.PAUSED:return B.Vl;case S.PlayerState.NOT_MONITORED:return B.kl;default:return B.Fl}},B.Ml=1,B.Ll=3,B.Ul=6,B.Vl=12,B.kl=98,B.Fl=100,B.Hl={Bl:0,hn:1,Gl:2,Kl:4},B.jl={Wl:0},an.JSONInterface=function(){this.xl=function(n){},this.ql=function(n){}};var G=an.LibJSONInterface=function(){this.xl=function(n){var t=null;try{t=I.stringify(n)}catch(n){}return t},this.ql=function(n){var t=null;try{t=L(n)}catch(n){}return Z.Yl(t)||(t=null),t}},K=an.CwsHeartbeat=function(){this.Jl={},function(){}.apply(this,arguments),this.get=function(){return this.Jl},this.Ql=function(n,t){this.Jl[n]=t},this.Xl=function(n,t,i){this.Jl[n]||(this.Jl[n]={}),this.Jl[n][t]=i},this.Zl=function(n){this.Ql(B.se,n)},this.zl=function(n){this.Ql(B.ee,n)},this.$l=function(n){this.Ql(B.le,n)},this.no=function(n){this.Ql(B.oe,n)},this.io=function(n){this.Ql(B.re,n)},this.uo=function(n){this.Ql(B.he,n)},this.so=function(n){this.Ql(B.ae,n)},this.eo=function(n){this.Ql(B.fe,n)},this.lo=function(n){this.Ql(B.ce,n)},this.oo=function(n){this.Ql(B.dl,n)},this.ro=function(n){this.Ql(B.Ee,n)},this.ho=function(n){this.Ql(B.ve,n)},this.ao=function(n){this.Ql(B.de,n)},this.fo=function(n){this.Ql(B.Re,n)},this.co=function(n){this.Ql(B.Te,n)},this.vo=function(n){this.Ql(B.we,n)},this.Eo=function(n){this.Ql(B.Ne,n)},this.do=function(n){this.Ql(B.Ve,n)},this.Ro=function(n){this.Ql(B.Se,n)},this.To=function(n){this.Ql(B._e,n)},this.wo=function(n){this.Ql(B.ge,n)},this.No=function(n){this.Ql(B.pe,n)},this.wu=function(n){this.Ql(B.Ce,n)},this.So=function(n){this.Ql(B.Oe,n)},this.go=function(n){this.Ql(B.Ie,n)},this.po=function(n){this.Ql(B.Ae,n)},this._o=function(n){this.Ql(B.be,n)},this.Oo=function(n){this.Ql(B.me,n)},this.Co=function(n){this.Ql(B.De,n)},this.Ao=function(n){this.Ql(B.Pe,n)},this.Io=function(n){this.Ql(B.ye,n)},this.mo=function(n){this.Xl(B.ke,B.Xe,n)},this.Do=function(n){this.Xl(B.ke,B.Ze,n)},this.yo=function(n){this.Xl(B.ke,B.ze,n)},this.Po=function(n){this.Xl(B.ke,B.$e,n)},this.bo=function(n){this.Xl(B.ke,B.nl,n)},this.Mo=function(n){this.Xl(B.ke,B.tl,n)},this.Lo=function(n){this.Xl(B.ke,B.il,n)},this.Uo=function(n){this.Xl(B.ke,B.ul,n)},this.Vo=function(n){this.Xl(B.ke,B.ol,n),this.Ql(B.ol,n)},this.ko=function(n){this.Xl(B.ke,B.rl,n),this.Ql(B.rl,n)},this.Fo=function(n){this.Xl(B.ke,B.cl,n.toUpperCase())},this.Ho=function(n){this.Xl(B.ke,B.vl,n)},this.Bo=function(n){this.Xl(B.ke,B.El,n)},this.Go=function(n){this.Xl(B.ke,B.sl,n)},this.Ko=function(n){this.Xl(B.ke,B.el,n)},this.jo=function(n){this.Xl(B.ke,B.ll,n)},this.Wo=function(n){this.Ql(B.Ke,n)},this.zu=function(n){this.Ql(B.je,n)},this.xo=function(n){this.Ql(B.Me,n)},this.qo=function(n){this.Ql(B.Le,n)},this.Yo=function(n){this.Ql(B.Ue,n)},this.Jo=function(n){this.Ql(B.Fe,n)},this.Qo=function(n){this.Ql(B.He,n)},this.Xo=function(n){this.Ql(B.Be,n)},this.Zo=function(n){this.Ql(B.Ge,n)},this.zo=function(){this.Ql(B.yl,!0)},this.$o=function(n){this.Ql(B.We,n)},this.setModuleName=function(n){this.Xl(B.hl,B.al,n)},this.nr=function(n){this.Xl(B.hl,B.fl,n)},this.tr=function(n){this.Ql(B.Pl,n)},this.ir=function(n){null!=n&&this.Ql(B.xe,n)},this.ur=function(n){null!=n&&this.Ql(B.qe,n)},this.sr=function(n){null!=n&&this.Ql(B.Ye,n)},this.er=function(n){null!=n&&this.Ql(B.Je,n)},this.lr=function(n){null!=n&&this.Ql(B.Qe,n)}},j=an.CwsSession=function(n,t,i,u,s,e,l,o,r,h,a,f){var d=this;d.or=null,d.En=null,d.rr=0,d.hr=0,d.ar=B.Hl.Bl,d.fr=B.jl.Wl,d.cr=[],d.vr=-1,d.Jt=-2,d.Pi=-1,d.Er=-1,d.dr=null,d.Qt=S.PlayerState.UNKNOWN,d.ft=-1,d.Rr=-1,d.lt=null,d.ii=-1,d.ui=-1,d.lu=null,d.nt=null,d.ut=null,d.Tr=null,d.wr=null,d.Nr={},d.Sr=null,d.gr=null,d.pr=null,d._r=null,d.Or=null,d.Cr=null,d.Ar=null,d.Ir=null,d.mr=null,d.Dr=null,d.yr=null,d.Pr=null,d.br=null,d.Mr=null,d.Lr=null,d.ni=null,d.ti=null,d.A=null,d.I=null,d.Uu=null,d.Ur=null,d.Vr=!1,d.kr=!1,d.Fr=!1,d.Hr=!1,d.Br=null,d.Gr=1e3,d.Kr=0,d.jr=0,d.Wr={},d._={},d.xr=!1,d.qr=null,d.Yr=null,d.Jr=null,d.Qr=null,d.Xr=null,d.Zr=null,d.zr=12e4,d.$r=B.Us,d.nh=!1,d.th=null,function(n,t,i,u,s,e,l,o,r,h,a,f){this.ih=n,this.Bi=t,this.St=i,this.c=u,this.c.setModuleName("CwsSession"),this.N=s,this.Gi=e,this.uh=l,this.sh=o,this.eh=r,this.pt=h,this.lh=a,this.En=f,null!=this.En&&(d.ft=this.En.encodedFrameRate,d.lt=this.En.streamUrl,d.Rr=this.En.duration),null!=this.lh&&(d.th=d.lh.get(Y.P))}.apply(this,arguments),this.on=function(){this.lh=null,this.pt=null,this.w=null,this.eh=null,this.sh=null,this.uh=null,this.Gi=null,this.N=null,this.c=null,this.St=null,this.Bi=null,this.ih.oh(),this.ih=null,this.Ur=null,this.Fr=!0},this.rh=function(n){this.hh=n,this.ah=this.hh.ah,this.c.ro(this.hh.g),this.rr=this.eh.current(),this.fh()||this.ch()?(this.ar+=j.vh,d.c.info("start(): assetName="+d.En.assetName)):d.c.info("start()"+d.Eh())},this.dh=function(){this.Hr=!0},this.Rh=function(){this.c.debug("initialize()"),(this.fh()||this.ch()||this.Th())&&(d.wh(),d.Nh(),d.Sh(),(this.fh()||this.ch())&&d.gh())},this.ph=function(){this.c.debug("end(): schedule the last hb before session cleanup"+d.Eh()),this._h(),this.Oh(),this.Ch(),this.Ah()},this.Ih=function(){this.Hr||(this.Ah(),this.mh())},this.Do=function(n){var t=d.Sr;t!==n&&null!=n&&(d.c.debug("Change browserName from "+t+" to "+n),d.Sr=n)},this.yo=function(n){var t=d.gr;t!==n&&null!=n&&(d.c.debug("Change browserVersion from "+t+" to "+n),d.gr=n)},this.Po=function(n){var t=d.pr;t!==n&&null!=n&&(d.c.debug("Change deviceBrand from "+t+" to "+n),d.pr=n)},this.bo=function(n){var t=d._r;t!==n&&null!=n&&(d.c.debug("Change deviceManufacturer from "+t+" to "+n),d._r=n)},this.Mo=function(n){var t=d.Or;t!==n&&null!=n&&(d.c.debug("Change deviceModel from "+t+" to "+n),d.Or=n)},this.Lo=function(n){var t=d.Cr;t!==n&&null!=n&&(d.c.debug("Change deviceType from "+t+" to "+n),d.Cr=n)},this.Uo=function(n){var t=d.Ar;t!==n&&null!=n&&(d.c.debug("Change deviceVersion from "+t+" to "+n),d.Ar=n)},this.Fo=function(n){var t=d.Dr;t!==n&&null!=n&&(d.c.debug("Change operatingSystemName from "+t+" to "+n),d.Dr=n)},this.Ho=function(n){var t=d.yr;t!==n&&null!=n&&(d.c.debug("Change operatingSystemVersion from "+t+" to "+n),d.yr=n)},this.Bo=function(n){var t=d.Pr;t!==n&&null!=n&&(d.c.debug("Change deviceCategory from "+t+" to "+n),d.Pr=n)},this.Go=function(n){var t=d.br;t!==n&&null!=n&&(d.c.debug("Change screenWidth from "+t+" to "+n),d.br=n)},this.Ko=function(n){var t=d.Mr;t!==n&&null!=n&&(d.c.debug("Change screenHeight from "+t+" to "+n),d.Mr=n)},this.jo=function(n){var t=d.Pr;t!==n&&null!=n&&(d.c.debug("Change scaleFactor from "+t+" to "+n),d.Lr=n)},this.Dh=function(){return d.Ir},this.Vo=function(n){var t=d.Ir;t!==n&&null!=n&&(d.c.debug("Change frameworkName from "+t+" to "+n),d.Ir=n)},this.yh=function(){return d.mr},this.ko=function(n){var t=d.mr;t!==n&&null!=n&&(d.c.debug("Change frameworkVersion from "+t+" to "+n),d.mr=n)},this.Yo=function(n){var t;null!=d.En.streamUrl||(t=d.lt)!==n&&null!=n&&(d.c.debug("Change stream url from "+t+" to "+n),d.lt=n)},this.Ph=function(){d.Oh(),d.nh||(d.bh(),d.Zr=d.Gi.create(d.bh,d.zr,"CwsSession.startCdnTimer"),d.c.debug("fetching cdn ip timer started"))},this.Oh=function(){null!=d.Zr&&(d.Zr(),d.Mh(null,null,null,null,null),d.Zr=null)},this.bh=function(){d.c.debug("detectCDNServerIp(): For "+d.lt),d.$r?d.Lh():d.Oh()},this.Lh=function(){try{var n;"function"==typeof XMLHttpRequest?((n=new XMLHttpRequest).open("HEAD",d.lt,!0),n.setRequestHeader("Pragma","akamai-x-cache-on"),n.onreadystatechange=function(){4===this.readyState&&(200===this.status&&(0<=this.getAllResponseHeaders().indexOf("x-cache")||0<=this.getAllResponseHeaders().indexOf("X-Cache"))?d.Mh("Akamai","header","X-Cache",""+this.getResponseHeader("X-Cache"),""+this.status):d.Mh("null","header","null","null",""+this.status))},n.send()):d.c.info("xmlhttpreq is not available here to fetch CDN Server Ip")}catch(n){d.c.info("Exception caught in makeAkamaiHeadRequest")}},this.Mh=function(n,t,i,u,s){var e={},l={};d.qr!=n&&(null!==d.qr&&(l[B.xe]=d.qr),d.qr=n,null===d.qr?e[B.xe]="null":e[B.xe]=d.qr),d.Yr!=t&&(null!==d.Yr&&(l[B.qe]=d.Yr),d.Yr=t,null===d.Yr?e[B.qe]="null":e[B.qe]=d.Yr),d.Jr!=i&&(null!==d.Jr&&(l[B.Ye]=d.Jr),d.Jr=i,null===d.Jr?e[B.Ye]="null":e[B.Ye]=d.Jr),d.Qr!=u&&(null!==d.Qr&&(l[B.Je]=d.Qr),d.Qr=u,null===d.Qr?e[B.Je]="null":e[B.Je]=d.Qr),d.Xr!=s&&(null!==d.Xr&&(l[B.Qe]=d.Xr),d.Xr=s,null===d.Xr?e[B.Qe]="null":e[B.Qe]=d.Xr),"{}"!=Z.Uh(e)&&d.Vh(e,l)},this.kh=function(n){var t=d.Jt;t!==n&&0<n&&(d.c.info("Change bitrate from "+t+" to "+n),d.Fh(t,n),d.Jt=n)},this.Wo=function(n){var t=d.Pi;t!==n&&0<=n&&(d.c.info("Change dropped frames total from "+t+" to "+n),d.Hh(t,n),d.Pi=n)},this.zu=function(n){var t=d.Er,i=n+(-1===d.Er?0:d.Er);t!==n&&0<=i&&(d.c.info("Change dropped frames count from "+t+" to "+i),d.Bh(t,i),d.Er=i)},this._o=function(n){var t=d.dr;t!==n&&null!=n&&(d.c.info("Change resource from "+t+" to "+n),d.dr=n)},this.fo=function(n){d.nt!==n&&null!=n&&(d.c.info("Change assetName from "+d.nt+" to "+n),d.nt=n)},this.no=function(n){var t=d.wr;t!==n&&null!=n&&(d.c.info("Change isLive from "+t+" to "+n),d.wr=n)},this.ao=function(n){var t=d.ut;t!==n&&null!=n&&(d.c.info("Change viewerId from "+t+" to "+n),d.ut=n)},this.co=function(n){var t=d.Tr;t!==n&&null!=n&&(d.c.info("Change playerName from "+t+" to "+n),d.Tr=n)},this.vo=function(n){var t=d.Nr;Z.Gh(t,n)||null==n||(d.c.info("Change tags from "+Z.Uh(t)+" to "+Z.Uh(n)),d.Nr=n)},this.Oo=function(n){0<d.En.encodedFrameRate||(d.c.debug("setEncodedFrameRate(): "+n),d.ft=n)},this.go=function(n){0<d.En.duration||(d.c.debug("setContentLength(): "+n),d.Rr=n)},this.wu=function(n){var t;d.kr||n!=S.PlayerState.PLAYING||(d.Kh(!1),d.kr=!0,Z.Tn(d.En.viewerId)||d.c.error("Missing viewerId. viewerId should be updated before first frame is rendered."),Z.Tn(d.En.streamType)&&c.StreamType.UNKNOWN!==d.En.streamType||d.c.error("Missing streamType - Live or VOD. streamType should be updated before first frame is rendered."),Z.Tn(d.En.applicationName)||d.c.error("Missing applicationName. applicationName should be updated before first frame is rendered.")),d.Qt!==n&&(t=d.Qt,d.c.info("setPlayerState(): changing player state from "+t+" to "+n),d.jh(t,n),d.Qt=n)},this.Wh=function(n){var t=d.ii;t!==n&&0<n&&(d.c.debug("Change stream resolution width from "+t+" to "+n),d.xh(t,n),d.ii=n)},this.qh=function(n){var t=d.ui;t!==n&&0<n&&(d.c.debug("Change stream resolution height from "+t+" to "+n),d.Yh(t,n),d.ui=n)},this.Xo=function(n){var t=d.A;t!==n&&null!=n&&(d.c.debug("Change network connection type from "+t+" to "+n),d.Jh(t,n),d.A=n)},this.Zo=function(n){var t=d.I;t!==n&&null!=n&&(d.c.debug("Change network link encryption from "+t+" to "+n),d.Qh(t,n),d.I=n)},this.tr=function(n){d.nh=!0,d.Oh();var t=d.Uu;t!==n&&Z.Tn(n)&&(d.c.debug("Change CDN Server IP from "+t+" to "+n),d.Xh(t,n),d.Uu=n)},this.Kh=function(n){var t;d.c.debug("togglePauseJoin()"),d.Vr!==n?(t=d.Vr,n=!d.Vr,d.Zh(t,n),d.Vr=!d.Vr):d.c.debug("togglePauseJoin(): same value, ignoring")},this.zh=function(n,t){d.$h(n,t)},this.na=function(n,t){var i;t[B.Rl]=n,t[B.wl]=this.ta(),t[B.Tl]=this.ih.ia(),this.lu&&(i=tn.ua(this.lu.getPHT(),0,null,-1),n=tn.ua(this.lu.getBufferLength(),0,null,-1),0<=i&&(t[B.Me]=i),0<n&&(t[B.Le]=n)),this.ih.sa(t)},this.ea=function(n){d.lu=n,null!=d.lu?d.la():d.oa()},this._h=function(){var n=this.ta(),t=this.ra(),n=this.sh.bs(t,n);this.ih.sa(n)},this.$h=function(n,t){var i={};i[B.gl]=n,i[B.pl]=t,this.na(B.Ks,i)},this.Fh=function(n,t){var i={},u={};0<n&&(u[B.Ae]=n),i[B.Ae]=t,this.Vh(i,u)},this.ha=function(n,t){var i={};i[B.Nl]=n,0<=t&&(i[B.Sl]=t),this.na(B.Ws,i)},this.xh=function(n,t){var i={},u={};-1!==n&&(u[B.Fe]=n),i[B.Fe]=t,this.Vh(i,u)},this.Yh=function(n,t){var i={},u={};-1!==n&&(u[B.He]=n),i[B.He]=t,this.Vh(i,u)},this.Jh=function(n,t){var i={},u={};null!==n&&(u[B.Be]=n),i[B.Be]=t,this.Vh(i,u)},this.Qh=function(n,t){var i={},u={};null!==n&&(u[B.Ge]=n),i[B.Ge]=t,this.Vh(i,u)},this.Xh=function(n,t){var i={},u={};Z.Tn(n)&&(u[B.Pl]=n),i[B.Pl]=t,this.Vh(i,u)},this.Hh=function(n,t){var i={},u={};0<=n&&(u[B.Ke]=n),i[B.Ke]=t,this.Vh(i,u)},this.Bh=function(n,t){var i={},u={};0<=n&&(u[B.je]=n),i[B.je]=t,this.Vh(i,u)},this.Zh=function(n,t){var i={},u={};u[B.Oe]=n,i[B.Oe]=t,this.Vh(i,u)},this.jh=function(n,t){var i={},u={};i[B.Ce]=B.bl(t),u[B.Ce]=B.bl(n),this.Vh(i,u)},this.Vh=function(n,t){var i={};i[B._l]=n,null!=t&&0<Z.An(t)&&(i[B.Ol]=t),this.na(B.Gs,i)},this.aa=function(n,t){var i={};i[B.Cl]=n,0<Z.An(t)&&(i[B.Al]=t),this.na(B.js,i)},this.Ch=function(){null!=d.or&&(d.or(),d.or=null)},this.mh=function(){d.Ch();var n=1e3*d.St.heartbeatInterval;d.or=d.Gi.create(d.Ah,n,"Session.sendHeartbeat:"+this.ah)},this.oa=function(){null!=d.Br&&(d.Br(),d.Br=null)},this.la=function(){d.oa(),d.Br=d.Gi.create(d.fa,d.Gr,"Session.startRfpsTimer")},this.ca=function(){var n={err:"pending"};n.seq=d.hr-1,n.sentAt=d.ta(),n.rtt=-1,d.cr.push(n);for(var t=0;t<d.cr.length;t++)"ok"===(n=d.cr[t]).err&&(d.cr.splice(t,1),t--)},this.va=function(n,t){for(var i=0;i<d.cr.length;i++){var u=d.cr[i];u.seq===n&&(u.rtt=d.ta()-u.sentAt,u.err=t)}},this.Ea=function(n){for(var t=0;t<d.cr.length;t++){var i=d.cr[t];i.seq===n&&(i.rtt=d.ta()-i.sentAt,i.err="ok")}},this.da=function(){for(var n,t,i=d.lh.get(Y.Ra),u=[],s=-1,e=0;e<d.cr.length;e++)if("ok"==(t=d.cr[e]).err){s=t.seq;break}for(var l=0;l<d.cr.length;l++)((n=(t=d.cr[l]).seq)<d.hr-i||n<s)&&u.push(l);for(var o=[],r=0;r<d.cr.length;r++)n=(t=d.cr[r]).seq,u.indexOf(r)<0&&o.push(d.cr[r]);d.cr=o},this.Ta=function(){d.da();for(var n=[],t=0;t<d.cr.length;t++){var i=d.cr[t],u={};u[B.Il]=i.seq,u[B.Dl]=i.rtt,u[B.ml]=i.err,n.push(u)}return n},this.wa=function(){var n=d.ih.oh();if(d.Th()&&0===n.length)return null;var t=new K;if(t.Zl(B.ue),t.uo(d.St.customerKey),t.so(d.lh.get(Y.P)),t.ro(d.hh.g),t.io(d.hr),t.lo(B.version),t.eo(d.Bi.version),t.ho(d.Bi.g),t.oo(0),null!=d.Bi.A?t.Xo(d.Bi.A):null!=d.A&&t.Xo(d.A),null!=d.Bi.I?t.Zo(d.Bi.I):null!=d.I&&t.Zo(d.I),Z.Tn(d.Uu)&&t.tr(d.Uu),t.mo(B.Bs),null!=d.Sr&&t.Do(d.Sr),null!=d.gr&&t.yo(d.gr),null!=d.pr&&t.Po(d.pr),null!=d._r&&t.bo(d._r),null!=d.Or&&t.Mo(d.Or),null!=d.Cr&&t.Lo(d.Cr),null!=d.Ar&&t.Uo(d.Ar),null!=d.Dr&&t.Fo(d.Dr),null!=d.yr&&t.Ho(d.yr),null!=d.Pr&&t.Bo(d.Pr),null!=d.Ir&&t.Vo(d.Ir),null!=d.mr&&t.ko(d.mr),null==d.br||isNaN(d.br)||t.Go(parseInt(d.br,10)),null==d.Mr||isNaN(d.Mr)||t.Ko(parseInt(d.Mr,10)),null==d.Lr||isNaN(d.Lr)?(null!=d.br&&!isNaN(d.br)||null!=d.Mr&&!isNaN(d.Mr))&&t.jo(1):t.jo(parseFloat(d.Lr)),null!=d.lu&&(d.ni=d.lu.vi(),null!=d.ni&&t.setModuleName(d.ni),d.ti=d.lu.Ei(),null!=d.ti&&t.nr(d.ti),null!=d.lu.di()&&(d.Ir=d.lu.di(),t.Vo(d.Ir)),null!=d.lu.Ti()&&(d.mr=d.lu.Ti(),t.ko(d.mr))),null!=d.ut&&t.ao(d.ut),0<Z.An(d.Nr)&&t.vo(d.Nr),d.fh()||d.ch()){d.ch()&&t.zo(),null!=d.nt&&t.fo(d.nt),t.Eo(d.ar);var i=B.bl(d.Qt);t.wu(i),t.So(d.Vr),null!=d.Tr&&t.co(d.Tr),null!=d.wr&&t.no(d.wr),0<d.Rr&&t.go(d.Rr),0<d.Jt&&t.po(d.Jt),null!==d.dr&&t._o(d.dr),0<d.ft&&t.Oo(d.ft);var u,s=-1,i=-1;null!=d.lu&&(s=tn.ua(d.lu.getPHT(),0,null,-1),i=tn.ua(d.lu.getBufferLength(),0,null,-1)),null!=d.Bi.m?u=d.Bi.m:null!=d.lu&&(u=d.lu.getSignalStrength()),0<=s&&t.xo(s),0<i&&t.qo(i);i=d.Na();if(0<i&&t.Co(i),0<d.jr&&t.Io(tn.ua(d.jr,0,null,-1)),0<d.Kr&&t.Ao(tn.ua(d.Kr,0,null,-1)),u!==S.DEFAULT_SIGNAL_STRENGTH&&t.$o(u),null!=d.lt&&t.Yo(d.lt),0<d.ii&&t.Jo(d.ii),0<d.ui&&t.Qo(d.ui),-1<d.Pi&&t.Wo(d.Pi),-1<d.Er&&(t.zu(d.Er),0<d.Er&&(d.Bh(d.Er,0),d.Er=0)),null!=d.Ur)for(var e in d.Ur)t.Ql(e,d.Ur[e])}else t.Eo(B.Hl.Bl);return 0<n.length&&t.Ro(n),t.do(d.fr),t.To(!0),d.lh.get(Y.Sa)&&t.wo(d.pt.oh()),0<d.lh.get(Y.Ra)&&(0<(n=d.Ta()).length&&t.No(n)),0==d.hr&&(t=d.ga(t)),0!=d.hr&&(t=d.pa(t)),t.$l(d.rr),t.zl(d.ta()),d.$r&&(t.ir(d.qr),t.ur(d.Yr),t.sr(d.Jr),t.er(d.Qr),t.lr(d.Xr)),d.hr++,t.get()},this.pa=function(n){var t,i=d._,u={};for(t in n.Jl.tags)i.hasOwnProperty(t)||(u[t]=n.Jl.tags[t]);n.Jl.tags=u,d._={};for(var s=0;s<d.Wr.length;s++)d.Bi._.hasOwnProperty(d.Wr[s])?d.Bi.C.hasOwnProperty(d.Wr[s])?d.Bi.C[d.Wr[s]]==Y.Hn.Bn?(d._[Y._a+""+d.Wr[s]]=Y.Hn.Bn,d.Bi.O("End-user chose to opt-out of personal data collection")):d.Bi.C[d.Wr[s]]==Y.Hn.Kn?(d._[Y._a+""+d.Wr[s]]=Y.Hn.Kn,d.Bi.O("End-user chose to opt-out of personal data collection")):d.Bi.C[d.Wr[s]]==Y.Hn.Fn?(d._[Y._a+""+d.Wr[s]]=Y.Hn.Fn,d.Bi.O("End-user used privacy settings and chose to opt-out of personal data collection")):(d._[Y._a+""+d.Wr[s]]=d.Bi._[d.Wr[s]],d.Bi.O("Data collection successful")):(d._[Y._a+""+d.Wr[s]]=d.Bi._[d.Wr[s]],d.Bi.O("Data collection successful")):d._[Y._a+""+d.Wr[s]]=Y.Hn.Oa;var e,l={};for(e in i){var o=e.split(".");"{}"!=JSON.stringify(d.Wr)&&-1!=d.Wr.indexOf(""+o[2])||i[Y._a+""+o[2]]==Y.Hn.Ca||(d.Bi.O("Data collection restricted from Conviva back-end"),d._[Y._a+""+o[2]]=Y.Hn.Ca,l[Y._a+""+o[2]]=Y.Hn.Ca)}if("{}"!==JSON.stringify(d._)){var r,h=Z.Aa(d._);for(r in n.Jl.tags)h[r]=n.Jl.tags[r];if(n.Jl.tags=h,!Z.Gh(i,d._)){var a={};if("{}"!==JSON.stringify(l)&&(a[B.we]=l),"{}"!==JSON.stringify(i)){for(var f in i)void 0!==d._[f]&&i[f]!==d._[f]&&(null==a[B.we]&&(a[B.we]={}),a[B.we][f]=d._[f]);for(f in d._)i.hasOwnProperty(f)&&i[f]===d._[f]||(null==a[B.we]&&(a[B.we]={}),a[B.we][f]=d._[f])}"{}"==JSON.stringify(i)&&(a[B.we]=d._);var c,v,E={};E[B._l]=a,E[B.Rl]=B.Gs,E[B.wl]=d.ta(),E[B.Tl]=d.ih.ia(),d.lu&&(c=tn.ua(d.lu.getPHT(),0,null,-1),v=tn.ua(d.lu.getBufferLength(),0,null,-1),0<=c&&(E[B.Me]=c),0<v&&(E[B.Le]=v)),null==n.Jl.evs&&(n.Jl.evs=[]),n.Jl.evs.push(E)}}return n},this.ga=function(n){var t=d.Ia();if("{}"===JSON.stringify(t))return n;var i,u=Z.Aa(t);for(i in n.Jl.tags)u[i]=n.Jl.tags[i];n.Jl.tags=u;var s={};s[B.we]=t;var e={};return e[B._l]=s,e[B.Rl]=B.Gs,e[B.wl]=d.ta(),e[B.Tl]=d.ih.ia(),d.lu&&(t=tn.ua(d.lu.getPHT(),0,null,-1),s=tn.ua(d.lu.getBufferLength(),0,null,-1),0<=t&&(e[B.Me]=t),0<s&&(e[B.Le]=s)),null==n.Jl.evs&&(n.Jl.evs=[]),n.Jl.evs.push(e),n},this.Ia=function(){var n={};if("undefined"!=typeof navigator&&null!=navigator){if(n["c3.fp.cookie"]=null!=navigator.cookieEnabled&&null!=navigator.cookieEnabled?""+navigator.cookieEnabled:"",n["c3.fp.memory"]=null!=navigator.deviceMemory&&null!=navigator.deviceMemory?""+navigator.deviceMemory:"",n["c3.fp.hwConc"]=null!=navigator.hardwareConcurrency&&null!=navigator.hardwareConcurrency?""+navigator.hardwareConcurrency:"",n["c3.fp.java"]=""+("function"!=typeof navigator.javaEnabled)?"false":navigator.javaEnabled(),n["c3.fp.lang"]=null!=navigator.language&&null!=navigator.language?""+navigator.language:"",n["c3.fp.langs"]=null!=navigator.languages&&null!=navigator.languages&&0<navigator.languages.length?""+navigator.languages.toString():"",n["c3.fp.maxTp"]=null!=navigator.maxTouchPoints&&null!=navigator.maxTouchPoints?""+navigator.maxTouchPoints:"",n["c3.fp.plugins"]="",null!=navigator.plugins&&0<navigator.plugins.length)for(var t=0;t<navigator.plugins.length;t++)n["c3.fp.plugins"]+=navigator.plugins[t].name+",";if(n["c3.fp.mime"]="",null!=navigator.mimeTypes&&0<navigator.mimeTypes.length)for(var i=0;i<navigator.mimeTypes.length;i++)n["c3.fp.mime"]+=navigator.mimeTypes[i].type+",";n["c3.fp.sysLang"]=null!=navigator.systemLanguage&&null!=navigator.systemLanguage?""+navigator.systemLanguage:"",n["c3.fp.platform"]=null!=navigator.platform&&null!=navigator.platform?""+navigator.platform:"",n["c3.fp.product"]=null!=navigator.product&&null!=navigator.product?""+navigator.product:"",n["c3.fp.productSub"]=null!=navigator.productSub&&null!=navigator.productSub?""+navigator.productSub:"",n["c3.fp.vendor"]=null!=navigator.vendor&&null!=navigator.vendor?""+navigator.vendor:"",n["c3.fp.vendorSub"]=null!=navigator.vendorSub&&null!=navigator.vendorSub?""+navigator.vendorSub:"";var u=d.ma();""!=u&&(n["c3.fp.canvFp"]=u)}return"undefined"!=typeof window&&null!=window&&(null!=window.screen&&(n["c3.fp.availHeight"]=null!=window.screen.availHeight&&null!=window.screen.availHeight?""+window.screen.availHeight:"",n["c3.fp.availWidth"]=null!=window.screen.availWidth&&null!=window.screen.availWidth?""+window.screen.availWidth:"",n["c3.fp.height"]=null!=window.screen.height&&null!=window.screen.height?""+window.screen.height:"",n["c3.fp.width"]=null!=window.screen.width&&null!=window.screen.width?""+window.screen.width:"",n["c3.fp.colorDepth"]=null!=window.screen.colorDepth&&null!=window.screen.colorDepth?""+window.screen.colorDepth:"",n["c3.fp.deviceXDPI"]=null!=window.screen.deviceXDPI&&null!=window.screen.deviceXDPI?""+window.screen.deviceXDPI:"",n["c3.fp.deviceYDPI"]=null!=window.screen.deviceYDPI&&null!=window.screen.deviceYDPI?""+window.screen.deviceYDPI:""),n["c3.fp.dpi"]=null!=window.devicePixelRatio&&null!=window.devicePixelRatio?""+window.devicePixelRatio:"",n["c3.fp.secure"]=null!=window.isSecureContext&&null!=window.isSecureContext?""+window.isSecureContext:""),n},this.ma=function(){if("undefined"==typeof document||null==document)return"";var n=document.createElement("CANVAS"),t=n.getContext("2d"),i="conviva";return t.textBaseline="top",t.font="14px 'Arial'",t.textBaseline="alphabetic",t.fillStyle="#f40",t.fillRect(null!=navigator.plugins&&null!=navigator.plugins?navigator.plugins.length:0,null!=navigator.mimeTypes&&null!=navigator.mimeTypes?navigator.mimeTypes.length:0,null!=navigator.product&&null!=navigator.product?navigator.product.length:0,null!=navigator.vendor&&null!=navigator.vendor?navigator.vendor.length:0),t.fillStyle="#069",t.fillText(i,null!=navigator.maxTouchPoints&&null!=navigator.maxTouchPoints?navigator.maxTouchPoints:0,null!=navigator.product&&null!=navigator.product?navigator.product.length:0),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText(i,null!=navigator.deviceMemory&&null!=navigator.deviceMemory?navigator.deviceMemory:0,null!=navigator.hardwareConcurrency&&null!=navigator.hardwareConcurrency?navigator.hardwareConcurrency:0),Z.Da(n.toDataURL())},this.Ah=function(){var n;d.Fr||null!=(n=d.wa())&&d.ya(n)},this.fa=function(){var n;d.Qt!==S.PlayerState.PLAYING||null==d.lu||0<(n=d.lu.getRenderedFrameRate())&&(d.jr+=n,d.Kr++)},this.Na=function(){return 0<d.jr&&0<d.Kr?Z.Pa.Cast(+d.jr/d.Kr):(this.fa(),0<d.jr&&0<d.Kr?Z.Pa.Cast(+d.jr/d.Kr):S.DEFAULT_RENDERED_FRAME_RATE)},this.ya=function(n){d.ca();var i=d.hr-1;d.c.info("postHeartbeat(): Send HB["+i+"]"+d.Eh());d.uh.ba(n,function(n,t){d.Ma(n,t,i)})},this.Ma=function(s,e,l){d.Fr||d.N.y("onHeartbeatResponse",function(){var n,t,i,u;s?null!=(t=e)?(d.c.debug("onHeartbeatResponse(): received valid response for HB["+l+"]"),d.Ea(l),null==(u=t[B.Js])||u!=(n=d.lh.get(Y.P))&&(d.c.debug("onHeartbeatResponse(): setting the client id to "+u+" (from gateway)"),d.lh.set(Y.P,u),d.lh.La(),n===B.M&&u!==B.M&&d.Bi.D()),null!=(u=t[B.Ys])&&u!=B.qs&&d.c.error("onHeartbeatResponse(): error from gateway: "+u),"object"==typeof(u=t[B.Qs])&&(null!=(t=u[B.Zs])&&d.lh.get(Y.Ra)!==t&&(d.c.debug("onHeartbeatResponse(): setting Maximum Heartbeat Infos to "+t+" (from gateway)"),d.lh.set(Y.Ra,t)),(t=null!=(t=u[B.zs])&&Z.Ua(t))!==d.lh.get(Y.Sa)&&(d.c.debug("onHeartbeatResponse(): turning "+(t?"on":"off")+" sending of logs"),d.lh.set(Y.Sa,t)),null==(t=u[B.$s])||(i=Z.Pa.Cast(t))!=d.St.heartbeatInterval&&(d.c.debug("onHeartbeatResponse(): received hbIntervalMs from gateway: "+i),d.St.heartbeatInterval=i,null!=d.or&&d.mh()),null!=(i=u[B.ne])&&i!=d.St.gatewayUrl&&(d.c.debug("onHeartbeatResponse(): received gatewayUrl from gateway: "+i),d.St.gatewayUrl=i),d.Va()||(d.Wr={},null!=(i=u[B.te])&&(d.xr||(d.xr=!0),d.c.debug("onHeartbeatResponse(): received fp from gateway: "+i),d.Wr=i.split(",")),d.$r=u[B.ie],1==d.$r?(d.c.debug("onHeartbeatResponse(): enabling the CDN Server IP collection"),null!=d.Zr&&null!=d.Zr||d.Ph()):d.Oh()))):d.c.warning("onHeartbeatResponse(): decoded heartbeat response is null."):(u=e,Z.Tn(u)?Z.ka(u,"HTTP timeout")?d.c.warning("onHeartbeatResponse(): "+u):d.c.error("onHeartbeatResponse(): failed to send heartbeat: "+u):(u=W.Fa,d.c.error("onHeartbeatResponse(): "+u)),d.va(l,u))})},this.ta=function(){return Z.Pa.Cast(d.eh.current()-d.rr)},this.ra=function(){return this.ih.ia()},this.Eh=function(){return this.Th()?" (global session)":""},this.Th=function(){return this.ah==j.an.Bl},this.Va=function(){return this.ah==j.an.Bl&&"T"===this.Nr["c3.IPV4IPV6GlobalSession"]},this.fh=function(){return this.ah==j.an.hn},this.ch=function(){return this.ah==j.an.Rn},this.Nn=function(n){d.Ha(n),d.wh()},this.Ha=function(n){var t={},i={};if(Z.Tn(n.assetName)&&(d.En.assetName!=n.assetName?(null!=d.En.assetName&&(t[B.Re]=d.En.assetName),i[B.Re]=n.assetName,d.En.assetName=n.assetName):d.c.warning("mergeContentMetadata(): assetName was not changed.")),Z.Tn(n.applicationName)&&(d.En.applicationName!=n.applicationName?(null!=d.En.applicationName&&(t[B.Te]=d.En.applicationName),i[B.Te]=n.applicationName,d.En.applicationName=n.applicationName):d.c.warning("mergeContentMetadata(): applicationName was not changed.")),Z.Tn(n.streamUrl)&&(d.En.streamUrl!=n.streamUrl?(null!=d.En.streamUrl&&(t[B.Ue]=d.En.streamUrl),i[B.Ue]=n.streamUrl,d.En.streamUrl=n.streamUrl,d.lt=d.En.streamUrl):d.c.warning("mergeContentMetadata(): streamUrl was not changed.")),Z.Tn(n.viewerId)&&(d.En.viewerId!=n.viewerId?(null!=d.En.viewerId&&(t[B.de]=d.En.viewerId),i[B.de]=n.viewerId,d.En.viewerId=n.viewerId):d.c.warning("mergeContentMetadata(): viewerId was not changed.")),Z.Tn(n.defaultResource)&&(d.En.defaultResource!=n.defaultResource?(null!=d.En.defaultResource&&(t[B.be]=d.En.defaultResource),i[B.be]=n.defaultResource,d.En.defaultResource=n.defaultResource):d.c.warning("mergeContentMetadata(): defaultResource was not changed.")),Z.fn(n.duration)&&0<n.duration&&(d.En.duration!=n.duration?(0<d.Rr&&(t[B.Ie]=d.Rr),i[B.Ie]=n.duration,d.En.duration=n.duration,d.Rr=d.En.duration):d.c.warning("mergeContentMetadata(): duration was not changed.")),Z.fn(n.encodedFrameRate)&&0<n.encodedFrameRate&&(d.En.encodedFrameRate!=n.encodedFrameRate?(-1<d.En.encodedFrameRate&&(t[B.me]=d.En.encodedFrameRate),i[B.me]=n.encodedFrameRate,d.En.encodedFrameRate=n.encodedFrameRate,d.ft=d.En.encodedFrameRate):d.c.warning("mergeContentMetadata(): encodedFrameRate was not changed.")),n.streamType!=c.StreamType.UNKNOWN&&(d.En.streamType!=n.streamType?(d.En.streamType!=c.StreamType.UNKNOWN&&(d.En.streamType==fn.ContentMetadata.StreamType.LIVE?t[B.oe]=!0:t[B.oe]=!1),n.streamType==fn.ContentMetadata.StreamType.LIVE?i[B.oe]=!0:i[B.oe]=!1,d.En.streamType=n.streamType):d.c.warning("mergeContentMetadata(): streamType was not changed.")),0<Z.An(n.custom)){var u,s={},e={};for(u in n.custom)d.En.custom[u]!=n.custom[u]?(s[u]=n.custom[u],d.En.custom[u]&&(e[u]=d.En.custom[u]),d.En.custom[u]=n.custom[u]):d.c.info("mergeContentMetadata(): custom."+u+" was not changed.");0<Z.An(s)?(0<Z.An(e)&&(t[B.we]=e),i[B.we]=s):d.c.warning("mergeContentMetadata(): custom was not changed.")}0<Z.An(i)&&this.Vh(i,t)},this.wh=function(){var n;d.c.debug("setStatesFromContentMetadata()"),null!=d.En.defaultResource&&this._o(d.En.defaultResource),null!=d.En.streamUrl&&this.Yo(d.En.streamUrl),0<d.En.duration&&this.go(d.En.duration),0<d.En.encodedFrameRate&&this.Oo(d.En.encodedFrameRate),d.En.streamType!==c.StreamType.UNKNOWN&&(n=d.En.streamType===c.StreamType.LIVE,this.no(n)),null!=d.En.assetName&&this.fo(d.En.assetName),null!=d.En.viewerId&&this.ao(d.En.viewerId),null==d.En.applicationName&&null==d.En.playerName||this.co(d.En.applicationName||d.En.playerName),0<Z.An(d.En.custom)&&this.vo(d.En.custom)},this.Nh=function(){var n={};if(this.Th()||(null!=d.En.assetName?n[B.Re]=d.En.assetName:d.c.warning("enqueueEventForContentMetadata(): assetName was not set."),null!=d.En.applicationName?n[B.Te]=d.En.applicationName:d.c.warning("enqueueEventForContentMetadata(): applicationName was not set."),null!=d.En.streamUrl?n[B.Ue]=d.En.streamUrl:d.c.warning("enqueueEventForContentMetadata(): streamUrl was not set."),null!=d.En.viewerId?n[B.de]=d.En.viewerId:d.c.warning("enqueueEventForContentMetadata(): viewerId was not set."),null!=d.En.defaultResource?n[B.be]=d.En.defaultResource:d.c.warning("enqueueEventForContentMetadata(): defaultResource was not set."),-1<d.En.duration?n[B.Ie]=d.En.duration:d.c.warning("enqueueEventForContentMetadata(): duration was not set."),-1<d.En.encodedFrameRate?n[B.me]=d.En.encodedFrameRate:d.c.warning("enqueueEventForContentMetadata(): encodedFrameRate was not set."),d.En.streamType!=c.StreamType.UNKNOWN?d.En.streamType==fn.ContentMetadata.StreamType.LIVE?n[B.oe]=!0:n[B.oe]=!1:d.c.warning("enqueueEventForContentMetadata(): streamType was not set.")),0<Z.An(d.En.custom))for(var t in n[B.we]={},d.En.custom)n[B.we][t]=d.En.custom[t];else this.Th()||d.c.warning("enqueueEventForContentMetadata(): custom tags were not set.");0<Z.An(n)&&this.Vh(n,null)},this.gh=function(){null!=d.En&&Z.Tn(d.En.assetName)||d.c.warning("Missing assetName during session creation"),null!=d.En&&Z.Tn(d.En.defaultResource)||d.c.warning("Missing resource during session creation"),null!=d.En&&Z.Tn(d.En.streamUrl)||d.c.warning("Missing streamUrl during session creation"),(null==d.En||d.En.encodedFrameRate<=0)&&d.c.warning("Missing encodedFrameRate during session creation"),null!=d.En&&Z.Tn(d.En.viewerId)||d.c.warning("Missing viewerId during session creation"),null!=d.En&&null!=d.En.streamType&&c.StreamType.UNKNOWN!==d.En.streamType||d.c.warning("Missing streamType during session creation"),null!=d.En&&Z.Tn(d.En.applicationName)||d.c.warning("Missing applicationName during session creation"),(null==d.En||d.En.duration<=0)&&d.c.warning("Missing duration during session creation")},this.kn=function(n,t){null==d.Ur&&(d.Ur={}),d.Ur[n]=t},this.Sh=function(){var n={};null!=d.Bi.A&&(n[B.Be]=d.Bi.A,d.A=d.Bi.A),null!=d.Bi.I&&(n[B.Ge]=d.Bi.I,d.I=d.Bi.I),0<Z.An(n)&&this.Vh(n,null)}};j.vh=B.Hl.hn+B.Hl.Gl+B.Hl.Kl,j.an={hn:"Video",Bl:"Global",Rn:"Ad"},an.IMonitor=function(){this._i=function(n){},this.Oi=function(n){},this.Ci=function(n,t){},this.ri=function(n){},this.Ba=function(n){},this.fi=function(n){},this.Ga=function(n){},this.ci=function(n){},this.Ka=function(n){},this.Ri=function(n){},this.wi=function(n){},this.Ai=function(n){},this.Ii=function(n){},this.Y=function(n){},this.Q=function(n){},this.ja=function(n){},this.mi=function(n,t){},this.li=function(){},this.Di=function(n){}};var W=an.Session=function(){var u=this;u.lu=null,u.g=0,u.ah=j.an.hn,u.Wa=!1,u.Fr=!1,u.xa=!1,u.qa=null,u.Ki=null,u.Ya=null,u.Ja=!1,u.Qa=S.PlayerState.NOT_MONITORED,u.Xa=!1,u.Za=!1,u.za=!1,u.$a=!1,u.nf=!1,function(n,t,i,u,s,e,l){this.g=n,this.ah=t,this.lh=i,this.tf=u,this.vn=s,this.N=e}.apply(u,arguments),this.rh=function(n){u.vn.rh(this),null!=n&&null!=n&&u.pn(n),u.lh.if()?u.uf():u.lh.sf(function(){u.uf()})},this.cleanup=function(){u.Wa=!0,u.vn.dh(),u.lh.if()?u.ef():u.lh.sf(function(){u.ef()})},this.lf=function(){(u.fh()||u.ch())&&null!=u.lu&&u.rf(),u.N=null,u.Bi=null,u.lh=null,u.tf=null,u.vn.on(),u.vn=null,u.Fr=!0},this.ef=function(){u.vn.ph(),u.lf()},this.uf=function(){u.vn.Rh(),u.hf(),u.vn.Ih()},this.hf=function(){var n=u.tf.get(),t=n[on.BROWSER_NAME];null!=t&&u.vn.Do(t);t=n[on.BROWSER_VERSION];null!=t&&u.vn.yo(t);t=n[on.DEVICE_BRAND];null!=t&&u.vn.Po(t);t=n[on.DEVICE_MANUFACTURER];null!=t&&u.vn.bo(t);t=n[on.DEVICE_MODEL];null!=t&&u.vn.Mo(t);t=n[on.DEVICE_TYPE];null!=t&&u.vn.Lo(t);t=n[on.DEVICE_VERSION];null!=t&&u.vn.Uo(t);t=n[on.FRAMEWORK_NAME];null!=t&&u.vn.Vo(t);t=n[on.FRAMEWORK_VERSION];null!=t&&u.vn.ko(t);t=n[on.OPERATING_SYSTEM_NAME];null!=t&&u.vn.Fo(t);t=n[on.OPERATING_SYSTEM_VERSION];null!=t&&u.vn.Ho(t);t=n[on.DEVICE_CATEGORY];null!=t&&u.vn.Bo(t);t=n[on.SCREEN_WIDTH];null!=t&&u.vn.Go(t);t=n[on.SCREEN_HEIGHT];null!=t&&u.vn.Ko(t);n=n[on.SCALE_FACTOR];null!=n&&u.vn.jo(n)},this._i=function(n){u.vn.Qt!=n&&(u.vn.Qt==S.PlayerState.NOT_MONITORED&&n!=S.PlayerState.NOT_MONITORED&&(u.Qa=n),u.Ja||u.vn.wu(n))},this.Oi=function(n){u.Xa||u.vn.kh(n)},this.bi=function(n){u.Za||u.vn.Wo(n)},this.Mi=function(n){u.Za||u.vn.zu(n)},this.Ci=function(n,t){Z.fn(t)||(t=-1),u.vn.ha(n,t)},this.ri=function(n){0<n&&(u.$a||u.vn.Oo(n))},this.fi=function(n){0<n&&(u.$a||u.vn.go(n))},this.ci=function(n){u.vn.Yo(n)},this.Ai=function(n){u.vn.Wh(n)},this.Ii=function(n){u.vn.qh(n)},this.Y=function(n){u.vn.Xo(n)},this.Q=function(n){u.vn.Zo(n)},this.Ri=function(n){null==u.vn.Dh()&&u.vn.Vo(n)},this.wi=function(n){null==u.vn.yh()&&u.vn.ko(n)},this.Di=function(n){u.vn.tr(n)},this.mi=function(n,t){u.wn(n,t)},this.li=function(){u.rf()},this.yn=function(n,t,i){u.xa||(u.xa=!0,u.qa=n,u.Ki=t,u.Ya=i,u.vn.kr||u.vn.Kh(!0),u.qa==fn.Client.AdStream.CONTENT||u.Ki==fn.Client.AdPlayer.SEPARATE?(u.vn.Qt!==S.PlayerState.NOT_MONITORED&&(u.Qa=u.vn.Qt),u.vn.wu(S.PlayerState.NOT_MONITORED),u.Ja=!0):u.qa==fn.Client.AdStream.SEPARATE&&u.Ki==fn.Client.AdPlayer.CONTENT&&(u.vn.Qt!==S.PlayerState.NOT_MONITORED&&(u.Qa=u.vn.Qt),u.vn.wu(S.PlayerState.NOT_MONITORED),u.Ja=!0,u.Xa=!0,u.Za=!0,u.$a=!0,u.za=!0,u.nf=!0))},this.Pn=function(){u.xa&&(u.vn.kr||u.vn.Kh(!1),u.qa==fn.Client.AdStream.CONTENT||u.Ki==fn.Client.AdPlayer.SEPARATE?u.af||(u.Ja=!1,u.vn.wu(u.Qa)):u.qa==fn.Client.AdStream.SEPARATE&&u.Ki==fn.Client.AdPlayer.CONTENT&&(u.Xa=!1,u.Za=!1,u.$a=!1,u.za=!1,u.nf=!1,u.af||(u.Ja=!1,u.vn.wu(u.Qa))),u.xa=!1,u.qa=u.Ki=u.Ya=null)},this.Sn=function(){null!=u.lu&&null!==u.lu&&(u.N.y("Session.detachPlayer",function(){u.lu.oi()}),u.lu=null,u.vn.ea(null),u.vn.wu(S.PlayerState.NOT_MONITORED))},this.rf=function(){null!==u.lu&&(u.N.y("Session.releasePlayerStateManager",function(){u.lu.oi()}),u.lu=null,u.vn.ea(null),u.vn.wu(S.PlayerState.NOT_MONITORED))},this.gn=function(){u.vn.kr||u.vn.Kh(!0),u.vn.Qt!==S.PlayerState.NOT_MONITORED&&(u.Qa=u.vn.Qt),u.vn.wu(S.PlayerState.NOT_MONITORED),u.Ja=!0},this.pn=function(n){null==u.lu&&n instanceof S&&u.N.y("Session.attachPlayer()",function(){n.setMonitoringNotifier(u,u.g)&&(n.Ni(),u.lu=n,u.vn.ea(u.lu))})},this._n=function(){u.vn.kr||u.vn.Kh(!1),u.Xa=!1,u.Za=!1,u.$a=!1,u.za=!1,u.nf=!1,u.af||(u.Ja=!1,u.Qa!==S.PlayerState.NOT_MONITORED&&u.vn.wu(u.Qa))},this.Mn=function(){return u.lu},this.On=function(){u.af||(u.af=!0,u.Ja=!0)},this.Cn=function(){u.af&&(u.af=!1,u.xa||(u.Ja=!1,u.Qa!==S.PlayerState.NOT_MONITORED&&u.vn.wu(u.Qa)))},this.wn=function(n,t){Z.Tn(n)&&(t!==fn.Client.ErrorSeverity.FATAL&&t!==fn.Client.ErrorSeverity.WARNING||u.nf||(t=t===fn.Client.ErrorSeverity.FATAL,u.vn.zh(n,t)))},this.Nn=function(n){u.N.y("Session.updateContentMetadata",function(){u.vn.Nn(n)})},this.Dn=function(n,t){u.vn.aa(n,t)},this.Th=function(){return u.ah==j.an.Bl},this.fh=function(){return u.ah==j.an.hn},this.ch=function(){return u.ah==j.an.Rn},this.Eh=function(){return u.Th()?" (global session)":""},this.Un=function(){return this.g},this.Vn=function(){var n=null;return u.lh.if()&&(n=u.lh.get(Y.P)),n},this.kn=function(n,t){u.vn.kn(n,t)}};W.Fa="received no response (or a bad response) to heartbeat POST request";var x=an.SessionFactory=function(){var s=this;s.pt=null,s.ff=0,s.cf=null,function(n,t,i,u){s.Bi=n,s.St=t,s.lh=i,s.d=u,s.ff=0,s.cf={}}.apply(s,arguments),this.on=function(){for(var n in 0,s.pt=null,s.cf)s.cf[n].cleanup();s.cf=null,s.ff=0},this.vf=function(){var n=s.ff;return s.ff++,n},this.rn=function(n,t,i){return null==n&&(n=new c),s.Ef(n,t,i)},this.H=function(n){return s.Ef(n,j.an.Bl)},this.df=function(){return nn.Rf()},this.Ef=function(n,t,i){var u=n.nn(),n=s.df(),t=s.d.Ut(s.Bi,s.St,s.lh,n,t,u),u=s.vf();return s.Tf(u,t),t.rh(i),u},this.mn=function(n){n=s.cf[n];return n},this.cn=function(n){n=this.mn(n);return null!=n&&(n.fh()||n.ch()||(n=null)),n},this.Tf=function(n,t){s.cf[n]=t},this.wf=function(n){delete s.cf[n]},this.bn=function(n){var t=s.mn(n);s.wf(n),t.cleanup()},this.q=function(){return s.cf}},q=an.Nf=function(n){this.Gi=n,this.Sf=function(i,n,t){var u=!1;this.Gi.createOnce(function(){u||i(!(u=!0),t+" ("+n+" ms)")},n,"CallbackWithTimeout.wrap");return function(n,t){u||(u=!0,i(n,t))}}},Y=an.Config=function(n,t,i){var u=this;this.gf=t,this.pf=i,this._f={clientId:B.M,sendLogs:!1,maxHbInfos:B.Vs},this.S=Z.Aa(this._f),this.Of=!1,this.Cf=!1,this.Af=[],this.if=function(){return this.Of},this.en=function(){this.gf.en(Y.If,function(n,t){n&&u.mf(t),u.Of=!0,u.Df()})},this.mf=function(n){n=this.pf.ql(n);null!=n?null!=(n=n[Y.yf])&&n!=B.M&&""!=n&&"null"!=n&&(this.S[Y.P]=n):this.Cf=!0},this.Pf=function(){var n={};return n[Y.yf]=this.S.clientId,this.pf.xl(n)},this.La=function(){this.gf.La(Y.If,this.Pf(),function(){0})},this.sf=function(n){this.if()?n():this.Af.push(n)},this.get=function(n){return this.Of?this.S[n]:null},this.set=function(n,t){this.Of&&(this.S[n]=t)},this.Df=function(){for(var n;null!=(n=this.Af.shift());)n()}};Y.If="sdkConfig",Y.yf="clId",Y.P="clientId",Y.Sa="sendLogs",Y.Ra="maxHbInfos",Y._a="c3.fp.",Y.Hn={Oa:"0",bf:"1",Bn:"2",Fn:"3",Ca:"4",Kn:"5",Gn:"6"};var J=an.EventQueue=function(){this.Mf=[],this.Lf=0,this.sa=function(n){this.Mf.push(n)},this.ia=function(){var n=this.Lf;return this.Lf++,n},this.oh=function(){var n=this.Mf;return this.Mf=[],n}},Q=an.ExceptionCatcher=function(n,t,i){this.Uf=t,this.w=i,this.y=function(t,n,i){try{n()}catch(n){if(null!=i)i(n);else{if(this.w.allowUncaughtExceptions)throw n;this.Vf(t,n)}}},this.Vf=function(n,t){var i="Uncaught exception: "+n+": "+t.toString();if(null!=this.Uf)try{this.Uf.ba(i)}catch(n){0}}},X=an.GatewayControl=function(n,t,i,u,s){var e=this;this.St=n,this.kf=i,this.pf=u,this.Ff=s,this.ba=function(n,u){var t=this.pf.xl(n),n=(null!=this.Ff?-1<this.Ff.indexOf("ipv4")?this.St.L:this.St.B:this.St.gatewayUrl)+B.Ls;this.kf.Hf("POST",n,t,"application/json",function(n,t){var i;n?(i=e.pf.ql(t),u(n,i)):u(n,t)})}},Z=an.Lang={};Z.Bf=function(n){return Z.Tn(n)&&null!=n&&"undefined"!=n&&"null"!=n},Z.In=function(n){var t,i,u={};for(t in n)Z.Bf(t)&&(i=n[t],Z.Bf(i)&&(u[t]=i));return u},Z.hi=function(n,t,i){if(null==n)throw new Error("Expected "+i+" implementation is null.");for(var u in t)if("function"!=typeof n[u])throw new Error("Expected method "+u+" in "+i+" implementation.")},Z.An=function(n){var t,i=0;for(t in n)n.hasOwnProperty(t)&&i++;return i},Z.dn=function(n){return""+n},Z.Gf=function(n){return Math.floor(n)},Z.Jn=function(n){return Math.abs(Z.Gf(n))},Z.Ua=function(n){return Boolean(n)},Z.Tn=function(n){return"string"==typeof n&&""!==n},Z.ka=function(n,t){return"string"==typeof n&&"string"==typeof t&&("function"==typeof n.indexOf&&0===n.indexOf(t))},Z.Bt=function(n){return"boolean"==typeof n},Z.Kf=function(n){return escape(n)},Z.Yl=function(n){return"object"==typeof n},Z.Uh=function(n){var t,i="";for(t in n)i+=t+"="+n[t];return"Object{"+i+"}"},Z.jf=function(n){var t,i=Z.Aa(n);for(t in i)null==i[t]&&delete i[t];return i},Z.Aa=function(n){var t,i={};for(t in n)i[t]=n[t];return i},Z.Gh=function(n,t){if(typeof n!=typeof t)return!1;if(n instanceof Object&&t instanceof Object){if(Z.An(n)!==Z.An(t))return!1;for(var i in n)if(!(n[i]===t[i]))return!1;return!0}return n===t},Z.hs=function(){for(var n={},t=0;t<arguments.length;t++)for(var i in arguments[t])null!=arguments[t][i]&&null!=arguments[t][i]&&(n[i]=arguments[t][i]);return n},Z.fn=function(n){return"number"==typeof n&&Math.round(n)===n},Z.Wf=function(n){return"[object Array]"===Object.prototype.toString.call(n)},Z.xf=function(n,t){if(n===t)return!0;if(null==n||null==t)return!1;if(n.length!=t.length)return!1;for(var i=0;i<n.length;++i)if(Z.Wf(n[i])&&Z.Wf(t[i])){if(!Z.xf(n[i],t[i]))return!1}else if(n[i]!==t[i])return!1;return!0},Z.qf=function(){return void 0!==Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(n){return!1}}()},Z.Wn=function(n,t,i){if(Z.qf())Object.defineProperty(n,t,{configurable:!0,enumerable:!0,get:i});else{if(void 0===n.__defineGetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineGetter__");n.__defineGetter__(t,i)}},Z.xn=function(n,t,i){if(Z.qf())Object.defineProperty(n,t,{configurable:!0,set:i});else{if(void 0===n.__defineSetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineSetter__");n.__defineSetter__(t,i)}},Z.Da=function n(t){function i(n,t){return n>>>t|n<<32-t}for(var u,s,e=Math.pow,l=e(2,32),o="length",r="",h=[],a=8*t[o],f=n.h=n.h||[],c=n.k=n.k||[],v=c[o],E={},d=2;v<64;d++)if(!E[d]){for(u=0;u<313;u+=d)E[u]=d;f[v]=e(d,.5)*l|0,c[v++]=e(d,1/3)*l|0}for(t+="\0";t[o]%64-56;)t+="\0";for(u=0;u<t[o];u++){if((s=t.charCodeAt(u))>>8)return;h[u>>2]|=s<<(3-u)%4*8}for(h[h[o]]=a/l|0,h[h[o]]=a,s=0;s<h[o];){var R=h.slice(s,s+=16),T=f;for(f=f.slice(0,8),u=0;u<64;u++){var w=R[u-15],N=R[u-2],S=f[0],g=f[4],N=f[7]+(i(g,6)^i(g,11)^i(g,25))+(g&f[5]^~g&f[6])+c[u]+(R[u]=u<16?R[u]:R[u-16]+(i(w,7)^i(w,18)^w>>>3)+R[u-7]+(i(N,17)^i(N,19)^N>>>10)|0);(f=[N+((i(S,2)^i(S,13)^i(S,22))+(S&f[1]^S&f[2]^f[1]&f[2]))|0].concat(f))[4]=f[4]+N|0}for(u=0;u<8;u++)f[u]=f[u]+T[u]|0}for(u=0;u<8;u++)for(s=3;s+1;s--){var p=f[u]>>8*s&255;r+=(p<16?0:"")+p.toString(16)}return r},function(){var t={two32:4294967296};t.Yf=t.two32-1,t.Jf=0,Z.Qf=t,Z.Qf.Cast=function(n){n=parseInt(n,10);return n>t.Yf?n%=t.two32:n<t.Jf&&(n=-n%t.two32,n=t.two32-n),n},Z.Qf.Xf=function(n){n=parseInt(n,10);return n<=t.Yf&&n>=t.Jf};var i={Yf:2147483647,Jf:-2147483648};Z.Pa=i,Z.Pa.Cast=function(n){n=parseInt(n,10);return n>i.Yf?n%=i.Yf:n<i.Jf&&(n=-n%i.Yf,n=i.Yf-n),n},Z.Pa.Xf=function(n){n=parseInt(n,10);return n<=i.Yf&&n>=i.Jf}}();var z=an.LogBuffer=function(){this.Zf=[],this.zf=function(n){32<=this.Zf.length&&this.Zf.shift(),this.Zf.push(n)},this.oh=function(){var n=this.Zf;return this.Zf=[],n}},$=an.Ping=function(n,t,i,u){this.$f=!1,this.nc=null,this.c=n,this.c.setModuleName("Ping"),this.kf=t,this.St=i,this.gt=u,this.ba=function(n){this.$f||(this.$f=!0,n=this.tc()+"&d="+Z.Kf(n.toString()),this.c.error("send(): "+n),this.kf.Hf("GET",n,null,null,null),this.$f=!1)},this.tc=function(){if(!this.nc){var n=$.ic+"?comp="+$.uc+"&clv="+(this.gt||fn.Client.version);if(this.St&&(n+="&cid="+this.St.customerKey),n+="&sch="+B.Bs,!this.St)return n;this.nc=n}return this.nc}};$.uc="sdkjs",$.ic="https://pings.conviva.com/ping.ping";var nn=an.sc={};nn.ec=4294967295,nn.lc=2147483647,nn.oc=-2147483648,nn.Rf=function(){return Math.floor(Math.random()*nn.ec)+nn.oc},nn.un=function(){return Math.floor(Math.random()*nn.ec)};var tn=an.rc={};tn.ua=function(n,t,i,u){if(isNaN(n))return u;if("number"!=typeof n)return u;if(n==u)return u;n=Z.Gf(n);return tn.hc(n,t,i)},tn.hc=function(n,t,i){return null!=i&&i<n?n=i:null!=t&&n<t&&(n=t),n},tn.ht=function(n){return-1==n||-2==n?n:n=tn.ua(n,0,null,-1)};var un=an.StreamerError=function(){var i=this;i.errorCode=null,i.severity=r.ErrorSeverity.FATAL,function(n,t){i.errorCode=n,i.severity=t}.apply(i,arguments),this.Is=function(){return i.errorCode},this.ms=function(){return i.severity}},sn=an.HttpClient=function(n,t,i,u){this.dt=t,this.ac=i,this.w=u,this.Hf=function(n,t,i,u,s){var e=1e3*this.w.httpTimeout,l=null;null!=s&&(l=this.ac.Sf(s,e,"HTTP timeout")),this.dt.makeRequest(n,t,i,u,e,l)}},en=an.Logger=function(n,t,i,u,s){this.wt=n,this.vt=t,this.T=i,this.pt=u,this.Nt=s,this.debug=function(n){this.log(n,f.LogLevel.DEBUG)},this.info=function(n){this.log(n,f.LogLevel.INFO)},this.warning=function(n){this.log(n,f.LogLevel.WARNING)},this.error=function(n){this.log(n,f.LogLevel.ERROR)},this.log=function(n,t){n=this.fc(n,t);this.pt.zf(n),this.T.logLevel<=t&&this.wt.consoleLog(n,t)},this.cc=function(n){return"["+this.ni+"] "+n},this.vc=function(n){return"["+this.Nt+"] "+n},this.Ec=function(n){return"[Conviva] "+n},this.dc=function(n){return"["+(this.vt.getEpochTimeMs()/1e3).toFixed(3).toString()+"] "+n},this.Rc=function(n,t){return"["+en.Tc(t)+"] "+n},this.wc=function(n){return null!=this.Nc&&(n="sid="+this.Nc+" "+n),n},this.ro=function(n){this.Nc=n},this.setModuleName=function(n){this.ni=n},this.fc=function(n,t){return this.Ec(this.dc(this.Rc(this.vc(this.cc(this.wc(n))),t)))}};en.Tc=function(n){var t;switch(n){case f.LogLevel.ERROR:t="ERROR";break;case f.LogLevel.WARNING:t="WARNING";break;case f.LogLevel.INFO:t="INFO";break;case f.LogLevel.DEBUG:t="DEBUG"}return t};var ln=an.Storage=function(n,t,i,u){this.Rt=t,this.ac=i,this.w=u,this.en=function(n,t){t=this.ac.Sf(t,1e3*this.w.storageTimeout,"storage load timeout");this.Rt.loadData(ln.Sc,n,t)},this.La=function(n,t,i){i=this.ac.Sf(i,1e3*this.w.storageTimeout,"storage save timeout");this.Rt.saveData(ln.Sc,n,t,i)}};ln.Sc="Conviva";var on=an.SystemMetadata=function(n,t,i){this.Tt=t,this.N=i,this.gc=null,this.get=function(){return this.gc||this.retrieve(),this.gc},this.retrieve=function(){var n={};n[on.BROWSER_NAME]=this.Tt.getBrowserName,n[on.BROWSER_VERSION]=this.Tt.getBrowserVersion,n[on.DEVICE_BRAND]=this.Tt.getDeviceBrand,n[on.DEVICE_MANUFACTURER]=this.Tt.getDeviceManufacturer,n[on.DEVICE_MODEL]=this.Tt.getDeviceModel,n[on.DEVICE_TYPE]=this.Tt.getDeviceType,n[on.DEVICE_VERSION]=this.Tt.getDeviceVersion,n[on.FRAMEWORK_NAME]=this.Tt.getFrameworkName,n[on.FRAMEWORK_VERSION]=this.Tt.getFrameworkVersion,n[on.OPERATING_SYSTEM_NAME]=this.Tt.getOperatingSystemName,n[on.OPERATING_SYSTEM_VERSION]=this.Tt.getOperatingSystemVersion,n[on.DEVICE_CATEGORY]=this.Tt.getDeviceCategory,n[on.SCREEN_WIDTH]=this.Tt.getScreenWidth,n[on.SCREEN_HEIGHT]=this.Tt.getScreenHeight,n[on.SCALE_FACTOR]=this.Tt.getScaleFactor;var t,u=this;for(t in 0,n)!function(t,i){u.N.y("Session.getSystemMetadataSchema(): "+t,function(){var n=i[t];i[t]=n.call(u.Tt)})}(t,n),Z.Tn(n[t])||delete n[t];var i=!1;if(void 0!==n[on.DEVICE_TYPE]){for(var s in fn.Client.DeviceType)if(n[on.DEVICE_TYPE]===fn.Client.DeviceType[s]){i=!0;break}i||delete n[on.DEVICE_TYPE]}if(i=!1,void 0!==n[on.DEVICE_CATEGORY]){for(var e in fn.Client.DeviceCategory)if(n[on.DEVICE_CATEGORY]===fn.Client.DeviceCategory[e]){i=!0;break}i||delete n[on.DEVICE_CATEGORY]}this.gc=Z.jf(n)}};on.BROWSER_NAME="browserName",on.BROWSER_VERSION="browserVersion",on.DEVICE_BRAND="deviceBrand",on.DEVICE_MANUFACTURER="deviceManufacturer",on.DEVICE_MODEL="deviceModel",on.DEVICE_TYPE="deviceType",on.DEVICE_VERSION="deviceVersion",on.FRAMEWORK_NAME="frameworkName",on.FRAMEWORK_VERSION="frameworkVersion",on.OPERATING_SYSTEM_NAME="operatingSystemName",on.OPERATING_SYSTEM_VERSION="operatingSystemVersion",on.DEVICE_CATEGORY="deviceCategory",on.SCREEN_WIDTH="screenWidth",on.SCREEN_HEIGHT="screenHeight",on.SCALE_FACTOR="scaleFactor";var rn=an.Time=function(n,t){this.vt=n,this.current=function(){var n=this.vt.getEpochTimeMs();return Z.fn(n),n}},hn=an.Timer=function(n,t,i){var s=this;this.Et=t,this.N=i,this.create=function(n,t,i){return this.createTimer(function(){s.N.y(i,function(){n()})},t,i)},this.createOnce=function(n,t,i){var u={cancel:null},t=this.createTimer(function(){s.N.y(i,function(){u&&"function"==typeof u.cancel&&(u.cancel(),u.cancel=null,u=null),n()})},t,i);return u.cancel=t},this.createTimer=function(n,t,i){return this.Et.createTimer(n,t,i)}}}()}(),fn});